/*! phovea_core - v3.1.1-20200218-080405 - 2020
* https://phovea.caleydo.org
* Copyright (c) 2020 The Caleydo Team; Licensed BSD-3-Clause*/
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.core=e():(t.phovea=t.phovea||{},t.phovea.core=e())}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n={};return e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=144)}([function(t,e,n){"use strict";function r(t,e){function n(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function i(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(s,a)}u((r=r.apply(t,e||[])).next())})}function o(t,e){function n(t){return function(e){return r([t,e])}}function r(n){if(i)throw new TypeError("Generator is already executing.");for(;u;)try{if(i=1,o&&(s=o[2&n[0]?"return":n[0]?"throw":"next"])&&!(s=s.call(o,n[1])).done)return s;switch(o=0,s&&(n=[0,s.value]),n[0]){case 0:case 1:s=n;break;case 4:return u.label++,{value:n[1],done:!1};case 5:u.label++,o=n[1],n=[0];continue;case 7:n=u.ops.pop(),u.trys.pop();continue;default:if(s=u.trys,!(s=s.length>0&&s[s.length-1])&&(6===n[0]||2===n[0])){u=0;continue}if(3===n[0]&&(!s||n[1]>s[0]&&n[1]<s[3])){u.label=n[1];break}if(6===n[0]&&u.label<s[1]){u.label=s[1],s=n;break}if(s&&u.label<s[2]){u.label=s[2],u.ops.push(n);break}s[2]&&u.ops.pop(),u.trys.pop();continue}n=e.call(t,u)}catch(t){n=[6,t],o=0}finally{i=s=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var i,o,s,a,u={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return a={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a}e.a=r,e.b=i,e.c=o;/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};Object.assign},function(t,e,n){"use strict";function r(t){return void 0===t&&(t=null),null===t?n.i(d.b)():t instanceof d.a?t:Array.isArray(t)?Array.isArray(t[0])?o.apply(void 0,t):o(t):n.i(y.a)(Array.from(arguments).map(String).join(","))}function i(){if(0===arguments.length)return n.i(d.b)();var t=new d.a;return Array.isArray(arguments[0])?Array.from(arguments).forEach(function(e,n){0!==e.length&&t.dim(n).setSlice(e[0],e[1],e[2])}):"[object Object]"===Object.prototype.toString.call(arguments[0])?Array.from(arguments).forEach(function(e,n){t.dim(n).setSlice(e.from,e.to,e.step)}):"number"==typeof arguments[0]&&t.dim(0).setSlice(arguments[0],arguments[1],arguments[2]),t}function o(){if(0===arguments.length)return n.i(d.b)();if(Array.isArray(arguments[0])&&arguments[0][0]instanceof l.a)return new d.a(arguments[0]);if(Array.isArray(arguments[0])){var t=new d.a;return Array.from(arguments).forEach(function(e,n){e instanceof l.a?t.dims[n]=e:t.dim(n).setList(e)}),t}if("number"==typeof arguments[0]){var e=new d.a;return e.dim(0).setList(Array.from(arguments)),e}return arguments[0]instanceof l.a?new d.a(Array.from(arguments)):n.i(d.c)()}function s(){if(0===arguments.length)return n.i(d.b)();var t=arguments[0];return Array.isArray(t)||(t=Array.from(arguments)),new d.a(t.map(function(t){return t.dim(0)}))}function a(t){return new h.a("unnamed","gray",t)}function u(t,e){return new f.a(t,e)}function c(t){return t instanceof d.a}function p(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new d.a(t.map(l.a.single))}Object.defineProperty(e,"__esModule",{value:!0});var l=n(18),f=n(35),h=n(37),d=n(36),y=n(119);n.d(e,"Range",function(){return d.a}),n.d(e,"all",function(){return d.b}),n.d(e,"none",function(){return d.c}),n.d(e,"Range1D",function(){return l.a}),n.d(e,"CompositeRange1D",function(){return f.a}),n.d(e,"Range1DGroup",function(){return h.a}),e.parse=r,e.range=i,e.list=o,e.join=s,e.asUngrouped=a,e.composite=u,e.is=c,e.cell=p},function(t,e,n){"use strict";function r(t){void 0===t&&(t={}),t=i({offline:R,server_url:N,server_json_suffix:C},t),R=t.offline,N=t.server_url,C=t.server_json_suffix}function i(t,e){function n(t,e){return Object.keys(e).forEach(function(r){var i=e[r];"[object Object]"===Object.prototype.toString.call(i)?t[r]=null!=t[r]?n(t[r],i):i:t[r]=i}),t}for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return r.unshift(e),r.forEach(function(e){e&&(t=n(t,e))}),t}function o(t){return void 0===t}function s(t,e){return(t%e+e)%e}function a(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return t.bind.apply(t,[e].concat(n))}function u(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 1===t.length?function(e){return e[t[0]]}:function(e){return t.map(function(t){return e[t]})}}function c(t){return"function"==typeof t}function p(t){return t}function l(){}function f(t){return"boolean"==typeof t&&!0===t?h:"boolean"==typeof t&&!1===t?d:function(){return t}}function h(){return!0}function d(){return!1}function y(t,e){function n(){function n(){r[e].apply(r,Array.from(arguments))}var r;return r=n,i(n,t),n}return n}function g(t){void 0===t&&(t=8);for(var e="";e.length<t;)e+=Math.random().toString(36).slice(-8);return e.substr(0,t)}function v(t){return t.replace(/[\s!#$%&'()*+,.\/:;<=>?@\[\\\]\^`{|}~_-]/g," ").trim().split(/\s+/).map(function(t,e){return(0===e?t[0].toLowerCase():t[0].toUpperCase())+t.slice(1)}).join("")}function _(t,e,n){Array.isArray(t)?t.forEach(function(t){return V.observe(t,e,n)}):V.observe(t,e,n)}function m(t,e){n.i(L.a)(t,e)}function b(t,e){void 0===e&&(e=100);var n=-1;return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];n>=0&&(clearTimeout(n),n=-1),r.unshift(this),n=setTimeout(t.bind.apply(t,r),e)}}function x(t){if(!t)return{left:0,top:0,width:0,height:0};var e=t.getBoundingClientRect(),n=t.ownerDocument.defaultView;return{left:e.left+n.pageXOffset,top:e.top+n.pageYOffset,width:e.width,height:e.height}}function E(t){if(!t)return{x:0,y:0,w:0,h:0};var e=t.getBoundingClientRect();return{x:e.left,y:e.top,w:e.width,h:e.height}}function P(t){return t<=0?Promise.resolve(null):new Promise(function(e){setTimeout(e,t)})}Object.defineProperty(e,"__esModule",{value:!0});var O=n(100);n.d(e,"argFilter",function(){return O.a}),n.d(e,"argList",function(){return O.b}),n.d(e,"argSort",function(){return O.c}),n.d(e,"indexOf",function(){return O.d}),n.d(e,"search",function(){return O.e});var w=n(101);n.d(e,"copyDnD",function(){return w.a}),n.d(e,"hasDnDType",function(){return w.b}),n.d(e,"updateDropEffect",function(){return w.c}),n.d(e,"dragAble",function(){return w.d}),n.d(e,"dropAble",function(){return w.e});var A=n(51);n.d(e,"flagId",function(){return A.a}),n.d(e,"uniqueId",function(){return A.b}),n.d(e,"uniqueString",function(){return A.c});var M=n(98);n.d(e,"IdPool",function(){return M.a});var D=n(8);n.d(e,"resolveImmediately",function(){return D.a});var I=n(50);n.d(e,"HashProperties",function(){return I.a});var T=n(32);n.d(e,"PropertyHandler",function(){return T.a});var S=n(99),L=n(0);n.d(e,"version",function(){return j}),n.d(e,"offline",function(){return R}),n.d(e,"server_url",function(){return N}),n.d(e,"server_json_suffix",function(){return C}),e.init=r,e.mixin=i,e.isUndefined=o,e.mod=s,e.bind=a,e.getter=u,e.isFunction=c,e.identity=p,e.noop=l,e.constant=f,e.constantTrue=h,e.constantFalse=d,e.callable=y,e.randomId=g,n.d(e,"random_id",function(){return k}),e.fixId=v,n.d(e,"fix_id",function(){return U}),e.onDOMNodeRemoved=_,e.extendClass=m,n.d(e,"hash",function(){return B}),n.d(e,"param",function(){return q}),e.debounce=b,n.d(e,"delayedCall",function(){return z}),e.offset=x,e.bounds=E,e.resolveIn=P;var j="3.1.1-20200218-080405",R=!1,N="/api",C="";!function(){function t(t,e){void 0===e&&(e=t.slice(0,1).toUpperCase()+t.slice(1));var n=document.currentScript||document.querySelector("script[data-phovea-"+t+"]");if(n)return n.dataset["phovea"+e]}var e={};"true"===t("offline")&&(e.offline=!0);var n;void 0!==(n=t("server-url","ServerUrl"))&&(e.server_url=n),void 0!==(n=t("server-json-suffix","ServerJsonSuffix"))&&(e.server_json_suffix=n),r(e)}();var k=g,U=v,V=new S.a,B=new I.a,q=new T.a(location.search),z=b},function(t,e,n){"use strict";function r(t){return null!==t&&void 0!==t&&(t instanceof P||"function"==typeof t.idView&&"function"==typeof t.persist&&"function"==typeof t.restore&&t instanceof y.SelectAble&&"desc"in t&&"dim"in t)}function i(t,e){t.__data__=e}function o(t){if(0===t.length||0===t[0].length)return[];for(var e=t[0].map(function(t){return[t]}),n=1;n<t.length;++n)t[n].forEach(function(t,n){return e[n].push(t)});return e}function s(t,e){if(Array.isArray(t)){var n=t;if(n.indexOf(e)>=0)return n.map(function(t){return t===e?NaN:t})}return t===e?NaN:t}function a(t,e){return e.type===E&&"missing"in e?s(t,e.missing):e.type===E||e.type===x?s(t,null):t}function u(t,e,r){void 0===r&&(r={});var i=n.i(d.mixin)({skipEmptyCategories:!0,colors:["gray"],labels:null,name:"Partitioning"},r),o=e.map(function(t,e){return{name:i.labels?i.labels[e]:t.toString(),color:i.colors[Math.min(e,i.colors.length-1)],indices:[]}});t.forEach(function(t,n){var r=e.indexOf(t);r>=0&&o[r].indices.push(n)}),i.skipEmptyCategories&&(o=o.filter(function(t){return t.indices.length>0}));var s=o.map(function(t){return new v.Range1DGroup(t.name,t.color,v.Range1D.from(t.indices))});return n.i(v.composite)(i.name,s)}function c(t,e){function r(t){P.call(this,t),"function"==typeof this.init&&this.init.apply(this,Array.from(arguments))}return n.i(d.extendClass)(r,P),r.prototype.toString=function(){return t},r.prototype=n.i(d.mixin)(r.prototype,e),r}function p(t){return t-parseFloat(t)+1>=0}function l(t){if(0===t.length)return{type:"string"};var e=t[0];if("number"==typeof e||p(e))return{type:x,range:n.i(g.extent)(t.map(parseFloat))};var r=new Set(t);return r.size<.2*t.length||r.size<8?{type:"categorical",categories:Array.from(r.values())}:{type:"string"}}function f(t){void 0===t&&(t="localData");var e=n.i(d.uniqueString)(t);return{type:"default",id:e,name:e,fqname:e,description:"",creator:n.i(_.currentUserNameOrAnonymous)(),ts:Date.now()}}Object.defineProperty(e,"__esModule",{value:!0});var h=n(0),d=n(2),y=n(4),g=n(11),v=n(1),_=n(22);n.d(e,"VALUE_TYPE_CATEGORICAL",function(){return m}),n.d(e,"VALUE_TYPE_STRING",function(){return b}),n.d(e,"VALUE_TYPE_REAL",function(){return x}),n.d(e,"VALUE_TYPE_INT",function(){return E}),n.d(e,"ADataType",function(){return P}),n.d(e,"DummyDataType",function(){return O}),e.isDataType=r,e.assignData=i,e.transpose=o,e.mask=a,e.categorical2partitioning=u,e.defineDataType=c,e.guessValueTypeDesc=l,e.createDefaultDataDesc=f;var m="categorical",b="string",x="real",E="int",P=function(t){function e(e){var n=t.call(this)||this;return n.desc=e,n}return h.a(e,t),Object.defineProperty(e.prototype,"dim",{get:function(){return[]},enumerable:!0,configurable:!0}),e.prototype.ids=function(t){return void 0===t&&(t=n.i(v.all)()),Promise.resolve(n.i(v.none)())},e.prototype.idView=function(t){return Promise.resolve(this)},Object.defineProperty(e.prototype,"idtypes",{get:function(){return[]},enumerable:!0,configurable:!0}),e.prototype.persist=function(){return this.desc.id},e.prototype.restore=function(t){return this},e.prototype.toString=function(){return this.persist()},e}(y.SelectAble),O=function(t){function e(e){return t.call(this,e)||this}return h.a(e,t),e}(P)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(49);n.d(e,"clearSelection",function(){return r.b}),n.d(e,"EVENT_REGISTER_IDTYPE",function(){return r.c}),n.d(e,"list",function(){return r.d}),n.d(e,"listAll",function(){return r.e}),n.d(e,"persist",function(){return r.f}),n.d(e,"register",function(){return r.g}),n.d(e,"restore",function(){return r.h}),n.d(e,"resolve",function(){return r.a}),n.d(e,"resolveProduct",function(){return r.i}),n.d(e,"isInternalIDType",function(){return r.j});var i=n(48);n.d(e,"SelectAble",function(){return i.a});var o=n(14);n.d(e,"asSelectOperation",function(){return o.b}),n.d(e,"defaultSelectionType",function(){return o.a}),n.d(e,"hoverSelectionType",function(){return o.e}),n.d(e,"SelectOperation",function(){return o.c}),n.d(e,"toSelectOperation",function(){return o.f}),n.d(e,"integrateSelection",function(){return o.g});var s=n(17);n.d(e,"IDType",function(){return s.a});var a=n(47);n.d(e,"AProductSelectAble",function(){return a.a});var u=n(31);n.d(e,"ProductIDType",function(){return u.a});var c=n(97);n.d(e,"ObjectManager",function(){return c.a}),n.d(e,"isId",function(){return c.b}),n.d(e,"toId",function(){return c.c});var p=n(96);n.d(e,"LocalIDAssigner",function(){return p.a}),n.d(e,"createLocalAssigner",function(){return p.b})},function(t,e,n){"use strict";function r(t,e,n){return new c(t,e,n,n)}function i(t,e){return new c(t.type,t.args,e,t.target)}function o(t,e){return f.on(t,e)}function s(t,e){return f.off(t,e)}function a(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return f.fire.apply(f,[t].concat(e))}function u(){return f.getRegisteredHandlerCount()}Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"EventHandler",function(){return l}),e.on=o,e.off=s,e.fire=a,e.getRegisteredHandlerCount=u;var c=function(){function t(t,e,n,r){this.type=t,this.args=e,this.target=n,this.delegateTarget=r,this.timeStamp=new Date,this.stopped=!1,this.stopedPropagation=!1}return Object.defineProperty(t.prototype,"currentTarget",{get:function(){return this.target},enumerable:!0,configurable:!0}),t.prototype.isImmediatePropagationStopped=function(){return this.stopped},t.prototype.stopImmediatePropagation=function(){this.stopped=!0},t.prototype.isPropagationStopped=function(){return this.stopedPropagation},t.prototype.stopPropagation=function(){this.stopedPropagation=!0},t}(),p=function(){function t(t){this.type=t,this.listeners=[]}return t.prototype.push=function(t){this.listeners.push(t)},t.prototype.remove=function(t){var e=this.listeners.indexOf(t);return e>=0&&(this.listeners.splice(e,1),!0)},t.prototype.fire=function(t){if(0===this.listeners.length)return!1;var e=[t].concat(t.args);if(1===this.listeners.length)this.listeners[0].apply(t,e);else for(var n=this.listeners.slice(),r=n.length,i=0;i<r&&!t.isImmediatePropagationStopped();++i)n[i].apply(t,e);return!0},Object.defineProperty(t.prototype,"length",{get:function(){return this.listeners.length},enumerable:!0,configurable:!0}),t}(),l=function(){function t(){var t=this;this.handlers=new Map,this.propagationHandler=function(e){e.isPropagationStopped()||t.fireEvent(i(e,t))}}return t.prototype.on=function(e,n){var r=this;return"string"==typeof e?e.split(t.MULTI_EVENT_SEPARATOR).forEach(function(t){r.handlers.has(t)||r.handlers.set(t,new p(t)),r.handlers.get(t).push(n)}):Object.keys(e).forEach(function(t){var n=e[t];r.on(t,n)}),this},t.prototype.off=function(e,n){var r=this;return"string"==typeof e?e.split(t.MULTI_EVENT_SEPARATOR).forEach(function(t){if(r.handlers.has(t)){var e=r.handlers.get(t);e.remove(n),0===e.length&&r.handlers.delete(t)}}):Object.keys(e).forEach(function(t){var n=e[t];r.off(t,n)}),this},t.prototype.getRegisteredHandlerCount=function(){var t={};return this.handlers.forEach(function(e,n){t[n]=e.length}),t},t.prototype.fire=function(e){for(var n=this,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];return e.split(t.MULTI_EVENT_SEPARATOR).forEach(function(t){n.fireEvent(r(t,i,n))}),this},t.prototype.fireEvent=function(t){if(this.handlers.has(t.type)){return this.handlers.get(t.type).fire(t)}return!1},t.prototype.propagate=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];e.on(n.join(t.MULTI_EVENT_SEPARATOR),this.propagationHandler)},t.prototype.stopPropagation=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];e.off(n.join(t.MULTI_EVENT_SEPARATOR),this.propagationHandler)},t.MULTI_EVENT_SEPARATOR=",",t}(),f=new l},function(t,e,n){"use strict";function r(t){return function(e){return t instanceof RegExp?t.test(e.type):e.type===t}}var i=n(0),o=n(4),s=n(1),a=n(2),u=n(5);n.d(e,"e",function(){return c}),n.d(e,"g",function(){return p}),n.d(e,"f",function(){return l}),n.d(e,"h",function(){return f}),n.d(e,"i",function(){return h}),n.d(e,"b",function(){return d}),n.d(e,"a",function(){return y}),e.d=r,n.d(e,"c",function(){return g});var c=0,p="_nodes",l=1,f="_edges",h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.attrMap=new Map,e}return i.a(e,t),e.prototype.persist=function(){if(this.attrMap.size>0){var t={};return this.attrMap.forEach(function(e,n){return t[n]=e}),{attrs:t}}return{}},e.prototype.setAttr=function(t,e){var n=this.attrMap.get(t);(n!==e||Array.isArray(n))&&(this.attrMap.set(t,e),this.fire("attr-"+t,e,n),this.fire("setAttr",t,e,n))},e.prototype.hasAttr=function(t){return this.attrMap.has(t)},e.prototype.getAttr=function(t,e){return void 0===e&&(e=null),this.attrMap.has(t)?this.attrMap.get(t):e},Object.defineProperty(e.prototype,"attrs",{get:function(){return Array.from(this.attrMap.keys())},enumerable:!0,configurable:!0}),e.prototype.restore=function(t){var e=this;return t.attrs&&Object.keys(t.attrs).forEach(function(n){return e.attrMap.set(n,t.attrs[n])}),this},e}(u.EventHandler),d=function(t){function e(e,r){void 0===e&&(e="node"),void 0===r&&(r=NaN);var i=t.call(this)||this;return i.type=e,i.outgoing=[],i.incoming=[],i._id=NaN,i._id=n.i(a.flagId)("graph_node",r),i}return i.a(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return isNaN(this._id)&&(this._id=n.i(a.uniqueId)("graph_node")),this._id},enumerable:!0,configurable:!0}),e.prototype.persist=function(){var e=t.prototype.persist.call(this);return e.type=this.type,e.id=this.id,e},e.prototype.restore=function(e){return t.prototype.restore.call(this,e),this.type=e.type,this._id=n.i(a.flagId)("graph_node",e.id),this},e}(h),y=function(t){function e(e,r,i,o){void 0===e&&(e="edge"),void 0===r&&(r=null),void 0===i&&(i=null),void 0===o&&(o=NaN);var s=t.call(this)||this;return s.type=e,s.source=r,s.target=i,s._id=NaN,s._id=n.i(a.flagId)("graph_edge",o),r&&i&&s.init(),s}return i.a(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return isNaN(this._id)&&(this._id=n.i(a.uniqueId)("graph_edge")),this._id},enumerable:!0,configurable:!0}),e.prototype.init=function(){this.source.outgoing.push(this),this.target.incoming.push(this)},e.prototype.takeDown=function(){this.source&&this.source.outgoing.splice(this.source.outgoing.indexOf(this),1),this.target&&this.target.incoming.splice(this.target.incoming.indexOf(this),1)},e.prototype.toString=function(){return this.source+" "+this.type+" "+this.target},e.prototype.persist=function(){var e=t.prototype.persist.call(this);return e.type=this.type,e.id=this.id,e.source=this.source.id,e.target=this.target.id,e},e.prototype.restore=function(e,r){return t.prototype.restore.call(this,e),this.type=e.type,this._id=n.i(a.flagId)("graph_edge",e.id),this.source=r(e.source),this.target=r(e.target),this.init(),this},e}(h),g=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i.a(e,t),Object.defineProperty(e.prototype,"nnodes",{get:function(){return this.nodes.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nedges",{get:function(){return this.edges.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dim",{get:function(){return[this.nodes.length,this.edges.length]},enumerable:!0,configurable:!0}),e.prototype.ids=function(t){void 0===t&&(t=n.i(s.all)());var e=n.i(s.list)(this.nodes.map(function(t){return t.id}),this.edges.map(function(t){return t.id}));return Promise.resolve(e.preMultiply(n.i(s.parse)(t)))},e.prototype.idView=function(t){throw void 0===t&&(t=n.i(s.all)()),Error("not implemented")},e.prototype.selectNode=function(t,e){void 0===e&&(e=o.SelectOperation.SET),this.select(c,[this.nodes.indexOf(t)],e)},e.prototype.selectedNodes=function(){return i.b(this,void 0,void 0,function(){var t,e,n=this;return i.c(this,function(r){switch(r.label){case 0:return[4,this.selections()];case 1:return t=r.sent(),e=[],t.dim(c).forEach(function(t){return e.push(n.nodes[t])}),[2,e]}})})},e.prototype.selectEdge=function(t,e){void 0===e&&(e=o.SelectOperation.SET),this.select(l,[this.edges.indexOf(t)],e)},e.prototype.selectedEdges=function(){return i.b(this,void 0,void 0,function(){var t,e,n=this;return i.c(this,function(r){switch(r.label){case 0:return[4,this.selections()];case 1:return t=r.sent(),e=[],t.dim(l).forEach(function(t){return e.push(n.edges[t])}),[2,e]}})})},Object.defineProperty(e.prototype,"idtypes",{get:function(){return[p,f].map(o.resolve)},enumerable:!0,configurable:!0}),e}(o.SelectAble)},function(t,e,n){"use strict";function r(t,e){var n=e.trim();if("new"===n&&(n="new default"),"create"===n){if("function"==typeof t.create)return t.create;"function"==typeof t.default?n=void 0!==t.default.prototype?"new default":"default":console.error("neighter a default export nor the 'create' method exists in the module:",t)}if(n.startsWith("new ")){var r=n.substring("new ".length);return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return new((i=t[r]).bind.apply(i,[void 0].concat(e)));var i}}return t[n]}function i(t,e,i,o){var s=this,a="string"==typeof e?e:n.i(l.uniqueString)(t),u=i,c=n.i(l.mixin)({type:t,id:a,name:a,factory:"create",description:"",version:"1.0.0",load:function(){return p.b(s,void 0,void 0,function(){var t;return p.c(this,function(e){switch(e.label){case 0:return[4,Promise.resolve(u())];case 1:return t=e.sent(),[2,{desc:c,factory:r(t,c.factory)}]}})})}},"function"==typeof i?o:i);f.push(c)}function o(t,e){"function"==typeof e&&(h.has(t)||(h.add(t),e({push:i,flags:{}})))}function s(t){if(void 0===t&&(t=function(){return!0}),"string"==typeof t){var e=t;t=function(t){return t.type===e}}return f.filter(t)}function a(t,e){return f.find(function(n){return n.type===t&&n.id===e})}function u(t){return Promise.all(t.map(function(t){return t.load()}))}function c(t){return{create:function(){return t}}}Object.defineProperty(e,"__esModule",{value:!0});var p=n(0),l=n(2);e.getFactoryMethod=r,e.register=o,e.list=s,e.get=a,e.load=u,e.asResource=c;var f=[],h=new Set},function(t,e,n){"use strict";function r(t){return t instanceof Promise||t&&"function"==typeof t.then?t:new i(t)}e.a=r;var i=function(){function t(t){this.v=t}return t.prototype.then=function(t,e){return r(t(this.v))},t}()},function(t,e,n){"use strict";function r(t){if(t.ok)return t;throw new x(t)}function i(t,e){switch(t.trim().toLowerCase()){case"json":case"application/json":return e.json();case"text":case"text/plain":return e.text();case"blob":return e.blob();case"arraybuffer":return e.arrayBuffer();default:throw new x(e,'unknown expected data type: "'+t+'"')}}function o(t,e,o,s,a){return void 0===e&&(e={}),void 0===o&&(o="GET"),void 0===s&&(s="json"),void 0===a&&(a="formdata"),y.b(this,void 0,void 0,function(){var u,p,l,f,h;return y.c(this,function(d){switch(d.label){case 0:if(o=o.toUpperCase(),"GET"!==o&&"HEAD"!==o||(e=c(e))&&(t+=(/\?/.test(t)?"&":"?")+e,e=null),u={credentials:"same-origin",method:o,headers:{Accept:"application/json"}},e){switch(p="",a.trim().toLowerCase()){case"json":case"application/json":p="application/json",u.body="string"==typeof e?e:JSON.stringify(e);break;case"text":case"text/plain":p="text/plain",u.body=String(e);break;case"blob":case"arraybuffer":p="application/octet-stream",u.body=e;break;default:e instanceof FormData?u.body=e:(p="application/x-www-form-urlencoded",u.body=c(e))}p&&(u.headers["Content-Type"]=p)}return n.i(v.fire)(_,t,u),f=r,[4,self.fetch(t,u)];case 1:return l=f.apply(void 0,[d.sent()]),h=i(s,l),n.i(v.fire)(m,t,u,l,h),[2,h]}})})}function s(t,e){return void 0===e&&(e={}),o(t,e)}function a(t,e,n){return void 0===e&&(e={}),void 0===n&&(n="json"),o(t,e,"GET",n)}function u(t,e){return void 0===e&&(e=null),t=""+g.server_url+t+g.server_json_suffix,e=c(e),e&&(t+=(/\?/.test(t)?"&":"?")+e),t}function c(t){function e(t,n,i){Array.isArray(i)?i.forEach(function(r,i){"object"==typeof r?e(t,n+"["+i+"]",r):e(t,n+"[]",r)}):null==i||("object"==typeof i?Object.keys(i).forEach(function(r){e(t,n+"["+r+"]",i[r])}):r.push(encodeURIComponent(t+n)+"="+encodeURIComponent(i)))}if(void 0===t&&(t=null),null===t)return null;if("string"==typeof t)return encodeURIComponent(t);var n=Object.keys(t);if(0===n.length)return null;var r=[];return n.forEach(function(n){e("",n,t[n])}),r.join("&").replace(/%20/g,"+")}function p(t){E=t||function(){return Promise.reject("offline")}}function l(t,e,n){return Promise.resolve("function"==typeof t?t(n,e):t)}function f(t,e,n,r,i){return void 0===e&&(e={}),void 0===n&&(n="GET"),void 0===r&&(r="json"),void 0===i&&(i=E),g.offline?l(i,t,e):o(u(t),e,n,r)}function h(t,e,n){return void 0===e&&(e={}),void 0===n&&(n=E),g.offline?l(n,t,e):s(u(t),e)}function d(t,e,n,r){return void 0===e&&(e={}),void 0===n&&(n="json"),void 0===r&&(r=function(){return E}),g.offline?l(r,t,e):a(u(t),e,n)}Object.defineProperty(e,"__esModule",{value:!0});var y=n(0),g=n(2),v=n(5);n.d(e,"GLOBAL_EVENT_AJAX_PRE_SEND",function(){return _}),n.d(e,"GLOBAL_EVENT_AJAX_POST_SEND",function(){return m}),n.d(e,"MAX_URL_LENGTH",function(){return b}),e.send=o,e.getJSON=s,e.getData=a,e.api2absURL=u,e.encodeParams=c,e.setDefaultOfflineGenerator=p,e.sendAPI=f,e.getAPIJSON=h,e.getAPIData=d;var _="ajaxPreSend",m="ajaxPostSend",b=4096,x=function(t){function e(n,r){var i=t.call(this,r||n.statusText)||this;return i.response=n,Object.setPrototypeOf(i,e.prototype),i}return y.a(e,t),e}(Error),E=function(){return Promise.reject("offline")}},function(t,e,n){"use strict";function r(t,e){return{name:t,params:e}}function i(t,e){return void 0===e&&(e=Number.NaN),"number"==typeof t?new a(t,e):new a(t.x,t.y)}Object.defineProperty(e,"__esModule",{value:!0});var o=n(0);n.d(e,"Intersection",function(){return s}),e.vec=i,n.d(e,"Vector2D",function(){return a}),n.d(e,"Path",function(){return p});var s=function(){function t(t){void 0===t&&(t="No Intersection"),this.status=t,this.points=[]}return Object.defineProperty(t.prototype,"intersects",{get:function(){return"Intersection"===this.status},enumerable:!0,configurable:!0}),t.prototype.appendPoint=function(t){this.status="Intersection",this.points.push(t)},t.prototype.appendPoints=function(t){t.length>0&&(this.status="Intersection"),(e=this.points).push.apply(e,t);var e},Object.defineProperty(t.prototype,"length",{get:function(){return this.points.length},enumerable:!0,configurable:!0}),t.prototype.forEach=function(t,e){this.points.forEach(t,e)},t.prototype.map=function(t,e){return this.points.map(t,e)},t.intersectShapes=function(e,n){var r,i=e.asIntersectionParams(),o=n.asIntersectionParams();if(null!=i&&null!=o)if(e instanceof p)r=t.intersectPathShape(e,n);else if(n instanceof p)r=t.intersectPathShape(n,e);else{var s=void 0,a=void 0;i.name<o.name?(s="intersect"+i.name+o.name,a=i.params.concat(o.params)):(s="intersect"+o.name+i.name,a=o.params.concat(i.params));var u=t;if("function"!=typeof u[s])throw new Error("Intersection not available: "+s);r=u[s].apply(null,a)}else r=new t;return r},t.intersectPathShape=function(t,e){return t.intersectShape(e)},t.intersectBezier2Bezier2=function(e,n,r,i,o,s){var c=new t,p=n.multiply(-2),l=e.add(p.add(r));p=e.multiply(-2);var f=n.multiply(2),h=p.add(f),d=new a(e.x,e.y);p=o.multiply(-2);var y=i.add(p.add(s));p=i.multiply(-2),f=o.multiply(2);for(var g=p.add(f),v=new a(i.x,i.y),_=l.x*h.y-h.x*l.y,m=y.x*h.y-h.x*y.y,b=g.x*h.y-h.x*g.y,x=h.x*(d.y-v.y)+h.y*(-d.x+v.x),E=y.x*l.y-l.x*y.y,P=g.x*l.y-l.x*g.y,O=l.x*(d.y-v.y)+l.y*(-d.x+v.x),w=new u(-E*E,-2*E*P,_*m-P*P-2*E*O,_*b-2*P*O,_*x-O*O),A=w.getRoots(),M=0,D=A;M<D.length;M++){var I=D[M];if(0<=I&&I<=1){var T=new u(-l.x,-h.x,-d.x+v.x+I*g.x+I*I*y.x).getRoots(),S=new u(-l.y,-h.y,-d.y+v.y+I*g.y+I*I*y.y).getRoots();if(T.length>0&&S.length>0)t:for(var L=0,j=T;L<j.length;L++){var R=j[L];if(0<=R&&R<=1)for(var N=0,C=S;N<C.length;N++){var k=C[N];if(Math.abs(R-k)<1e-4){c.points.push(y.multiply(I*I).add(g.multiply(I).add(v)));break t}}}}}return c},t.intersectBezier2Bezier3=function(e,n,r,i,o,s,c){var p,l,f,h,d,y,g,v,_,m,b,x=new t;p=n.multiply(-2),d=e.add(p.add(r)),p=e.multiply(-2),l=n.multiply(2),y=p.add(l),g=new a(e.x,e.y),p=i.multiply(-1),l=o.multiply(3),f=s.multiply(-3),h=p.add(l.add(f.add(c))),v=new a(h.x,h.y),p=i.multiply(3),l=o.multiply(-6),f=s.multiply(3),h=p.add(l.add(f)),_=new a(h.x,h.y),p=i.multiply(-3),l=o.multiply(3),f=p.add(l),m=new a(f.x,f.y),b=new a(i.x,i.y);for(var E=g.x*g.x,P=g.y*g.y,O=y.x*y.x,w=y.y*y.y,A=d.x*d.x,M=d.y*d.y,D=b.x*b.x,I=b.y*b.y,T=m.x*m.x,S=m.y*m.y,L=_.x*_.x,j=_.y*_.y,R=v.x*v.x,N=v.y*v.y,C=new u(-2*d.x*d.y*v.x*v.y+A*N+M*R,-2*d.x*d.y*_.x*v.y-2*d.x*d.y*_.y*v.x+2*M*_.x*v.x+2*A*_.y*v.y,-2*d.x*m.x*d.y*v.y-2*d.x*d.y*m.y*v.x-2*d.x*d.y*_.x*_.y+2*m.x*M*v.x+M*L+A*(2*m.y*v.y+j),2*g.x*d.x*d.y*v.y+2*g.y*d.x*d.y*v.x+y.x*y.y*d.x*v.y+y.x*y.y*d.y*v.x-2*b.x*d.x*d.y*v.y-2*d.x*b.y*d.y*v.x-2*d.x*m.x*d.y*_.y-2*d.x*d.y*m.y*_.x-2*g.x*M*v.x-2*g.y*A*v.y+2*b.x*M*v.x+2*m.x*M*_.x-w*d.x*v.x-O*d.y*v.y+A*(2*b.y*v.y+2*m.y*_.y),2*g.x*d.x*d.y*_.y+2*g.y*d.x*d.y*_.x+y.x*y.y*d.x*_.y+y.x*y.y*d.y*_.x-2*b.x*d.x*d.y*_.y-2*d.x*b.y*d.y*_.x-2*d.x*m.x*d.y*m.y-2*g.x*M*_.x-2*g.y*A*_.y+2*b.x*M*_.x-w*d.x*_.x-O*d.y*_.y+T*M+A*(2*b.y*_.y+S),2*g.x*d.x*d.y*m.y+2*g.y*d.x*m.x*d.y+y.x*y.y*d.x*m.y+y.x*y.y*m.x*d.y-2*b.x*d.x*d.y*m.y-2*d.x*b.y*m.x*d.y-2*g.x*m.x*M-2*g.y*A*m.y+2*b.x*m.x*M-w*d.x*m.x-O*d.y*m.y+2*A*b.y*m.y,-2*g.x*g.y*d.x*d.y-g.x*y.x*y.y*d.y-g.y*y.x*y.y*d.x+2*g.x*d.x*b.y*d.y+2*g.y*b.x*d.x*d.y+y.x*b.x*y.y*d.y+y.x*y.y*d.x*b.y-2*b.x*d.x*b.y*d.y-2*g.x*b.x*M+g.x*w*d.x+g.y*O*d.y-2*g.y*A*b.y-b.x*w*d.x-O*b.y*d.y+E*M+P*A+D*M+A*I),k=C.getRootsInInterval(0,1),U=0,V=k;U<V.length;U++){var B=V[U],q=new u(d.x,y.x,g.x-b.x-B*m.x-B*B*_.x-B*B*B*v.x).getRoots(),z=new u(d.y,y.y,g.y-b.y-B*m.y-B*B*_.y-B*B*B*v.y).getRoots();if(q.length>0&&z.length>0){t:for(var W=0,K=q;W<K.length;W++){var F=K[W];if(0<=F&&F<=1)for(var H=0,G=z;H<G.length;H++){var J=G[H];if(Math.abs(F-J)<1e-4){x.points.push(v.multiply(B*B*B).add(_.multiply(B*B).add(m.multiply(B).add(b))));break t}}}}}return x},t.intersectBezier2Circle=function(e,n,r,i,o){return t.intersectBezier2Ellipse(e,n,r,i,o,o)},t.intersectBezier2Ellipse=function(e,n,r,i,o,s){var c,p,l,f,h,d=new t;c=n.multiply(-2),l=e.add(c.add(r)),c=e.multiply(-2),p=n.multiply(2),f=c.add(p),h=new a(e.x,e.y);for(var y=o*o,g=s*s,v=new u(g*l.x*l.x+y*l.y*l.y,2*(g*l.x*f.x+y*l.y*f.y),g*(2*l.x*h.x+f.x*f.x)+y*(2*l.y*h.y+f.y*f.y)-2*(g*i.x*l.x+y*i.y*l.y),2*(g*f.x*(h.x-i.x)+y*f.y*(h.y-i.y)),g*(h.x*h.x+i.x*i.x)+y*(h.y*h.y+i.y*i.y)-2*(g*i.x*h.x+y*i.y*h.y)-y*g).getRoots(),_=0,m=v;_<m.length;_++){var b=m[_];0<=b&&b<=1&&d.points.push(l.multiply(b*b).add(f.multiply(b).add(h)))}return d},t.intersectBezier2Line=function(e,n,r,i,o){var s,c,p,l,f,h,d,y=i.min(o),g=i.max(o),v=new t;s=n.multiply(-2),p=e.add(s.add(r)),s=e.multiply(-2),c=n.multiply(2),l=s.add(c),f=new a(e.x,e.y),d=new a(i.y-o.y,o.x-i.x),h=i.x*o.y-o.x*i.y;for(var _=new u(d.dot(p),d.dot(l),d.dot(f)+h).getRoots(),m=0,b=_;m<b.length;m++){var x=b[m];if(0<=x&&x<=1){var E=e.lerp(n,x),P=n.lerp(r,x),O=E.lerp(P,x);i.x===o.x?y.y<=O.y&&O.y<=g.y&&v.appendPoint(O):i.y===o.y?y.x<=O.x&&O.x<=g.x&&v.appendPoint(O):O.gte(y)&&O.lte(g)&&v.appendPoint(O)}}return v},t.prototype.intersectBezier2Polygon=function(e,n,r,i){for(var o=new t,s=i.length,a=0;a<s;a++){var u=i[a],c=i[(a+1)%s],p=t.intersectBezier2Line(e,n,r,u,c);o.appendPoints(p.points)}return o},t.intersectBezier2Rectangle=function(e,n,r,i,o){var s=i.min(o),u=i.max(o),c=new a(u.x,s.y),p=new a(s.x,u.y),l=t.intersectBezier2Line(e,n,r,s,c),f=t.intersectBezier2Line(e,n,r,c,u),h=t.intersectBezier2Line(e,n,r,u,p),d=t.intersectBezier2Line(e,n,r,p,s),y=new t;return y.appendPoints(l.points),y.appendPoints(f.points),y.appendPoints(h.points),y.appendPoints(d.points),y},t.intersectBezier3Bezier3=function(e,n,r,i,o,s,c,p){var l,f,h,d,y,g,v,_,m,b,x,E,P=new t;l=e.multiply(-1),f=n.multiply(3),h=r.multiply(-3),d=l.add(f.add(h.add(i))),y=new a(d.x,d.y),l=e.multiply(3),f=n.multiply(-6),h=r.multiply(3),d=l.add(f.add(h)),g=new a(d.x,d.y),l=e.multiply(-3),f=n.multiply(3),h=l.add(f),v=new a(h.x,h.y),_=new a(e.x,e.y),l=o.multiply(-1),f=s.multiply(3),h=c.multiply(-3),d=l.add(f.add(h.add(p))),m=new a(d.x,d.y),l=o.multiply(3),f=s.multiply(-6),h=c.multiply(3),d=l.add(f.add(h)),b=new a(d.x,d.y),l=o.multiply(-3),f=s.multiply(3),h=l.add(f),x=new a(h.x,h.y),E=new a(o.x,o.y);for(var O=_.x*_.x,w=_.x*_.x*_.x,A=_.y*_.y,M=_.y*_.y*_.y,D=v.x*v.x,I=v.x*v.x*v.x,T=v.y*v.y,S=v.y*v.y*v.y,L=g.x*g.x,j=g.x*g.x*g.x,R=g.y*g.y,N=g.y*g.y*g.y,C=y.x*y.x,k=y.x*y.x*y.x,U=y.y*y.y,V=y.y*y.y*y.y,B=E.x*E.x,q=E.x*E.x*E.x,z=E.y*E.y,W=E.y*E.y*E.y,K=x.x*x.x,F=x.x*x.x*x.x,H=x.y*x.y,G=b.x*b.x,J=b.x*b.x*b.x,Y=b.y*b.y,X=m.x*m.x,$=m.x*m.x*m.x,Q=m.y*m.y,Z=m.y*m.y*m.y,tt=new u(-k*Z+V*$-3*y.x*U*X*m.y+3*C*y.y*m.x*Q,-6*y.x*b.x*U*m.x*m.y+6*C*y.y*b.y*m.x*m.y+3*b.x*V*X-3*k*b.y*Q-3*y.x*U*b.y*X+3*C*b.x*y.y*Q,-6*x.x*y.x*U*m.x*m.y-6*y.x*b.x*U*b.y*m.x+6*C*b.x*y.y*b.y*m.y+3*x.x*V*X+3*G*V*m.x+3*x.x*C*y.y*Q-3*y.x*x.y*U*X-3*y.x*G*U*m.y+C*y.y*m.x*(6*x.y*m.y+3*Y)+k*(-x.y*Q-2*Y*m.y-m.y*(2*x.y*m.y+Y)),v.x*g.y*y.x*y.y*m.x*m.y-v.y*g.x*y.x*y.y*m.x*m.y+6*x.x*b.x*V*m.x+3*v.x*g.x*y.x*y.y*Q+6*_.x*y.x*U*m.x*m.y-3*v.x*g.x*U*m.x*m.y-3*v.y*g.y*y.x*y.y*X-6*_.y*C*y.y*m.x*m.y-6*E.x*y.x*U*m.x*m.y+3*v.y*g.y*C*m.x*m.y-2*g.x*R*y.x*m.x*m.y-6*x.x*y.x*b.x*U*m.y-6*x.x*y.x*U*b.y*m.x-6*y.x*x.y*b.x*U*m.x+6*x.x*C*y.y*b.y*m.y+2*L*g.y*y.y*m.x*m.y+J*V-3*_.x*V*X+3*_.y*k*Q+3*E.x*V*X+N*y.x*X-j*y.y*Q-3*_.x*C*y.y*Q+3*_.y*y.x*U*X-2*v.x*g.y*C*Q+v.x*g.y*U*X-v.y*g.x*C*Q+2*v.y*g.x*U*X+3*E.x*C*y.y*Q-g.x*R*y.y*X-3*E.y*y.x*U*X+L*g.y*y.x*Q-3*y.x*G*U*b.y+C*y.y*m.x*(6*E.y*m.y+6*x.y*b.y)+C*b.x*y.y*(6*x.y*m.y+3*Y)+k*(-2*x.y*b.y*m.y-E.y*Q-b.y*(2*x.y*m.y+Y)-m.y*(2*E.y*m.y+2*x.y*b.y)),6*v.x*g.x*y.x*y.y*b.y*m.y+v.x*g.y*y.x*b.x*y.y*m.y+v.x*g.y*y.x*y.y*b.y*m.x-v.y*g.x*y.x*b.x*y.y*m.y-v.y*g.x*y.x*y.y*b.y*m.x-6*v.y*g.y*y.x*b.x*y.y*m.x-6*_.x*b.x*V*m.x+6*E.x*b.x*V*m.x+6*_.y*k*b.y*m.y+2*N*y.x*b.x*m.x-2*j*y.y*b.y*m.y+6*_.x*y.x*b.x*U*m.y+6*_.x*y.x*U*b.y*m.x+6*_.y*y.x*b.x*U*m.x-3*v.x*g.x*b.x*U*m.y-3*v.x*g.x*U*b.y*m.x+2*v.x*g.y*b.x*U*m.x+4*v.y*g.x*b.x*U*m.x-6*_.x*C*y.y*b.y*m.y-6*_.y*C*b.x*y.y*m.y-6*_.y*C*y.y*b.y*m.x-4*v.x*g.y*C*b.y*m.y-6*E.x*y.x*b.x*U*m.y-6*E.x*y.x*U*b.y*m.x-2*v.y*g.x*C*b.y*m.y+3*v.y*g.y*C*b.x*m.y+3*v.y*g.y*C*b.y*m.x-2*g.x*R*y.x*b.x*m.y-2*g.x*R*y.x*b.y*m.x-2*g.x*R*b.x*y.y*m.x-6*E.y*y.x*b.x*U*m.x-6*x.x*y.x*x.y*U*m.x-6*x.x*y.x*b.x*U*b.y+6*E.x*C*y.y*b.y*m.y+2*L*g.y*y.x*b.y*m.y+2*L*g.y*b.x*y.y*m.y+2*L*g.y*y.y*b.y*m.x+3*x.x*G*V+3*K*V*m.x-3*y.x*x.y*G*U-3*K*y.x*U*m.y+C*b.x*y.y*(6*E.y*m.y+6*x.y*b.y)+C*y.y*m.x*(6*E.y*b.y+3*H)+x.x*C*y.y*(6*x.y*m.y+3*Y)+k*(-2*E.y*b.y*m.y-m.y*(2*E.y*b.y+H)-x.y*(2*x.y*m.y+Y)-b.y*(2*E.y*m.y+2*x.y*b.y)),v.x*x.x*g.y*y.x*y.y*m.y+v.x*g.y*y.x*x.y*y.y*m.x+v.x*g.y*y.x*b.x*y.y*b.y-v.y*g.x*x.x*y.x*y.y*m.y-v.y*g.x*y.x*x.y*y.y*m.x-v.y*g.x*y.x*b.x*y.y*b.y-6*v.y*x.x*g.y*y.x*y.y*m.x-6*_.x*x.x*V*m.x+6*E.x*x.x*V*m.x+2*x.x*N*y.x*m.x+6*_.x*x.x*y.x*U*m.y+6*_.x*y.x*x.y*U*m.x+6*_.x*y.x*b.x*U*b.y+6*_.y*x.x*y.x*U*m.x-3*v.x*g.x*x.x*U*m.y-3*v.x*g.x*x.y*U*m.x-3*v.x*g.x*b.x*U*b.y+2*v.x*x.x*g.y*U*m.x+4*v.y*g.x*x.x*U*m.x-6*_.y*x.x*C*y.y*m.y-6*_.y*C*x.y*y.y*m.x-6*_.y*C*b.x*y.y*b.y-6*E.x*x.x*y.x*U*m.y-6*E.x*y.x*x.y*U*m.x-6*E.x*y.x*b.x*U*b.y+3*v.y*x.x*g.y*C*m.y-3*v.y*g.y*y.x*G*y.y+3*v.y*g.y*C*x.y*m.x+3*v.y*g.y*C*b.x*b.y-2*g.x*x.x*R*y.x*m.y-2*g.x*x.x*R*y.y*m.x-2*g.x*R*y.x*x.y*m.x-2*g.x*R*y.x*b.x*b.y-6*E.y*x.x*y.x*U*m.x-6*x.x*y.x*x.y*b.x*U+6*E.y*C*x.y*y.y*m.x+2*L*x.x*g.y*y.y*m.y+2*L*g.y*x.y*y.y*m.x+2*L*g.y*b.x*y.y*b.y-3*_.x*G*V+3*E.x*G*V+3*K*b.x*V+N*y.x*G+3*_.y*y.x*G*U+v.x*g.y*G*U+2*v.y*g.x*G*U-g.x*R*G*y.y-3*E.y*y.x*G*U-3*K*y.x*U*b.y+L*g.y*y.x*(2*x.y*m.y+Y)+v.x*g.x*y.x*y.y*(6*x.y*m.y+3*Y)+x.x*C*y.y*(6*E.y*m.y+6*x.y*b.y)+j*y.y*(-2*x.y*m.y-Y)+_.y*k*(6*x.y*m.y+3*Y)+v.y*g.x*C*(-2*x.y*m.y-Y)+v.x*g.y*C*(-4*x.y*m.y-2*Y)+_.x*C*y.y*(-6*x.y*m.y-3*Y)+C*b.x*y.y*(6*E.y*b.y+3*H)+E.x*C*y.y*(6*x.y*m.y+3*Y)+k*(-2*E.y*x.y*m.y-b.y*(2*E.y*b.y+H)-E.y*(2*x.y*m.y+Y)-x.y*(2*E.y*m.y+2*x.y*b.y)),-_.x*v.x*g.y*y.x*y.y*m.y+_.x*v.y*g.x*y.x*y.y*m.y+6*_.x*v.y*g.y*y.x*y.y*m.x-6*_.y*v.x*g.x*y.x*y.y*m.y-_.y*v.x*g.y*y.x*y.y*m.x+_.y*v.y*g.x*y.x*y.y*m.x+v.x*v.y*g.x*g.y*y.x*m.y-v.x*v.y*g.x*g.y*y.y*m.x+v.x*E.x*g.y*y.x*y.y*m.y+v.x*E.y*g.y*y.x*y.y*m.x+v.x*x.x*g.y*y.x*y.y*b.y+v.x*g.y*y.x*x.y*b.x*y.y-E.x*v.y*g.x*y.x*y.y*m.y-6*E.x*v.y*g.y*y.x*y.y*m.x-v.y*g.x*E.y*y.x*y.y*m.x-v.y*g.x*x.x*y.x*y.y*b.y-v.y*g.x*y.x*x.y*b.x*y.y-6*v.y*x.x*g.y*y.x*b.x*y.y-6*_.x*E.x*V*m.x-6*_.x*x.x*b.x*V-2*_.x*N*y.x*m.x+6*E.x*x.x*b.x*V+2*E.x*N*y.x*m.x+2*x.x*N*y.x*b.x+2*_.y*j*y.y*m.y-6*_.x*_.y*y.x*U*m.x+3*_.x*v.x*g.x*U*m.y-2*_.x*v.x*g.y*U*m.x-4*_.x*v.y*g.x*U*m.x+3*_.y*v.x*g.x*U*m.x+6*_.x*_.y*C*y.y*m.y+6*_.x*E.x*y.x*U*m.y-3*_.x*v.y*g.y*C*m.y+2*_.x*g.x*R*y.x*m.y+2*_.x*g.x*R*y.y*m.x+6*_.x*E.y*y.x*U*m.x+6*_.x*x.x*y.x*U*b.y+6*_.x*y.x*x.y*b.x*U+4*_.y*v.x*g.y*C*m.y+6*_.y*E.x*y.x*U*m.x+2*_.y*v.y*g.x*C*m.y-3*_.y*v.y*g.y*C*m.x+2*_.y*g.x*R*y.x*m.x+6*_.y*x.x*y.x*b.x*U-3*v.x*E.x*g.x*U*m.y+2*v.x*E.x*g.y*U*m.x+v.x*v.y*R*y.x*m.x-3*v.x*g.x*E.y*U*m.x-3*v.x*g.x*x.x*U*b.y-3*v.x*g.x*x.y*b.x*U+2*v.x*x.x*g.y*b.x*U+4*E.x*v.y*g.x*U*m.x+4*v.y*g.x*x.x*b.x*U-2*_.x*L*g.y*y.y*m.y-6*_.y*E.x*C*y.y*m.y-6*_.y*E.y*C*y.y*m.x-6*_.y*x.x*C*y.y*b.y-2*_.y*L*g.y*y.x*m.y-2*_.y*L*g.y*y.y*m.x-6*_.y*C*x.y*b.x*y.y-v.x*v.y*L*y.y*m.y-2*v.x*T*y.x*y.y*m.x+3*E.x*v.y*g.y*C*m.y-2*E.x*g.x*R*y.x*m.y-2*E.x*g.x*R*y.y*m.x-6*E.x*E.y*y.x*U*m.x-6*E.x*x.x*y.x*U*b.y-6*E.x*y.x*x.y*b.x*U+3*v.y*E.y*g.y*C*m.x+3*v.y*x.x*g.y*C*b.y+3*v.y*g.y*C*x.y*b.x-2*g.x*E.y*R*y.x*m.x-2*g.x*x.x*R*y.x*b.y-2*g.x*x.x*R*b.x*y.y-2*g.x*R*y.x*x.y*b.x-6*E.y*x.x*y.x*b.x*U-T*g.x*g.y*y.x*m.x+2*E.x*L*g.y*y.y*m.y+6*E.y*C*x.y*b.x*y.y+2*D*v.y*y.x*y.y*m.y+D*g.x*g.y*y.y*m.y+2*L*E.y*g.y*y.y*m.x+2*L*x.x*g.y*y.y*b.y+2*L*g.y*x.y*b.x*y.y+F*V+3*O*V*m.x-3*A*k*m.y+3*B*V*m.x+S*C*m.x-I*U*m.y-v.x*T*C*m.y+D*v.y*U*m.x-3*O*y.x*U*m.y+3*A*C*y.y*m.x-D*R*y.x*m.y+T*L*y.y*m.x-3*K*y.x*x.y*U-3*B*y.x*U*m.y+3*z*C*y.y*m.x+v.x*g.x*y.x*y.y*(6*E.y*m.y+6*x.y*b.y)+j*y.y*(-2*E.y*m.y-2*x.y*b.y)+_.y*k*(6*E.y*m.y+6*x.y*b.y)+v.y*g.x*C*(-2*E.y*m.y-2*x.y*b.y)+L*g.y*y.x*(2*E.y*m.y+2*x.y*b.y)+v.x*g.y*C*(-4*E.y*m.y-4*x.y*b.y)+_.x*C*y.y*(-6*E.y*m.y-6*x.y*b.y)+E.x*C*y.y*(6*E.y*m.y+6*x.y*b.y)+x.x*C*y.y*(6*E.y*b.y+3*H)+k*(-2*E.y*x.y*b.y-z*m.y-x.y*(2*E.y*b.y+H)-E.y*(2*E.y*m.y+2*x.y*b.y)),-_.x*v.x*g.y*y.x*y.y*b.y+_.x*v.y*g.x*y.x*y.y*b.y+6*_.x*v.y*g.y*y.x*b.x*y.y-6*_.y*v.x*g.x*y.x*y.y*b.y-_.y*v.x*g.y*y.x*b.x*y.y+_.y*v.y*g.x*y.x*b.x*y.y+v.x*v.y*g.x*g.y*y.x*b.y-v.x*v.y*g.x*g.y*b.x*y.y+v.x*E.x*g.y*y.x*y.y*b.y+v.x*E.y*g.y*y.x*b.x*y.y+v.x*x.x*g.y*y.x*x.y*y.y-E.x*v.y*g.x*y.x*y.y*b.y-6*E.x*v.y*g.y*y.x*b.x*y.y-v.y*g.x*E.y*y.x*b.x*y.y-v.y*g.x*x.x*y.x*x.y*y.y-6*_.x*E.x*b.x*V-2*_.x*N*y.x*b.x+2*E.x*N*y.x*b.x+2*_.y*j*y.y*b.y-6*_.x*_.y*y.x*b.x*U+3*_.x*v.x*g.x*U*b.y-2*_.x*v.x*g.y*b.x*U-4*_.x*v.y*g.x*b.x*U+3*_.y*v.x*g.x*b.x*U+6*_.x*_.y*C*y.y*b.y+6*_.x*E.x*y.x*U*b.y-3*_.x*v.y*g.y*C*b.y+2*_.x*g.x*R*y.x*b.y+2*_.x*g.x*R*b.x*y.y+6*_.x*E.y*y.x*b.x*U+6*_.x*x.x*y.x*x.y*U+4*_.y*v.x*g.y*C*b.y+6*_.y*E.x*y.x*b.x*U+2*_.y*v.y*g.x*C*b.y-3*_.y*v.y*g.y*C*b.x+2*_.y*g.x*R*y.x*b.x-3*v.x*E.x*g.x*U*b.y+2*v.x*E.x*g.y*b.x*U+v.x*v.y*R*y.x*b.x-3*v.x*g.x*E.y*b.x*U-3*v.x*g.x*x.x*x.y*U+4*E.x*v.y*g.x*b.x*U-2*_.x*L*g.y*y.y*b.y-6*_.y*E.x*C*y.y*b.y-6*_.y*E.y*C*b.x*y.y-6*_.y*x.x*C*x.y*y.y-2*_.y*L*g.y*y.x*b.y-2*_.y*L*g.y*b.x*y.y-v.x*v.y*L*y.y*b.y-2*v.x*T*y.x*b.x*y.y+3*E.x*v.y*g.y*C*b.y-2*E.x*g.x*R*y.x*b.y-2*E.x*g.x*R*b.x*y.y-6*E.x*E.y*y.x*b.x*U-6*E.x*x.x*y.x*x.y*U+3*v.y*E.y*g.y*C*b.x+3*v.y*x.x*g.y*C*x.y-2*g.x*E.y*R*y.x*b.x-2*g.x*x.x*R*y.x*x.y-T*g.x*g.y*y.x*b.x+2*E.x*L*g.y*y.y*b.y-3*v.y*K*g.y*y.x*y.y+6*E.y*x.x*C*x.y*y.y+2*D*v.y*y.x*y.y*b.y+D*g.x*g.y*y.y*b.y+2*L*E.y*g.y*b.x*y.y+2*L*x.x*g.y*x.y*y.y-3*_.x*K*V+3*E.x*K*V+3*O*b.x*V-3*A*k*b.y+3*B*b.x*V+K*N*y.x+S*C*b.x-I*U*b.y+3*_.y*K*y.x*U-v.x*T*C*b.y+v.x*K*g.y*U+2*v.y*g.x*K*U+D*v.y*b.x*U-g.x*K*R*y.y-3*E.y*K*y.x*U-3*O*y.x*U*b.y+3*A*C*b.x*y.y-D*R*y.x*b.y+T*L*b.x*y.y-3*B*y.x*U*b.y+3*z*C*b.x*y.y+L*g.y*y.x*(2*E.y*b.y+H)+v.x*g.x*y.x*y.y*(6*E.y*b.y+3*H)+j*y.y*(-2*E.y*b.y-H)+_.y*k*(6*E.y*b.y+3*H)+v.y*g.x*C*(-2*E.y*b.y-H)+v.x*g.y*C*(-4*E.y*b.y-2*H)+_.x*C*y.y*(-6*E.y*b.y-3*H)+E.x*C*y.y*(6*E.y*b.y+3*H)+k*(-2*E.y*H-z*b.y-E.y*(2*E.y*b.y+H)),-_.x*v.x*g.y*y.x*x.y*y.y+_.x*v.y*g.x*y.x*x.y*y.y+6*_.x*v.y*x.x*g.y*y.x*y.y-6*_.y*v.x*g.x*y.x*x.y*y.y-_.y*v.x*x.x*g.y*y.x*y.y+_.y*v.y*g.x*x.x*y.x*y.y-v.x*v.y*g.x*x.x*g.y*y.y+v.x*v.y*g.x*g.y*y.x*x.y+v.x*E.x*g.y*y.x*x.y*y.y+6*v.x*g.x*E.y*y.x*x.y*y.y+v.x*E.y*x.x*g.y*y.x*y.y-E.x*v.y*g.x*y.x*x.y*y.y-6*E.x*v.y*x.x*g.y*y.x*y.y-v.y*g.x*E.y*x.x*y.x*y.y-6*_.x*E.x*x.x*V-2*_.x*x.x*N*y.x+6*_.y*E.y*k*x.y+2*E.x*x.x*N*y.x+2*_.y*j*x.y*y.y-2*j*E.y*x.y*y.y-6*_.x*_.y*x.x*y.x*U+3*_.x*v.x*g.x*x.y*U-2*_.x*v.x*x.x*g.y*U-4*_.x*v.y*g.x*x.x*U+3*_.y*v.x*g.x*x.x*U+6*_.x*_.y*C*x.y*y.y+6*_.x*E.x*y.x*x.y*U-3*_.x*v.y*g.y*C*x.y+2*_.x*g.x*x.x*R*y.y+2*_.x*g.x*R*y.x*x.y+6*_.x*E.y*x.x*y.x*U+4*_.y*v.x*g.y*C*x.y+6*_.y*E.x*x.x*y.x*U+2*_.y*v.y*g.x*C*x.y-3*_.y*v.y*x.x*g.y*C+2*_.y*g.x*x.x*R*y.x-3*v.x*E.x*g.x*x.y*U+2*v.x*E.x*x.x*g.y*U+v.x*v.y*x.x*R*y.x-3*v.x*g.x*E.y*x.x*U+4*E.x*v.y*g.x*x.x*U-6*_.x*E.y*C*x.y*y.y-2*_.x*L*g.y*x.y*y.y-6*_.y*E.x*C*x.y*y.y-6*_.y*E.y*x.x*C*y.y-2*_.y*L*x.x*g.y*y.y-2*_.y*L*g.y*y.x*x.y-v.x*v.y*L*x.y*y.y-4*v.x*E.y*g.y*C*x.y-2*v.x*T*x.x*y.x*y.y+3*E.x*v.y*g.y*C*x.y-2*E.x*g.x*x.x*R*y.y-2*E.x*g.x*R*y.x*x.y-6*E.x*E.y*x.x*y.x*U-2*v.y*g.x*E.y*C*x.y+3*v.y*E.y*x.x*g.y*C-2*g.x*E.y*x.x*R*y.x-T*g.x*x.x*g.y*y.x+6*E.x*E.y*C*x.y*y.y+2*E.x*L*g.y*x.y*y.y+2*D*v.y*y.x*x.y*y.y+D*g.x*g.y*x.y*y.y+2*L*E.y*x.x*g.y*y.y+2*L*E.y*g.y*y.x*x.y+3*O*x.x*V-3*A*k*x.y+3*B*x.x*V+S*x.x*C-I*x.y*U-3*z*k*x.y-v.x*T*C*x.y+D*v.y*x.x*U-3*O*y.x*x.y*U+3*A*x.x*C*y.y-D*R*y.x*x.y+T*L*x.x*y.y-3*B*y.x*x.y*U+3*z*x.x*C*y.y,_.x*_.y*v.x*g.y*y.x*y.y-_.x*_.y*v.y*g.x*y.x*y.y+_.x*v.x*v.y*g.x*g.y*y.y-_.y*v.x*v.y*g.x*g.y*y.x-_.x*v.x*E.y*g.y*y.x*y.y+6*_.x*E.x*v.y*g.y*y.x*y.y+_.x*v.y*g.x*E.y*y.x*y.y-_.y*v.x*E.x*g.y*y.x*y.y-6*_.y*v.x*g.x*E.y*y.x*y.y+_.y*E.x*v.y*g.x*y.x*y.y-v.x*E.x*v.y*g.x*g.y*y.y+v.x*v.y*g.x*E.y*g.y*y.x+v.x*E.x*E.y*g.y*y.x*y.y-E.x*v.y*g.x*E.y*y.x*y.y-2*_.x*E.x*N*y.x+2*_.y*j*E.y*y.y-3*_.x*_.y*v.x*g.x*U-6*_.x*_.y*E.x*y.x*U+3*_.x*_.y*v.y*g.y*C-2*_.x*_.y*g.x*R*y.x-2*_.x*v.x*E.x*g.y*U-_.x*v.x*v.y*R*y.x+3*_.x*v.x*g.x*E.y*U-4*_.x*E.x*v.y*g.x*U+3*_.y*v.x*E.x*g.x*U+6*_.x*_.y*E.y*C*y.y+2*_.x*_.y*L*g.y*y.y+2*_.x*v.x*T*y.x*y.y+2*_.x*E.x*g.x*R*y.y+6*_.x*E.x*E.y*y.x*U-3*_.x*v.y*E.y*g.y*C+2*_.x*g.x*E.y*R*y.x+_.x*T*g.x*g.y*y.x+_.y*v.x*v.y*L*y.y+4*_.y*v.x*E.y*g.y*C-3*_.y*E.x*v.y*g.y*C+2*_.y*E.x*g.x*R*y.x+2*_.y*v.y*g.x*E.y*C+v.x*E.x*v.y*R*y.x-3*v.x*E.x*g.x*E.y*U-2*_.x*L*E.y*g.y*y.y-6*_.y*E.x*E.y*C*y.y-2*_.y*E.x*L*g.y*y.y-2*_.y*D*v.y*y.x*y.y-_.y*D*g.x*g.y*y.y-2*_.y*L*E.y*g.y*y.x-2*v.x*E.x*T*y.x*y.y-v.x*v.y*L*E.y*y.y+3*E.x*v.y*E.y*g.y*C-2*E.x*g.x*E.y*R*y.x-E.x*T*g.x*g.y*y.x+3*A*v.x*g.x*y.x*y.y+3*v.x*g.x*z*y.x*y.y+2*E.x*L*E.y*g.y*y.y-3*O*v.y*g.y*y.x*y.y+2*D*v.y*E.y*y.x*y.y+D*g.x*E.y*g.y*y.y-3*B*v.y*g.y*y.x*y.y-w*V+M*k+q*V-W*k-3*_.x*B*V-_.x*S*C+3*O*E.x*V+_.y*I*U+3*_.y*z*k+E.x*S*C+O*N*y.x-3*A*E.y*k-A*j*y.y+B*N*y.x-I*E.y*U-j*z*y.y-_.x*D*v.y*U+_.y*v.x*T*C-3*_.x*A*C*y.y-_.x*T*L*y.y+_.y*D*R*y.x-v.x*T*E.y*C+3*O*_.y*y.x*U+O*v.x*g.y*U+2*O*v.y*g.x*U-2*A*v.x*g.y*C-A*v.y*g.x*C+D*E.x*v.y*U-3*_.x*z*C*y.y+3*_.y*B*y.x*U+v.x*B*g.y*U-2*v.x*z*g.y*C+E.x*T*L*y.y-v.y*g.x*z*C-O*g.x*R*y.y-3*O*E.y*y.x*U+3*A*E.x*C*y.y+A*L*g.y*y.x-D*E.y*R*y.x+2*B*v.y*g.x*U+3*E.x*z*C*y.y-B*g.x*R*y.y-3*B*E.y*y.x*U+L*z*g.y*y.x),et=tt.getRootsInInterval(0,1),nt=0,rt=et;nt<rt.length;nt++){var it=rt[nt],ot=new u(y.x,g.x,v.x,_.x-E.x-it*x.x-it*it*b.x-it*it*it*m.x).getRoots(),st=new u(y.y,g.y,v.y,_.y-E.y-it*x.y-it*it*b.y-it*it*it*m.y).getRoots();if(ot.length>0&&st.length>0){t:for(var at=0,ut=ot;at<ut.length;at++){var ct=ut[at];if(0<=ct&&ct<=1)for(var pt=0,lt=st;pt<lt.length;pt++){var ft=lt[pt];if(Math.abs(ct-ft)<1e-4){P.points.push(m.multiply(it*it*it).add(b.multiply(it*it).add(x.multiply(it).add(E))));break t}}}}}return P},t.intersectBezier3Circle=function(e,n,r,i,o,s){return t.intersectBezier3Ellipse(e,n,r,i,o,s,s)},t.intersectBezier3Ellipse=function(e,n,r,i,o,s,c){var p,l,f,h,d,y,g,v,_=new t;p=e.multiply(-1),l=n.multiply(3),f=r.multiply(-3),h=p.add(l.add(f.add(i))),d=new a(h.x,h.y),p=e.multiply(3),l=n.multiply(-6),f=r.multiply(3),h=p.add(l.add(f)),y=new a(h.x,h.y),p=e.multiply(-3),l=n.multiply(3),f=p.add(l),g=new a(f.x,f.y),v=new a(e.x,e.y);for(var m=s*s,b=c*c,x=new u(d.x*d.x*b+d.y*d.y*m,2*(d.x*y.x*b+d.y*y.y*m),2*(d.x*g.x*b+d.y*g.y*m)+y.x*y.x*b+y.y*y.y*m,2*d.x*b*(v.x-o.x)+2*d.y*m*(v.y-o.y)+2*(y.x*g.x*b+y.y*g.y*m),2*y.x*b*(v.x-o.x)+2*y.y*m*(v.y-o.y)+g.x*g.x*b+g.y*g.y*m,2*g.x*b*(v.x-o.x)+2*g.y*m*(v.y-o.y),v.x*v.x*b-2*v.y*o.y*m-2*v.x*o.x*b+v.y*v.y*m+o.x*o.x*b+o.y*o.y*m-m*b),E=x.getRootsInInterval(0,1),P=0,O=E;P<O.length;P++){var w=O[P];_.points.push(d.multiply(w*w*w).add(y.multiply(w*w).add(g.multiply(w).add(v))))}return _},t.intersectBezier3Line=function(e,n,r,i,o,s){var c,p,l,f,h,d,y,g,v,_,m=o.min(s),b=o.max(s),x=new t;c=e.multiply(-1),p=n.multiply(3),l=r.multiply(-3),f=c.add(p.add(l.add(i))),h=new a(f.x,f.y),c=e.multiply(3),p=n.multiply(-6),l=r.multiply(3),f=c.add(p.add(l)),d=new a(f.x,f.y),c=e.multiply(-3),p=n.multiply(3),l=c.add(p),y=new a(l.x,l.y),g=new a(e.x,e.y),_=new a(o.y-s.y,s.x-o.x),v=o.x*s.y-s.x*o.y;for(var E=new u(_.dot(h),_.dot(d),_.dot(y),_.dot(g)+v).getRoots(),P=0,O=E;P<O.length;P++){var w=O[P];if(0<=w&&w<=1){var A=e.lerp(n,w),M=n.lerp(r,w),D=r.lerp(i,w),I=A.lerp(M,w),T=M.lerp(D,w),S=I.lerp(T,w);o.x===s.x?m.y<=S.y&&S.y<=b.y&&x.appendPoint(S):o.y===s.y?m.x<=S.x&&S.x<=b.x&&x.appendPoint(S):S.gte(m)&&S.lte(b)&&x.appendPoint(S)}}return x},t.intersectBezier3Polygon=function(e,n,r,i,o){for(var s=new t,a=o.length,u=0;u<a;u++){var c=o[u],p=o[(u+1)%a],l=t.intersectBezier3Line(e,n,r,i,c,p);s.appendPoints(l.points)}return s},t.intersectBezier3Rectangle=function(e,n,r,i,o,s){var u=o.min(s),c=o.max(s),p=new a(c.x,u.y),l=new a(u.x,c.y),f=t.intersectBezier3Line(e,n,r,i,u,p),h=t.intersectBezier3Line(e,n,r,i,p,c),d=t.intersectBezier3Line(e,n,r,i,c,l),y=t.intersectBezier3Line(e,n,r,i,l,u),g=new t;return g.appendPoints(f.points),g.appendPoints(h.points),g.appendPoints(d.points),g.appendPoints(y.points),g},t.intersectCircleCircle=function(e,n,r,i){var o,s=n+i,u=Math.abs(n-i),c=e.distanceFrom(r);if(c>s)o=new t("Outside");else if(c<u)o=new t("Inside");else{o=new t("Intersection");var p=(n*n-i*i+c*c)/(2*c),l=Math.sqrt(n*n-p*p),f=e.lerp(r,p/c),h=l/c;o.points.push(new a(f.x-h*(r.y-e.y),f.y+h*(r.x-e.x))),o.points.push(new a(f.x+h*(r.y-e.y),f.y-h*(r.x-e.x)))}return o},t.intersectCircleEllipse=function(e,n,r,i,o){return t.intersectEllipseEllipse(e,n,n,r,i,o)},t.intersectCircleLine=function(e,n,r,i){var o,s=(i.x-r.x)*(i.x-r.x)+(i.y-r.y)*(i.y-r.y),a=2*((i.x-r.x)*(r.x-e.x)+(i.y-r.y)*(r.y-e.y)),u=e.x*e.x+e.y*e.y+r.x*r.x+r.y*r.y-2*(e.x*r.x+e.y*r.y)-n*n,c=a*a-4*s*u;if(c<0)o=new t("Outside");else if(0===c)o=new t("Tangent");else{var p=Math.sqrt(c),l=(-a+p)/(2*s),f=(-a-p)/(2*s);(l<0||l>1)&&(f<0||f>1)?o=new t(l<0&&f<0||l>1&&f>1?"Outside":"Inside"):(o=new t("Intersection"),0<=l&&l<=1&&o.points.push(r.lerp(i,l)),0<=f&&f<=1&&o.points.push(r.lerp(i,f)))}return o},t.intersectCirclePolygon=function(e,n,r){for(var i,o=new t,s=r.length,a=0;a<s;a++){var u=r[a],c=r[(a+1)%s];i=t.intersectCircleLine(e,n,u,c),o.appendPoints(i.points)}return o.points.length>0?o.status="Intersection":o.status=i.status,o},t.intersectCircleRectangle=function(e,n,r,i){var o=r.min(i),s=r.max(i),u=new a(s.x,o.y),c=new a(o.x,s.y),p=t.intersectCircleLine(e,n,o,u),l=t.intersectCircleLine(e,n,u,s),f=t.intersectCircleLine(e,n,s,c),h=t.intersectCircleLine(e,n,c,o),d=new t;return d.appendPoints(p.points),d.appendPoints(l.points),d.appendPoints(f.points),d.appendPoints(h.points),d.points.length>0?d.status="Intersection":d.status=p.status,d},t.intersectEllipseEllipse=function(e,n,r,i,o,s){for(var c=[r*r,0,n*n,-2*r*r*e.x,-2*n*n*e.y,r*r*e.x*e.x+n*n*e.y*e.y-n*n*r*r],p=[s*s,0,o*o,-2*s*s*i.x,-2*o*o*i.y,s*s*i.x*i.x+o*o*i.y*i.y-o*o*s*s],l=t.bezout(c,p),f=l.getRoots(),h=.001*(c[0]*c[0]+2*c[1]*c[1]+c[2]*c[2]),d=.001*(p[0]*p[0]+2*p[1]*p[1]+p[2]*p[2]),y=new t,g=0,v=f;g<v.length;g++)for(var _=v[g],m=new u(c[0],c[3]+_*c[1],c[5]+_*(c[4]+_*c[2])),b=m.getRoots(),x=0,E=b;x<E.length;x++){var P=E[x],O=(c[0]*P+c[1]*_+c[3])*P+(c[2]*_+c[4])*_+c[5];Math.abs(O)<h&&(O=(p[0]*P+p[1]*_+p[3])*P+(p[2]*_+p[4])*_+p[5],Math.abs(O)<d&&y.appendPoint(new a(P,_)))}return y},t.intersectEllipseLine=function(e,n,r,i,o){var s,u=new a(i.x,i.y),c=a.fromPoints(i,o),p=new a(e.x,e.y),l=u.subtract(p),f=new a(c.x/(n*n),c.y/(r*r)),h=new a(l.x/(n*n),l.y/(r*r)),d=c.dot(f),y=c.dot(h),g=l.dot(h)-1,v=y*y-d*g;if(v<0)s=new t("Outside");else if(v>0){var _=Math.sqrt(v),m=(-y-_)/d,b=(-y+_)/d;(m<0||1<m)&&(b<0||1<b)?s=new t(m<0&&b<0||m>1&&b>1?"Outside":"Inside"):(s=new t("Intersection"),0<=m&&m<=1&&s.appendPoint(i.lerp(o,m)),0<=b&&b<=1&&s.appendPoint(i.lerp(o,b)))}else{var x=-y/d;0<=x&&x<=1?(s=new t("Intersection"),s.appendPoint(i.lerp(o,x))):s=new t("Outside")}return s},t.intersectEllipsePolygon=function(e,n,r,i){for(var o=new t,s=i.length,a=0;a<s;a++){var u=i[a],c=i[(a+1)%s],p=t.intersectEllipseLine(e,n,r,u,c);o.appendPoints(p.points)}return o},t.intersectEllipseRectangle=function(e,n,r,i,o){var s=i.min(o),u=i.max(o),c=new a(u.x,s.y),p=new a(s.x,u.y),l=t.intersectEllipseLine(e,n,r,s,c),f=t.intersectEllipseLine(e,n,r,c,u),h=t.intersectEllipseLine(e,n,r,u,p),d=t.intersectEllipseLine(e,n,r,p,s),y=new t;return y.appendPoints(l.points),y.appendPoints(f.points),y.appendPoints(h.points),y.appendPoints(d.points),y},t.intersectLineLine=function(e,n,r,i){var o,s=(i.x-r.x)*(e.y-r.y)-(i.y-r.y)*(e.x-r.x),u=(n.x-e.x)*(e.y-r.y)-(n.y-e.y)*(e.x-r.x),c=(i.y-r.y)*(n.x-e.x)-(i.x-r.x)*(n.y-e.y);if(0!==c){var p=s/c,l=u/c;0<=p&&p<=1&&0<=l&&l<=1?(o=new t("Intersection"),o.points.push(new a(e.x+p*(n.x-e.x),e.y+p*(n.y-e.y)))):o=new t}else o=new t(0===s||0===u?"Coincident":"Parallel");return o},t.intersectLinePolygon=function(e,n,r){for(var i=new t,o=r.length,s=0;s<o;s++){var a=r[s],u=r[(s+1)%o],c=t.intersectLineLine(e,n,a,u);i.appendPoints(c.points)}return i},t.intersectLineRectangle=function(e,n,r,i){var o=r.min(i),s=r.max(i),u=new a(s.x,o.y),c=new a(o.x,s.y),p=t.intersectLineLine(o,u,e,n),l=t.intersectLineLine(u,s,e,n),f=t.intersectLineLine(s,c,e,n),h=t.intersectLineLine(c,o,e,n),d=new t;return d.appendPoints(p.points),d.appendPoints(l.points),d.appendPoints(f.points),d.appendPoints(h.points),d},t.intersectPolygonPolygon=function(e,n){for(var r=new t,i=e.length,o=0;o<i;o++){var s=e[o],a=e[(o+1)%i],u=t.intersectLinePolygon(s,a,n);r.appendPoints(u.points)}return r},t.intersectPolygonRectangle=function(e,n,r){var i=n.min(r),o=n.max(r),s=new a(o.x,i.y),u=new a(i.x,o.y),c=t.intersectLinePolygon(i,s,e),p=t.intersectLinePolygon(s,o,e),l=t.intersectLinePolygon(o,u,e),f=t.intersectLinePolygon(u,i,e),h=new t;return h.appendPoints(c.points),h.appendPoints(p.points),h.appendPoints(l.points),h.appendPoints(f.points),h},t.intersectRayRay=function(e,n,r,i){var o,s=(i.x-r.x)*(e.y-r.y)-(i.y-r.y)*(e.x-r.x),u=(n.x-e.x)*(e.y-r.y)-(n.y-e.y)*(e.x-r.x),c=(i.y-r.y)*(n.x-e.x)-(i.x-r.x)*(n.y-e.y);if(0!==c){var p=s/c;o=new t("Intersection"),o.points.push(new a(e.x+p*(n.x-e.x),e.y+p*(n.y-e.y)))}else o=new t(0===s||0===u?"Coincident":"Parallel");return o},t.intersectRectangleRectangle=function(e,n,r,i){var o=e.min(n),s=e.max(n),u=new a(s.x,o.y),c=new a(o.x,s.y),p=t.intersectLineRectangle(o,u,r,i),l=t.intersectLineRectangle(u,s,r,i),f=t.intersectLineRectangle(s,c,r,i),h=t.intersectLineRectangle(c,o,r,i),d=new t;return d.appendPoints(p.points),d.appendPoints(l.points),d.appendPoints(f.points),d.appendPoints(h.points),d},t.bezout=function(t,e){var n=t[0]*e[1]-e[0]*t[1],r=t[0]*e[2]-e[0]*t[2],i=t[0]*e[3]-e[0]*t[3],o=t[0]*e[4]-e[0]*t[4],s=t[0]*e[5]-e[0]*t[5],a=t[1]*e[2]-e[1]*t[2],c=t[1]*e[4]-e[1]*t[4],p=t[1]*e[5]-e[1]*t[5],l=t[2]*e[3]-e[2]*t[3],f=t[3]*e[4]-e[3]*t[4],h=t[3]*e[5]-e[3]*t[5],d=p+f,y=c-l;return new u(n*a-r*r,n*y+i*a-2*r*o,n*d+i*y-o*o-2*r*s,n*h+i*d-2*o*s,i*h-s*s)},t}(),a=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e}return t.prototype.add=function(e){return new t(this.x+e.x,this.y+e.y)},t.prototype.addEquals=function(t){return this.x+=t.x,this.y+=t.y,this},t.prototype.scalarAdd=function(e){return new t(this.x+e,this.y+e)},t.prototype.scalarAddEquals=function(t){return this.x+=t,this.y+=t,this},t.prototype.subtract=function(e){return new t(this.x-e.x,this.y-e.y)},t.prototype.subtractEquals=function(t){return this.x-=t.x,this.y-=t.y,this},t.prototype.scalarSubtract=function(e){return new t(this.x-e,this.y-e)},t.prototype.scalarSubtractEquals=function(t){return this.x-=t,this.y-=t,this},t.prototype.multiply=function(e){return new t(this.x*e,this.y*e)},t.prototype.multiplyEquals=function(t){return this.x*=t,this.y*=t,this},t.prototype.divide=function(e){return new t(this.x/e,this.y/e)},t.prototype.divideEquals=function(t){return this.x/=t,this.y/=t,this},t.prototype.eq=function(t){return this.x===t.x&&this.y===t.y},t.prototype.lt=function(t){return this.x<t.x&&this.y<t.y},t.prototype.lte=function(t){return this.x<=t.x&&this.y<=t.y},t.prototype.gt=function(t){return this.x>t.x&&this.y>t.y},t.prototype.gte=function(t){return this.x>=t.x&&this.y>=t.y},t.prototype.lerp=function(e,n){return new t(this.x+(e.x-this.x)*n,this.y+(e.y-this.y)*n)},t.prototype.distanceFrom=function(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)},t.prototype.min=function(e){return new t(Math.min(this.x,e.x),Math.min(this.y,e.y))},t.prototype.max=function(e){return new t(Math.max(this.x,e.x),Math.max(this.y,e.y))},t.prototype.toString=function(){return this.x+","+this.y},t.prototype.setXY=function(t,e){this.x=t,this.y=e},t.prototype.setFromPoint=function(t){this.x=t.x,this.y=t.y},t.prototype.swap=function(t){var e=this.x,n=this.y;this.x=t.x,this.y=t.y,t.x=e,t.y=n},t.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},t.prototype.dot=function(t){return this.x*t.x+this.y*t.y},t.prototype.cross=function(t){return this.x*t.y-this.y*t.x},t.prototype.unit=function(){return this.divide(this.length())},t.prototype.unitEquals=function(){return this.divideEquals(this.length()),this},t.prototype.perp=function(){return new t(-this.y,this.x)},t.fromPoints=function(e,n){return new t(n.x-e.x,n.y-e.y)},t}(),u=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.coefs=[];for(var n=t.length-1;n>=0;n--)this.coefs.push(t[n])}return t.prototype.eval=function(t){for(var e=0,n=this.coefs.length-1;n>=0;n--)e=e*t+this.coefs[n];return e},t.prototype.multiply=function(e){var n,r=new t;for(n=0;n<=this.getDegree()+e.getDegree();n++)r.coefs.push(0);for(n=0;n<=this.getDegree();n++)for(var i=0;i<=e.getDegree();i++)r.coefs[n+i]+=this.coefs[n]*e.coefs[i];return r},t.prototype.divide_scalar=function(t){for(var e=0;e<this.coefs.length;e++)this.coefs[e]/=t},t.prototype.simplify=function(){for(var e=this.getDegree();e>=0&&Math.abs(this.coefs[e])<=t.TOLERANCE;e--)this.coefs.pop()},t.prototype.bisection=function(e,n){var r,i=this.eval(e),o=this.eval(n);if(Math.abs(i)<=t.TOLERANCE)r=e;else if(Math.abs(o)<=t.TOLERANCE)r=n;else if(i*o<=0)for(var s=Math.log(n-e),a=Math.log(10)*t.ACCURACY,u=Math.ceil((s+a)/Math.log(2)),c=0;c<u;c++){r=.5*(e+n);var p=this.eval(r);if(Math.abs(p)<=t.TOLERANCE)break;p*i<0?(n=r,o=p):(e=r,i=p)}return r},t.prototype.toString=function(){var t,e=[],n=[];for(t=this.coefs.length-1;t>=0;t--){var r=this.coefs[t];if(0!==r){var i=r<0?" - ":" + ";r=Math.abs(r),t>0&&1===r?r="x":r+="x",t>1&&(r+="^"+t),n.push(i),e.push(r)}}n[0]=" + "===n[0]?"":"-";var o="";for(t=0;t<e.length;t++)o+=n[t]+e[t];return o},t.prototype.getDegree=function(){return this.coefs.length-1},t.prototype.getDerivative=function(){for(var e=new t,n=1;n<this.coefs.length;n++)e.coefs.push(n*this.coefs[n]);return e},t.prototype.getRoots=function(){var t;switch(this.simplify(),this.getDegree()){case 0:t=[];break;case 1:t=this.getLinearRoot();break;case 2:t=this.getQuadraticRoots();break;case 3:t=this.getCubicRoots();break;case 4:t=this.getQuarticRoots();break;default:t=[]}return t},t.prototype.getRootsInInterval=function(t,e){var n,r,i=[];if(1===this.getDegree())null!=(r=this.bisection(t,e))&&i.push(r);else{var o=this.getDerivative(),s=o.getRootsInInterval(t,e);if(s.length>0){for(r=this.bisection(t,s[0]),null!=r&&i.push(r),n=0;n<=s.length-2;n++)null!=(r=this.bisection(s[n],s[n+1]))&&i.push(r);r=this.bisection(s[s.length-1],e),null!=r&&i.push(r)}else null!=(r=this.bisection(t,e))&&i.push(r)}return i},t.prototype.getLinearRoot=function(){var t=[],e=this.coefs[1];return 0!==e&&t.push(-this.coefs[0]/e),t},t.prototype.getQuadraticRoots=function(){var t=[];if(2===this.getDegree()){var e=this.coefs[2],n=this.coefs[1]/e,r=this.coefs[0]/e,i=n*n-4*r;if(i>0){var o=Math.sqrt(i);t.push(.5*(-n+o)),t.push(.5*(-n-o))}else 0===i&&t.push(.5*-n)}return t},t.prototype.getCubicRoots=function(){var e=[];if(3===this.getDegree()){var n=this.coefs[3],r=this.coefs[2]/n,i=this.coefs[1]/n,o=this.coefs[0]/n,s=(3*i-r*r)/3,a=(2*r*r*r-9*i*r+27*o)/27,u=r/3,c=a*a/4+s*s*s/27,p=a/2;Math.abs(c)<=t.TOLERANCE&&0;var l=void 0;if(c>0){var f=Math.sqrt(c),h=void 0;l=-p+f,h=l>=0?Math.pow(l,1/3):-Math.pow(-l,1/3),l=-p-f,l>=0?h+=Math.pow(l,1/3):h-=Math.pow(-l,1/3),e.push(h-u)}else if(c<0){var d=Math.sqrt(-s/3),y=Math.atan2(Math.sqrt(-c),-p)/3,g=Math.cos(y),v=Math.sin(y),_=Math.sqrt(3);e.push(2*d*g-u),e.push(-d*(g+_*v)-u),e.push(-d*(g-_*v)-u)}else l=p>=0?-Math.pow(p,1/3):Math.pow(-p,1/3),e.push(2*l-u),e.push(-l-u)}return e},t.prototype.getQuarticRoots=function(){var e=[];if(4===this.getDegree()){var n=this.coefs[4],r=this.coefs[3]/n,i=this.coefs[2]/n,o=this.coefs[1]/n,s=this.coefs[0]/n,a=new t(1,-i,r*o-4*s,-r*r*s+4*i*s-o*o).getCubicRoots(),u=a[0],c=r*r/4-i+u;Math.abs(c)<=t.TOLERANCE&&(c=0);var p=void 0,l=void 0;if(c>0){var f=Math.sqrt(c),h=3*r*r/4-f*f-2*i;p=(4*r*i-8*o-r*r*r)/(4*f);var d=h+p,y=h-p,g=void 0;Math.abs(d)<=t.TOLERANCE&&(d=0),Math.abs(y)<=t.TOLERANCE&&(y=0),d>=0&&(g=Math.sqrt(d),e.push(-r/4+(f+g)/2),e.push(-r/4+(f-g)/2)),y>=0&&(g=Math.sqrt(y),e.push(-r/4+(g-f)/2),e.push(-r/4-(g+f)/2))}else if(c>=0&&(p=u*u-4*s)>=-t.TOLERANCE){p<0&&(p=0),p=2*Math.sqrt(p);var h=3*r*r/4-2*i;h+p>=t.TOLERANCE&&(l=Math.sqrt(h+p),e.push(-r/4+l/2),e.push(-r/4-l/2)),h-p>=t.TOLERANCE&&(l=Math.sqrt(h-p),e.push(-r/4+l/2),e.push(-r/4-l/2))}}return e},t.TOLERANCE=1e-6,t.ACCURACY=6,t}(),c=function(){function t(t,e){this.type=t,this.text=e}return t.prototype.typeis=function(t){return this.type===t},t}(),p=function(){function t(t){this.segments=null,this.parseData(t)}return t.prototype.appendPathSegment=function(t){t.previous=this.segments[this.segments.length-1],this.segments.push(t)},t.prototype.parseData=function(e){var n=this.tokenize(e),r=0,i=n[r],o="BOD";for(this.segments=[];!i.typeis(t.EOD);){var s=void 0,a=[];if("BOD"===o){if("M"!==i.text&&"m"!==i.text)throw new Error("Path data must begin with a moveto command");r++,s=t.PARAMS[i.text].length,o=i.text}else i.typeis(t.NUMBER)?s=t.PARAMS[o].length:(r++,s=t.PARAMS[i.text].length,o=i.text);if(!(r+s<n.length))throw new Error("Path data ended before all parameters were found");for(var u=r;u<r+s;u++){var c=n[u];if(!c.typeis(t.NUMBER))throw new Error("Parameter type is not a number: "+o+","+c.text);a[a.length]=c.text}var p=void 0,l=this.segments.length,b=0===l?null:this.segments[l-1];switch(o){case"A":p=new f(a,this,b);break;case"C":p=new d(a,this,b);break;case"c":p=new P(a,this,b);break;case"H":p=new y(a,this,b);break;case"L":p=new g(a,this,b);break;case"l":p=new O(a,this,b);break;case"M":p=new v(a,this,b);break;case"m":p=new w(a,this,b);break;case"Q":p=new h(a,this,b);break;case"q":p=new E(a,this,b);break;case"S":p=new m(a,this,b);break;case"s":p=new M(a,this,b);break;case"T":p=new _(a,this,b);break;case"t":p=new A(a,this,b);break;case"Z":case"z":p=new x(a,this,b);break;default:throw new Error("Unsupported segment type: "+o)}this.segments.push(p),r+=s,i=n[r],"M"===o&&(o="L"),"m"===o&&(o="l")}},t.prototype.tokenize=function(e){for(var n=[];""!==e;)if(e.match(/^([ \t\r\n,]+)/))e=e.substr(RegExp.$1.length);else if(e.match(/^([aAcChHlLmMqQsStTvVzZ])/))n[n.length]=new c(t.COMMAND,RegExp.$1),e=e.substr(RegExp.$1.length);else{if(!e.match(/^(([-+]?[0-9]+(\.[0-9]*)?|[-+]?\.[0-9]+)([eE][-+]?[0-9]+)?)/))throw new Error("Unrecognized segment command: "+e);n[n.length]=new c(t.NUMBER,parseFloat(RegExp.$1)),e=e.substr(RegExp.$1.length)}return n[n.length]=new c(t.EOD,null),n},t.prototype.intersectShape=function(t){for(var e=new s,n=0,r=this.segments;n<r.length;n++){var i=r[n],o=s.intersectShapes(i,t);e.appendPoints(o.points)}return e},t.prototype.asIntersectionParams=function(){return r("Path",[])},t.COMMAND=0,t.NUMBER=1,t.EOD=2,t.PARAMS={A:["rx","ry","x-axis-rotation","large-arc-flag","sweep-flag","x","y"],a:["rx","ry","x-axis-rotation","large-arc-flag","sweep-flag","x","y"],C:["x1","y1","x2","y2","x","y"],c:["x1","y1","x2","y2","x","y"],H:["x"],h:["x"],L:["x","y"],l:["x","y"],M:["x","y"],m:["x","y"],Q:["x1","y1","x","y"],q:["x1","y1","x","y"],S:["x2","y2","x","y"],s:["x2","y2","x","y"],T:["x","y"],t:["x","y"],V:["y"],v:["y"],Z:[],z:[]},t}(),l=function(){function t(t,e,n,r){this.command=t,this.owner=n,this.previous=r,this.points=[];for(var i=0;i<e.length;)this.points.push(new a(parseFloat(e[i]),parseFloat(e[i+1]))),i+=2}return t.prototype.toString=function(){var t=this.points.map(function(t){return t.toString()}),e="";return this.previous.command!==this.command&&(e=this.command),e+t.join(" ")},Object.defineProperty(t.prototype,"lastPoint",{get:function(){return this.points[this.points.length-1]},enumerable:!0,configurable:!0}),t.prototype.asIntersectionParams=function(){return null},t}(),f=function(t){function e(e,n,r){var i=t.call(this,"A",e.slice(e.length-2),n,r)||this;return i.rx=parseFloat(e.shift()),i.ry=parseFloat(e.shift()),i.angle=parseFloat(e.shift()),i.arcFlag=parseFloat(e.shift()),i.sweepFlag=parseFloat(e.shift()),i}return o.a(e,t),e.prototype.toString=function(){var t="";return this.previous.command!==this.command&&(t=this.command),t+[this.rx,this.ry,this.angle,this.arcFlag,this.sweepFlag,this.points[0].toString()].join(",")},e.prototype.asIntersectionParams=function(){return r("Ellipse",[this.center,this.rx,this.ry])},Object.defineProperty(e.prototype,"center",{get:function(){var t,e=this.previous.lastPoint,n=this.points[0],r=this.rx,i=this.ry,o=this.angle*Math.PI/180,s=Math.cos(o),u=Math.sin(o),c=e.subtract(n).divide(2),p=c.x*s+c.y*u,l=c.x*-u+c.y*s,f=p*p,h=l*l,d=f/(r*r)+h/(i*i);d>1&&(t=Math.sqrt(d),r*=t,i*=t);var y=r*r,g=i*i,v=y*h,_=g*f;t=(y*g-v-_)/(v+_),Math.abs(t)<1e-6&&(t=0);var m=Math.sqrt(t);this.arcFlag===this.sweepFlag&&(m=-m);var b=e.add(n).divide(2),x=m*r*l/i,E=m*-i*p/r;return new a(x*s-E*u+b.x,x*u+E*s+b.y)},enumerable:!0,configurable:!0}),e}(l),h=function(t){function e(e,n,r){return t.call(this,"Q",e,n,r)||this}return o.a(e,t),Object.defineProperty(e.prototype,"controlPoint",{get:function(){return this.points[0]},enumerable:!0,configurable:!0}),e.prototype.asIntersectionParams=function(){return r("Bezier2",[this.previous.lastPoint,this.points[0],this.points[1]])},e}(l),d=function(t){function e(e,n,r){return t.call(this,"C",e,n,r)||this}return o.a(e,t),Object.defineProperty(e.prototype,"lastControlPoint",{get:function(){return this.points[1]},enumerable:!0,configurable:!0}),e.prototype.asIntersectionParams=function(){return r("Bezier3",[this.previous.lastPoint,this.points[0],this.points[1],this.points[2]])},e}(l),y=function(t){function e(e,n,r){return t.call(this,"H",[e.pop(),String(r.lastPoint.y)],n,r)||this}return o.a(e,t),e.prototype.toString=function(){var t="";return this.previous.command!==this.command&&(t=this.command),t+this.points[0].x},e}(l),g=function(t){function e(e,n,r){return t.call(this,"L",e,n,r)||this}return o.a(e,t),e.prototype.toString=function(){var t="";return this.previous.command!==this.command&&"M"!==this.previous.command&&(t=this.command),t+this.points[0].toString()},e.prototype.asIntersectionParams=function(){return r("Line",[this.previous.lastPoint,this.points[0]])},e}(l),v=function(t){function e(e,n,r){return t.call(this,"M",e,n,r)||this}return o.a(e,t),e.prototype.toString=function(){return"M"+this.points[0].toString()},e}(l),_=function(t){function e(e,n,r){return t.call(this,"T",e,n,r)||this}return o.a(e,t),Object.defineProperty(e.prototype,"controlPoint",{get:function(){var t,e=this.previous.lastPoint;if(this.previous.command.match(/^[QqTt]$/)){var n=this.previous.controlPoint,r=n.subtract(e);t=e.subtract(r)}else t=e;return t},enumerable:!0,configurable:!0}),e.prototype.asIntersectionParams=function(){return r("Bezier2",[this.previous.lastPoint,this.controlPoint,this.points[0]])},e}(l),m=function(t){function e(e,n,r){return t.call(this,"S",e,n,r)||this}return o.a(e,t),Object.defineProperty(e.prototype,"firstControlPoint",{get:function(){var t,e=this.previous.lastPoint;if(this.previous.command.match(/^[SsCc]$/)){var n=this.previous.lastControlPoint,r=n.subtract(e);t=e.subtract(r)}else t=e;return t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lastControlPoint",{get:function(){return this.points[0]},enumerable:!0,configurable:!0}),e.prototype.asIntersectionParams=function(){return r("Bezier3",[this.previous.lastPoint,this.firstControlPoint,this.points[0],this.points[1]])},e}(l),b=function(){function t(t,e,n,r){this.command=t,this.owner=n,this.previous=r,this.points=[];for(var i=this.previous?this.previous.lastPoint:new a(0,0),o=0;o<e.length;){var s=new a(i.x+parseFloat(e[o]),i.y+parseFloat(e[o+1]));this.points.push(s),o+=2}}return t.prototype.toString=function(){var t=[],e="",n=this.previous?this.previous.lastPoint:new a(0,0);null!=this.previous&&this.previous.command===this.command||(e=this.command);for(var r=0,i=this.points;r<i.length;r++){var o=i[r],s=o.subtract(n);t.push(s.toString())}return e+t.join(" ")},Object.defineProperty(t.prototype,"lastPoint",{get:function(){return this.points[this.points.length-1]},enumerable:!0,configurable:!0}),t.prototype.asIntersectionParams=function(){return null},t}(),x=function(t){function e(e,n,r){return t.call(this,"z",e,n,r)||this}return o.a(e,t),Object.defineProperty(e.prototype,"lastPoint",{get:function(){for(var t,e=this.previous;e;){if(e.command.match(/^[mMzZ]$/)){t=e.lastPoint;break}e=e.previous}return t},enumerable:!0,configurable:!0}),e.prototype.asIntersectionParams=function(){return r("Line",[this.previous.lastPoint,this.lastPoint])},e}(b),E=function(t){function e(e,n,r){return t.call(this,"q",e,n,r)||this}return o.a(e,t),Object.defineProperty(e.prototype,"controlPoint",{get:function(){return this.points[0]},enumerable:!0,configurable:!0}),e.prototype.asIntersectionParams=function(){return r("Bezier2",[this.previous.lastPoint,this.points[0],this.points[1]])},e}(b),P=function(t){function e(e,n,r){return t.call(this,"c",e,n,r)||this}return o.a(e,t),Object.defineProperty(e.prototype,"lastControlPoint",{get:function(){return this.points[1]},enumerable:!0,configurable:!0}),e.prototype.asIntersectionParams=function(){return r("Bezier3",[this.previous.lastPoint,this.points[0],this.points[1],this.points[2]])},e}(b),O=function(t){function e(e,n,r){return t.call(this,"l",e,n,r)||this}return o.a(e,t),e.prototype.toString=function(){var t=this.previous?this.previous.lastPoint:new a(0,0),e=this.points[0].subtract(t),n="";return this.previous.command!==this.command&&"m"!==this.previous.command&&(n=this.command),n+e.toString()},e.prototype.asIntersectionParams=function(){return r("Line",[this.previous.lastPoint,this.points[0]])},e}(b),w=function(t){function e(e,n,r){return t.call(this,"m",e,n,r)||this}return o.a(e,t),e.prototype.toString=function(){return"m"+this.points[0].toString()},e}(b),A=function(t){function e(e,n,r){return t.call(this,"t",e,n,r)||this}return o.a(e,t),Object.defineProperty(e.prototype,"controlPoint",{get:function(){var t,e=this.previous.lastPoint;if(this.previous.command.match(/^[QqTt]$/)){var n=this.previous.controlPoint,r=n.subtract(e);t=e.subtract(r)}else t=e;return t},enumerable:!0,configurable:!0}),e.prototype.asIntersectionParams=function(){return r("Bezier2",[this.previous.lastPoint,this.controlPoint,this.points[0]])},e}(b),M=function(t){function e(e,n,r){return t.call(this,"s",e,n,r)||this}return o.a(e,t),Object.defineProperty(e.prototype,"firstControlPoint",{get:function(){var t,e=this.previous.lastPoint;if(this.previous.command.match(/^[SsCc]$/)){var n=this.previous.lastControlPoint,r=n.subtract(e);t=e.subtract(r)}else t=e;return t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lastControlPoint",{get:function(){return this.points[0]},enumerable:!0,configurable:!0}),e.prototype.asIntersectionParams=function(){return r("Bezier3",[this.previous.lastPoint,this.firstControlPoint,this.points[0],this.points[1]])},e}(b)},function(t,e,n){"use strict";function r(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=new h;return t.forEach(function(t){return t.forEach(n.push,n)}),n}function i(t,e){var n=t.length;if(0===n)return NaN;if(n<2||e<=0)return t[0];if(e>=1)return t[n-1];var r=e*(n-1),i=Math.floor(r),o=t[i];return o+(t[i+1]-o)*(r-i)}function o(t){t=t.slice().sort(function(t,e){return t-e});var e=new d(i(t,.5),i(t,.25),i(t,.75));return t.forEach(function(t){return e.push(t)}),e}function s(t,e,n,r,i){var o=new g(r,i);return o.pushAll(t,e,n),o}function a(t,e,n,r,i,o){var s=new v(r,i,o);return s.pushAll(t,e,n),s}function u(t){return new _(t)}function c(t,e){return new g(t.length,e,t)}function p(t){var e=NaN,n=NaN;return t.forEach(function(t){isNaN(t)||((isNaN(e)||e>t)&&(e=t),(isNaN(n)||e<t)&&(n=t))}),[e,n]}Object.defineProperty(e,"__esModule",{value:!0});var l=n(0),f=n(1);e.computeStats=r,e.computeAdvancedStats=o,e.hist=s,e.categoricalHist=a,e.rangeHist=u,e.wrapHist=c,e.extent=p;var h=function(){function t(){this.min=NaN,this.max=NaN,this.sum=0,this.mean=0,this._var=0,this.n=0,this.nans=0,this.moment2=NaN,this.moment3=NaN,this.moment4=NaN}return Object.defineProperty(t.prototype,"var",{get:function(){return this.n>1?this._var/(this.n-1):0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sd",{get:function(){return Math.sqrt(this.var)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"kurtosis",{get:function(){return 0===this.n?0:this.n*this.moment4/(this.moment2*this.moment2)-3},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"skewness",{get:function(){return 0===this.n?0:Math.sqrt(this.n)*this.moment3/Math.pow(this.moment2,1.5)},enumerable:!0,configurable:!0}),t.prototype.push=function(t){if("number"!=typeof t&&(t=Number.NaN),isNaN(t))return void this.nans++;if(this.n++,this.sum+=t,(t<this.min||isNaN(this.min))&&(this.min=t),(this.max<t||isNaN(this.max))&&(this.max=t),1===this.n)this.mean=t,this._var=0,this.moment2=this.moment3=this.moment4=0;else{var e=this.mean;this.mean=e+(t-e)/this.n,this._var=this._var+(t-e)*(t-this.mean);var n=t-e,r=n/this.n,i=r*r,o=n*r*(this.n-1);this.moment4+=o*i*(this.n*this.n-3*this.n+3)+6*i*this.moment2-4*r*this.moment3,this.moment3+=o*r*(this.n-2)-3*r*this.moment2,this.moment2+=o}},t}(),d=function(t){function e(e,n,r){var i=t.call(this)||this;return i.median=e,i.q1=n,i.q3=r,i}return l.a(e,t),e}(h),y=function(){function t(t,e){this._missing=0,this._missingRange=n.i(f.none)(),this._bins=[];for(var r=0;r<t;++r)this._bins.push(e&&e.length>r?e[r]:0)}return Object.defineProperty(t.prototype,"largestFrequency",{get:function(){return Math.max(Math.max.apply(Math,this._bins),this._missing)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"largestBin",{get:function(){return Math.max.apply(Math,this._bins)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"count",{get:function(){return this.validCount+this._missing},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"validCount",{get:function(){return this._bins.reduce(function(t,e){return t+e},0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bins",{get:function(){return this._bins.length},enumerable:!0,configurable:!0}),t.prototype.binOf=function(t){return-1},t.prototype.frequency=function(t){return this._bins[t]},t.prototype.range=function(t){return this._ranges?this._ranges[t]:n.i(f.none)()},Object.defineProperty(t.prototype,"missing",{get:function(){return this._missing},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"missingRange",{get:function(){return this._missingRange},enumerable:!0,configurable:!0}),t.prototype.pushAll=function(t,e,r){for(var i=this,o=[],s=[],a=this.bins-1;a>=0;--a)o.push([]);if(e){var u=e.iter(r);t.forEach(function(t){var e=u.next(),n=i.binOf(t);n<0?(i._missing++,s.push(e)):(i._bins[n]++,o[n].push(e))}),this._ranges=o.map(function(t){return n.i(f.list)(t.sort().filter(function(t,e,n){return t!==n[e-1]}))}),this._missingRange=n.i(f.list)(s.sort().filter(function(t,e,n){return t!==n[e-1]}))}else t.forEach(function(t){var e=i.binOf(t);e<0?i._missing++:i._bins[e]++}),this._ranges=null,this._missingRange=null},t.prototype.forEach=function(t,e){return this._bins.forEach(t,e)},t}(),g=function(t){function e(e,n,r){var i=t.call(this,e,r)||this;return i.valueRange=n,i}return l.a(e,t),e.prototype.binOf=function(t){return"number"==typeof t?this.binOfImpl(t):-1},e.prototype.binOfImpl=function(t){if(isNaN(t))return-1;var e=(t-this.valueRange[0])/(this.valueRange[1]-this.valueRange[0]),n=Math.round(e*(this.bins-1));return n<0&&(n=0),n>=this.bins&&(n=this.bins-1),isNaN(n)?-1:n},e}(y),v=function(t){function e(e,n,r){var i=t.call(this,e.length)||this;return i.values=e,i.categories=n,i.colors=r,i}return l.a(e,t),e.prototype.binOf=function(t){return this.values.indexOf(t)},e}(y),_=function(){function t(t){this._range=t}return Object.defineProperty(t.prototype,"categories",{get:function(){return this._range.groups.map(function(t){return t.name})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"colors",{get:function(){return this._range.groups.map(function(t){return t.color})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"largestFrequency",{get:function(){return Math.max.apply(Math,this._range.groups.map(function(t){return t.length}))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"largestBin",{get:function(){return this.largestFrequency},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"count",{get:function(){return this._range.length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"validCount",{get:function(){return this.count},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bins",{get:function(){return this._range.groups.length},enumerable:!0,configurable:!0}),t.prototype.binOf=function(t){return this._range.groups.findIndex(function(e){return e.name===t})},t.prototype.frequency=function(t){return this._range.groups[t].length},t.prototype.range=function(t){return n.i(f.list)(this._range.groups[t])},Object.defineProperty(t.prototype,"missing",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"missingRange",{get:function(){return n.i(f.none)()},enumerable:!0,configurable:!0}),t.prototype.forEach=function(t,e){return this._range.groups.forEach(function(n,r){return t.call(e,n.length,r)})},t}()},function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_tslib__=__webpack_require__(0),__WEBPACK_IMPORTED_MODULE_1__range__=__webpack_require__(1),__WEBPACK_IMPORTED_MODULE_2__index__=__webpack_require__(2),__WEBPACK_IMPORTED_MODULE_3__idtype__=__webpack_require__(4),__WEBPACK_IMPORTED_MODULE_4__datatype__=__webpack_require__(3),__WEBPACK_IMPORTED_MODULE_5__math__=__webpack_require__(11),__WEBPACK_IMPORTED_MODULE_6__internal_StratificationVector__=__webpack_require__(137),__WEBPACK_IMPORTED_MODULE_7__internal_ProjectedAtom__=__webpack_require__(136);__webpack_require__.d(__webpack_exports__,"a",function(){return AVector});var AVector=function(_super){function AVector(t){var e=_super.call(this)||this;return e.root=t,e}return __WEBPACK_IMPORTED_MODULE_0_tslib__.a(AVector,_super),Object.defineProperty(AVector.prototype,"dim",{get:function(){return[this.length]},enumerable:!0,configurable:!0}),Object.defineProperty(AVector.prototype,"length",{get:function(){return this.size()},enumerable:!0,configurable:!0}),AVector.prototype.view=function(t){return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.all)()),new VectorView(this.root,__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.parse)(t))},AVector.prototype.idView=function(t){return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.all)()),__WEBPACK_IMPORTED_MODULE_0_tslib__.b(this,void 0,void 0,function(){var e;return __WEBPACK_IMPORTED_MODULE_0_tslib__.c(this,function(n){switch(n.label){case 0:return[4,this.ids()];case 1:return e=n.sent(),[2,this.view(e.indexOf(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.parse)(t)))]}})})},AVector.prototype.stats=function(t){return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.all)()),__WEBPACK_IMPORTED_MODULE_0_tslib__.b(this,void 0,void 0,function(){var e;return __WEBPACK_IMPORTED_MODULE_0_tslib__.c(this,function(n){switch(n.label){case 0:return this.root.valuetype.type!==__WEBPACK_IMPORTED_MODULE_4__datatype__.VALUE_TYPE_INT&&this.root.valuetype.type!==__WEBPACK_IMPORTED_MODULE_4__datatype__.VALUE_TYPE_REAL?[2,Promise.reject("invalid value type: "+this.root.valuetype.type)]:(e=__WEBPACK_IMPORTED_MODULE_5__math__.computeStats,[4,this.data(t)]);case 1:return[2,e.apply(void 0,[n.sent()])]}})})},AVector.prototype.statsAdvanced=function(t){return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.all)()),__WEBPACK_IMPORTED_MODULE_0_tslib__.b(this,void 0,void 0,function(){var e;return __WEBPACK_IMPORTED_MODULE_0_tslib__.c(this,function(n){switch(n.label){case 0:return this.root.valuetype.type!==__WEBPACK_IMPORTED_MODULE_4__datatype__.VALUE_TYPE_INT&&this.root.valuetype.type!==__WEBPACK_IMPORTED_MODULE_4__datatype__.VALUE_TYPE_REAL?[2,Promise.reject("invalid value type: "+this.root.valuetype.type)]:(e=__WEBPACK_IMPORTED_MODULE_5__math__.computeAdvancedStats,[4,this.data(t)]);case 1:return[2,e.apply(void 0,[n.sent()])]}})})},Object.defineProperty(AVector.prototype,"indices",{get:function(){return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.range)(0,this.length)},enumerable:!0,configurable:!0}),AVector.prototype.groups=function(){return __WEBPACK_IMPORTED_MODULE_0_tslib__.b(this,void 0,void 0,function(){var t,e,n,r,i;return __WEBPACK_IMPORTED_MODULE_0_tslib__.c(this,function(o){switch(o.label){case 0:return t=this.root.valuetype,t.type!==__WEBPACK_IMPORTED_MODULE_4__datatype__.VALUE_TYPE_CATEGORICAL?[3,2]:(e=t,[4,this.data()]);case 1:return n=o.sent(),r={name:this.root.desc.id},"string"!=typeof e.categories[0]&&(i=e.categories,i[0].color&&(r.colors=i.map(function(t){return t.color})),i[0].label&&(r.labels=i.map(function(t){return t.label}))),[2,__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_4__datatype__.categorical2partitioning)(n,e.categories.map(function(t){return"string"==typeof t?t:t.name}),r)];case 2:return[2,Promise.resolve(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.composite)(this.root.desc.id,[__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.asUngrouped)(this.indices.dim(0))]))]}})})},AVector.prototype.stratification=function(){return this.asStratification()},AVector.prototype.asStratification=function(){return __WEBPACK_IMPORTED_MODULE_0_tslib__.b(this,void 0,void 0,function(){var t,e;return __WEBPACK_IMPORTED_MODULE_0_tslib__.c(this,function(n){switch(n.label){case 0:return t=__WEBPACK_IMPORTED_MODULE_6__internal_StratificationVector__.a.bind,e=[void 0,this.root],[4,this.groups()];case 1:return[2,new(t.apply(__WEBPACK_IMPORTED_MODULE_6__internal_StratificationVector__.a,e.concat([n.sent()])))]}})})},AVector.prototype.hist=function(t,e){return void 0===e&&(e=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.all)()),__WEBPACK_IMPORTED_MODULE_0_tslib__.b(this,void 0,void 0,function(){var n,r,i,o;return __WEBPACK_IMPORTED_MODULE_0_tslib__.c(this,function(s){switch(s.label){case 0:return n=this.root.valuetype,[4,this.data(e)];case 1:switch(r=s.sent(),n.type){case __WEBPACK_IMPORTED_MODULE_4__datatype__.VALUE_TYPE_CATEGORICAL:return i=n,[2,__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_5__math__.categoricalHist)(r,this.indices.dim(0),r.length,i.categories.map(function(t){return"string"==typeof t?t:t.name}),i.categories.map(function(t){return"string"==typeof t?t:t.label||t.name}),i.categories.map(function(t){return"string"==typeof t?"gray":t.color||"gray"}))];case __WEBPACK_IMPORTED_MODULE_4__datatype__.VALUE_TYPE_REAL:case __WEBPACK_IMPORTED_MODULE_4__datatype__.VALUE_TYPE_INT:return o=n,[2,__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_5__math__.hist)(r,this.indices.dim(0),r.length,t||Math.round(Math.sqrt(this.length)),o.range)];default:return[2,null]}return[2]}})})},AVector.prototype.every=function(t,e){return __WEBPACK_IMPORTED_MODULE_0_tslib__.b(this,void 0,void 0,function(){return __WEBPACK_IMPORTED_MODULE_0_tslib__.c(this,function(n){switch(n.label){case 0:return[4,this.data()];case 1:return[2,n.sent().every(t,e)]}})})},AVector.prototype.some=function(t,e){return __WEBPACK_IMPORTED_MODULE_0_tslib__.b(this,void 0,void 0,function(){return __WEBPACK_IMPORTED_MODULE_0_tslib__.c(this,function(n){switch(n.label){case 0:return[4,this.data()];case 1:return[2,n.sent().some(t,e)]}})})},AVector.prototype.forEach=function(t,e){return __WEBPACK_IMPORTED_MODULE_0_tslib__.b(this,void 0,void 0,function(){return __WEBPACK_IMPORTED_MODULE_0_tslib__.c(this,function(n){switch(n.label){case 0:return[4,this.data()];case 1:return n.sent().forEach(t,e),[2]}})})},AVector.prototype.reduce=function(t,e,n){return __WEBPACK_IMPORTED_MODULE_0_tslib__.b(this,void 0,void 0,function(){function r(){return t.apply(n,Array.from(arguments))}return __WEBPACK_IMPORTED_MODULE_0_tslib__.c(this,function(t){switch(t.label){case 0:return[4,this.data()];case 1:return[2,t.sent().reduce(r,e)]}})})},AVector.prototype.reduceRight=function(t,e,n){return __WEBPACK_IMPORTED_MODULE_0_tslib__.b(this,void 0,void 0,function(){function r(){return t.apply(n,Array.from(arguments))}return __WEBPACK_IMPORTED_MODULE_0_tslib__.c(this,function(t){switch(t.label){case 0:return[4,this.data()];case 1:return[2,t.sent().reduceRight(r,e)]}})})},AVector.prototype.reduceAtom=function(t,e,n,r){var i=this;return new __WEBPACK_IMPORTED_MODULE_7__internal_ProjectedAtom__.a(i,t,e,n,r)},AVector.prototype.restore=function(persisted){var r=this;return persisted&&persisted.f?this.reduceAtom(eval(persisted.f),this,persisted.valuetype,persisted.idtype?__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__idtype__.resolve)(persisted.idtype):void 0):(persisted&&persisted.range&&(r=r.view(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.parse)(persisted.range))),r)},AVector}(__WEBPACK_IMPORTED_MODULE_3__idtype__.SelectAble);__webpack_exports__.b=AVector;var VectorView=function(t){function e(e,n){var r=t.call(this,e)||this;return r.range=n,r}return __WEBPACK_IMPORTED_MODULE_0_tslib__.a(e,t),Object.defineProperty(e.prototype,"desc",{get:function(){return this.root.desc},enumerable:!0,configurable:!0}),e.prototype.persist=function(){return{root:this.root.persist(),range:this.range.toString()}},e.prototype.size=function(){return this.range.size(this.root.dim)[0]},e.prototype.at=function(t){var e=this.range.invert([t],this.root.dim);return this.root.at(e[0])},e.prototype.data=function(t){return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.all)()),this.root.data(this.range.preMultiply(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.parse)(t),this.root.dim))},e.prototype.names=function(t){return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.all)()),this.root.names(this.range.preMultiply(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.parse)(t),this.root.dim))},e.prototype.ids=function(t){return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.all)()),this.root.ids(this.range.preMultiply(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.parse)(t),this.root.dim))},e.prototype.view=function(t){void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.all)());var n=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.parse)(t);return n.isAll?this:new e(this.root,this.range.preMultiply(n,this.dim))},Object.defineProperty(e.prototype,"valuetype",{get:function(){return this.root.valuetype},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"idtype",{get:function(){return this.root.idtype},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"idtypes",{get:function(){return[this.idtype]},enumerable:!0,configurable:!0}),e.prototype.sort=function(t,e){return __WEBPACK_IMPORTED_MODULE_0_tslib__.b(this,void 0,void 0,function(){var n,r;return __WEBPACK_IMPORTED_MODULE_0_tslib__.c(this,function(i){switch(i.label){case 0:return[4,this.data()];case 1:return n=i.sent(),r=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__index__.argSort)(n,t,e),[2,this.view(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.list)(r))]}})})},e.prototype.filter=function(t,e){return __WEBPACK_IMPORTED_MODULE_0_tslib__.b(this,void 0,void 0,function(){var n,r;return __WEBPACK_IMPORTED_MODULE_0_tslib__.c(this,function(i){switch(i.label){case 0:return[4,this.data()];case 1:return n=i.sent(),r=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__index__.argFilter)(n,t,e),[2,this.view(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.list)(r))]}})})},e}(AVector)},function(t,e,n){"use strict";var r=n(10);n.d(e,"b",function(){return i});var i=[];i.N=i[0]="n",i.NE=i[1]="ne",i.E=i[2]="e",i.SE=i[3]="se",i.S=i[4]="s",i.SW=i[5]="sw",i.W=i[6]="w",i.NW=i[7]="nw";var o=function(){function t(){}return t.prototype.shift=function(){return"number"==typeof arguments[0]?this.shiftImpl(arguments[0],arguments[1]):Array.isArray(arguments[0])?this.shiftImpl(arguments[0][0],arguments[0][1]):this.shiftImpl(arguments[0].x,arguments[0].y),this},Object.defineProperty(t.prototype,"center",{get:function(){return this.bs().xy},enumerable:!0,configurable:!0}),t.prototype.corner=function(t){var e=this.aabb();switch(t){case i.N:return n.i(r.vec)(e.cx,e.y);case i.S:return n.i(r.vec)(e.cx,e.y2);case i.W:return n.i(r.vec)(e.x,e.cy);case i.E:return n.i(r.vec)(e.x2,e.cy);case i.NE:return n.i(r.vec)(e.x2,e.y);case i.NW:return e.xy;case i.SE:return n.i(r.vec)(e.x2,e.y2);case i.SW:return n.i(r.vec)(e.x,e.y2)}return this.center},t.prototype.intersects=function(t){return r.Intersection.intersectShapes(this,t)},t}();e.a=o},function(t,e,n){"use strict";function r(t){var e,n,r,i;return"boolean"==typeof t?(e=t,r=arguments[1]||!1,n=arguments[2]||!1,i=arguments[3]||!1):(e=t.ctrlKey||!1,r=t.altKey||!1,n=t.shiftKey||!1,i=t.metaKey||!1),e||n?u.ADD:r||i?u.REMOVE:u.SET}function i(t){if(!t)return u.SET;if("string"==typeof t)switch(t.toLowerCase()){case"add":return u.ADD;case"remove":return u.REMOVE;default:return u.SET}return+t}function o(t,e){for(;t.ndim<e;)t.dims[t.ndim]=a.Range1D.none();return t}function s(t,e,r){void 0===r&&(r=u.SET);var i=n.i(a.parse)(e);switch(r){case u.ADD:return t.union(i);case u.REMOVE:return t.without(i);default:return i}}var a=n(1);n.d(e,"a",function(){return c}),n.d(e,"e",function(){return p}),n.d(e,"c",function(){return u}),e.f=r,e.b=i,e.d=o,e.g=s;var u,c="selected",p="hovered";!function(t){t[t.SET=0]="SET",t[t.ADD=1]="ADD",t[t.REMOVE=2]="REMOVE"}(u||(u={}))},function(t,e,n){"use strict";var r=n(0),i=n(10),o=n(13),s=n(16),a=function(t){function e(e,n,r){void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=0);var i=t.call(this)||this;return i.x=e,i.y=n,i.radius=r,i}return r.a(e,t),Object.defineProperty(e.prototype,"xy",{get:function(){return new i.Vector2D(this.x,this.y)},enumerable:!0,configurable:!0}),e.prototype.toString=function(){return"Circle(x="+this.x+",y="+this.y+",radius="+this.radius+")"},e.prototype.shiftImpl=function(t,e){this.x+=t,this.y+=e},e.prototype.aabb=function(){return new s.a(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},e.prototype.bs=function(){return this},e.prototype.transform=function(t,n){return new e(this.x*t[0],this.y*t[1],this.radius*(t[0]+t[1])/2)},e.prototype.asIntersectionParams=function(){return{name:"Circle",params:[this.xy,this.radius]}},e}(o.a);e.a=a},function(t,e,n){"use strict";var r=n(0),i=n(10),o=n(13),s=n(15),a=function(t){function e(e,n,r,i){void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=0),void 0===i&&(i=0);var o=t.call(this)||this;return o.x=e,o.y=n,o.w=r,o.h=i,o}return r.a(e,t),e.prototype.eq=function(t){return this.x===t.x&&this.y===t.y&&this.w===t.w&&this.h===t.h},e.prototype.toString=function(){return"Rect(x="+this.x+",y="+this.y+",w="+this.w+",h="+this.h+")"},Object.defineProperty(e.prototype,"xy",{get:function(){return new i.Vector2D(this.x,this.y)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"x2y2",{get:function(){return new i.Vector2D(this.x2,this.y2)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return new i.Vector2D(this.w,this.h)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cx",{get:function(){return this.x+this.w/2},set:function(t){this.x=t-this.w/2},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cy",{get:function(){return this.y+this.h/2},set:function(t){this.y=t-this.y/2},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"x2",{get:function(){return this.x+this.w},set:function(t){this.w=t-this.x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y2",{get:function(){return this.y+this.h},set:function(t){this.h=t-this.y},enumerable:!0,configurable:!0}),e.prototype.shiftImpl=function(t,e){this.x+=t,this.y+=e},e.prototype.aabb=function(){return this},e.prototype.bs=function(){return new s.a(this.cx,this.cy,Math.sqrt(2*this.w+2*this.h)/2)},e.prototype.transform=function(t,n){return new e(this.x*t[0],this.y*t[1],this.w*t[0],this.h*t[1])},e.prototype.asIntersectionParams=function(){return{name:"Rectangle",params:[this.xy,this.x2y2]}},e}(o.a);e.a=a},function(t,e,n){"use strict";function r(t,e){void 0===e&&(e={});var r=JSON.stringify(e),i=t.length+r.length,s=i<2e3?"GET":"POST";return n.i(o.sendAPI)(t,e,s)}var i=n(0),o=n(9),s=n(5),a=n(1),u=n(14),c=n(49),p=n(8),l=function(t){function e(e,n,r,i){void 0===i&&(i=!1);var o=t.call(this)||this;return o.id=e,o.name=n,o.names=r,o.internal=i,o.sel=new Map,o.name2idCache=new Map,o.id2nameCache=new Map,o.canBeMappedTo=null,o}return i.a(e,t),e.prototype.persist=function(){var t={};return this.sel.forEach(function(e,n){return t[n]=e.toString()}),{sel:t,name:this.name,names:this.names}},e.prototype.restore=function(t){var e=this;return this.name=t.name,this.names=t.names,Object.keys(t.sel).forEach(function(n){return e.sel.set(n,t.sel[n])}),this},e.prototype.toString=function(){return this.name},e.prototype.selectionTypes=function(){return Array.from(this.sel.keys())},e.prototype.selections=function(t){if(void 0===t&&(t=u.a),this.sel.has(t))return this.sel.get(t);var e=n.i(a.none)();return this.sel.set(t,e),e},e.prototype.select=function(){var t=Array.from(arguments),e="string"==typeof t[0]?t.shift():u.a,r=n.i(a.parse)(t[0]),i=n.i(u.b)(t[1]);return this.selectImpl(r,i,e)},e.prototype.selectImpl=function(t,r,i){void 0===r&&(r=u.c.SET),void 0===i&&(i=u.a);var o=this.selections(i),s=n.i(a.none)();switch(r){case u.c.SET:s=t;break;case u.c.ADD:s=o.union(t);break;case u.c.REMOVE:s=o.without(t)}if(o.eq(s))return o;this.sel.set(i,s);var c=r!==u.c.REMOVE?t:n.i(a.none)(),p=r===u.c.ADD?n.i(a.none)():r===u.c.SET?o:t;return this.fire(e.EVENT_SELECT,i,s,c,p,o),this.fire(e.EVENT_SELECT+"-"+i,s,c,p,o),o},e.prototype.clear=function(t){return void 0===t&&(t=u.a),this.selectImpl(n.i(a.none)(),u.c.SET,t)},e.prototype.fillMapCache=function(t,e){var n=this;t.forEach(function(t,r){var i=String(e[r]);n.name2idCache.set(i,t),n.id2nameCache.set(t,i)})},e.prototype.getCanBeMappedTo=function(){return null===this.canBeMappedTo&&(this.canBeMappedTo=n.i(o.getAPIJSON)("/idtype/"+this.id+"/").then(function(t){return t.map(c.a)})),this.canBeMappedTo},e.prototype.mapToFirstName=function(t,e){var i=n.i(c.a)(e),o=n.i(a.parse)(t);return r("/idtype/"+this.id+"/"+i.id,{ids:o.toString(),mode:"first"})},e.prototype.mapNameToFirstName=function(t,e){var i=n.i(c.a)(e);return r("/idtype/"+this.id+"/"+i.id,{q:t,mode:"first"})},e.prototype.mapToName=function(t,e){var i=n.i(c.a)(e),o=n.i(a.parse)(t);return r("/idtype/"+this.id+"/"+i.id,{ids:o.toString()})},e.prototype.mapNameToName=function(t,e){var i=n.i(c.a)(e);return r("/idtype/"+this.id+"/"+i.id,{q:t})},e.prototype.mapToFirstID=function(t,e){var i=n.i(c.a)(e),o=n.i(a.parse)(t);return r("/idtype/"+this.id+"/"+i.id+"/map",{ids:o.toString(),mode:"first"})},e.prototype.mapToID=function(t,e){var i=n.i(c.a)(e),o=n.i(a.parse)(t);return r("/idtype/"+this.id+"/"+i.id+"/map",{ids:o.toString()})},e.prototype.mapNameToFirstID=function(t,e){var i=n.i(c.a)(e);return r("/idtype/"+this.id+"/"+i.id+"/map",{q:t,mode:"first"})},e.prototype.mapNameToID=function(t,e){var i=n.i(c.a)(e);return r("/idtype/"+this.id+"/"+i.id+"/map",{q:t})},e.prototype.map=function(t){return i.b(this,void 0,void 0,function(){var e,o,s=this;return i.c(this,function(i){switch(i.label){case 0:return t=t.map(function(t){return String(t)}),e=t.filter(function(t){return!s.name2idCache.has(t)}),0===e.length?[2,n.i(p.a)(t.map(function(t){return s.name2idCache.get(t)}))]:[4,r("/idtype/"+this.id+"/map",{ids:e})];case 1:return o=i.sent(),e.forEach(function(t,e){s.name2idCache.set(t,o[e]),s.id2nameCache.set(o[e],t)}),[2,t.map(function(t){return s.name2idCache.get(t)})]}})})},e.prototype.unmap=function(t){return i.b(this,void 0,void 0,function(){var e,o,s,u,c,l=this;return i.c(this,function(i){switch(i.label){case 0:return e=n.i(a.parse)(t),o=[],e.dim(0).forEach(function(t){return l.id2nameCache.has(t)?null:o.push(t)}),0===o.length?(s=[],e.dim(0).forEach(function(t){return s.push(l.id2nameCache.get(t))}),[2,n.i(p.a)(s)]):[4,r("/idtype/"+this.id+"/unmap",{ids:n.i(a.list)(o).toString()})];case 1:return u=i.sent(),o.forEach(function(t,e){var n=String(u[e]);l.id2nameCache.set(t,n),l.name2idCache.set(n,t)}),c=[],e.dim(0).forEach(function(t){return c.push(l.id2nameCache.get(t))}),[2,c]}})})},e.prototype.search=function(t,e){return void 0===e&&(e=10),i.b(this,void 0,void 0,function(){var r,s=this;return i.c(this,function(i){switch(i.label){case 0:return[4,n.i(o.getAPIJSON)("/idtype/"+this.id+"/search",{q:t,limit:e})];case 1:return r=i.sent(),r.forEach(function(t){var e=String(t.name);s.id2nameCache.set(t.id,e),s.name2idCache.set(e,t.id)}),[2,r]}})})},e.prototype.searchMapping=function(t,e,r){void 0===r&&(r=10);var i=n.i(c.a)(e);return n.i(o.getAPIJSON)("/idtype/"+this.id+"/"+i.id+"/search",{q:t,limit:r})},e.EVENT_SELECT="select",e}(s.EventHandler);e.a=l},function(t,e,n){"use strict";function r(t,e){return t-e}var i=n(61),o=n(26),s=function(){function t(e){e instanceof t?this.arr=e.arr:Array.isArray(e)?this.arr=e:this.arr=[]}return Object.defineProperty(t.prototype,"length",{get:function(){return this.size()},enumerable:!0,configurable:!0}),t.all=function(){return new t([i.a.all()])},t.single=function(e){return new t([i.a.single(e)])},t.none=function(){return new t},t.from=function(e){return new t(t.compress(e))},t.compress=function(t){if(0===t.length)return[];if(1===t.length)return[i.a.single(t[0])];for(var e=[],n=t.slice(1).map(function(e,n){return e-t[n]}),r=0,o=1,s=0;o<t.length;){for(;n[r]===n[o-1]&&o<t.length;)o++;if(o===r+1)e.push(i.a.single(t[r]));else if(1===n[r])e.push(i.a.range(t[r],t[o-1]+n[r],n[r]));else for(s=r;s<o;s++)e.push(i.a.single(t[s]));r=o,o+=1}for(;r<t.length;)e.push(i.a.single(t[r++]));return e},Object.defineProperty(t.prototype,"isAll",{get:function(){return 1===this.arr.length&&this.at(0).isAll},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isNone",{get:function(){return 0===this.arr.length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isUnbound",{get:function(){return this.arr.some(function(t){return t.isUnbound})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isList",{get:function(){return this.arr.every(function(t){return t.isSingle})},enumerable:!0,configurable:!0}),t.prototype.push=function(){function t(t){return"string"==typeof t?i.a.parse(t.toString()):"number"==typeof t?i.a.single(t):Array.isArray(t)?new i.a(t[0],t[1],t[2]):t}for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(r=this.arr).push.apply(r,e.map(t));var r},t.prototype.pushSlice=function(t,e,n){void 0===e&&(e=-1),void 0===n&&(n=1),this.arr.push(new i.a(t,e,n))},t.prototype.pushList=function(e){(n=this.arr).push.apply(n,t.compress(e));var n},t.prototype.setSlice=function(t,e,n){void 0===e&&(e=-1),void 0===n&&(n=1),this.arr.length=0,this.pushSlice(t,e,n)},t.prototype.setList=function(t){this.arr.length=0,this.pushList(t)},t.prototype.at=function(t){return t<0&&(t+=this.length),t<0||t>=this.arr.length?i.a.none():this.arr[t]},t.prototype.size=function(t){return this.arr.map(function(e){return e.size(t)}).reduce(function(t,e){return t+e},0)},Object.defineProperty(t.prototype,"isIdentityRange",{get:function(){return 1===this.arr.length&&0===this.arr[0].from&&1===this.arr[0].step},enumerable:!0,configurable:!0}),t.prototype.repeat=function(e){if(void 0===e&&(e=1),1===e)return this;for(var n=this.arr.slice(),r=1;r<e;++r)n.push.apply(n,this.arr);return new t(n)},t.prototype.preMultiply=function(e,n){if(this.isAll)return e.clone();if(e.isAll)return this.clone();if(e.isNone||this.isNone)return t.none();if(this.isIdentityRange)return e.clone();var r=this.iter(n).asList(),i=function(t){var e=t.iter(r.length),n=[];return e.forEach(function(t){t>=0&&t<r.length&&n.push(r[t])}),t.fromLike(n)};if("function"==typeof e.fromLikeComposite){var o=e;return o.fromLikeComposite(o.groups.map(i))}return i(e)},t.prototype.union=function(t,e){if(this.isAll||t.isNone)return this.clone();if(t.isAll||this.isNone)return t.clone();var n=this.iter(e).asList();return t.iter(e).forEach(function(t){n.indexOf(t)<0&&n.push(t)}),t.fromLike(n.sort(r))},t.prototype.intersect=function(e,n){if(this.isNone||e.isNone)return t.none();if(this.isAll)return e.clone();if(e.isAll)return this.clone();var i=this.iter(n).asList(),o=e.iter(n),s=[];return o.forEach(function(t){i.indexOf(t)>=0&&s.push(t)}),e.fromLike(s.sort(r))},t.prototype.toSet=function(t){return this.removeDuplicates(t)},t.prototype.without=function(e,n){if(this.isNone||e.isNone)return this.clone();if(e.isAll)return t.none();var i=this.iter(n),o=e.iter(n).asList(),s=[];return i.forEach(function(t){o.indexOf(t)<0&&s.push(t)}),t.from(s.sort(r))},t.prototype.clone=function(){return new t(this.arr.map(function(t){return t.clone()}))},t.prototype.invert=function(t,e){if(this.isAll)return t;if(this.isNone)return-1;for(var n=this.arr[0].size(e),r=0,i=n,o=this.arr.length-1;i<t&&r<o;)r++,n=this.arr[r].size(e),i+=n;return r>=this.arr.length?-1:this.arr[r].invert(t-i+n,e)},t.prototype.indexOf=function(){if(arguments[0]instanceof Range)return this.indexRangeOf(arguments[0],arguments[1]);var t,e=this.iter().asList();if(1===arguments.length){if("number"==typeof arguments[0])return e.indexOf(arguments[0]);t=arguments[0]}else t=Array.from(arguments);return 0===t.length?[]:t.map(function(t,n){return e.indexOf(t)})},t.prototype.indexRangeOf=function(e,n){if(e.isNone||this.isNone)return e.fromLike([]);if(e.isAll)return t.all();var r;if(this.isIdentityRange){var i=this.arr[0].to;r=function(t,e){t>=0&&t<i&&e.push(t)}}else{var o=this.iter().asList();r=function(t,e){var n=o.indexOf(t);n>=0&&e.push(n)}}if("function"==typeof e.fromLikeComposite){var s=e;return s.fromLikeComposite(s.groups.map(function(t){var e=[];return t.forEach(function(t){return r(t,e)}),t.fromLike(e)}))}var a=[];return e.forEach(function(t){return r(t,a)}),e.fromLike(a)},t.prototype.filter=function(t,e,n){if(void 0===n&&(n=function(t){return t}),this.isAll)return t.map(n);var r=this.iter(e);if(r.byOne&&r instanceof o.Iterator)return t.slice(r.from,r.to).map(n);for(var i=[];r.hasNext();)i.push(n(t[r.next()]));return i},t.prototype.iter=function(t){if(this.isList)return n.i(o.forList)(this.arr.map(function(t){return t.from}));var e=this.arr.map(function(e){return e.iter(t)});return o.concat.apply(null,e)},Object.defineProperty(t.prototype,"__iterator__",{get:function(){return this.iter()},enumerable:!0,configurable:!0}),t.prototype.asList=function(t){return this.iter(t).asList()},Object.defineProperty(t.prototype,"first",{get:function(){return this.isNone?null:this.arr[0].from},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"last",{get:function(){return this.isNone?null:this.arr[this.arr.length-1].from},enumerable:!0,configurable:!0}),t.prototype.forEach=function(t,e){return this.iter().forEach(t,e)},t.prototype.contains=function(t,e){return this.arr.some(function(n){return n.contains(t,e)})},t.prototype.sort=function(t){void 0===t&&(t=r);var e=this.iter().asList(),n=e.sort(t);return this.fromLike(n)},t.prototype.removeDuplicates=function(e){var n=this.iter().asList();return n=n.sort(r),n=n.filter(function(t,e){return t!==n[e-1]}),t.from(n)},t.prototype.reverse=function(){var e=this.arr.map(function(t){return t.reverse()});return e.reverse(),new t(e)},t.prototype.toString=function(){return this.isAll?"":1===this.length?this.arr[0].toString():"("+this.arr.join(",")+")"},t.prototype.eq=function(t){return!!(this===t||this.isAll&&t.isAll||this.isNone&&t.isNone)||this.toString()===t.toString()},t.prototype.fromLike=function(e){return t.from(e)},t}();e.a=s},function(t,e,n){"use strict";function r(t){if(t){var e=t.desc||t;D.delete(e.id),I.delete(e.name),T.delete(e.fqname)}else D.clear(),I.clear(),T.clear()}function i(){return Promise.all(Array.from(D.values()))}function o(t,e){return D.set(t.id,e),T.set(t.fqname,e),I.set(t.name,e),e}function s(t){return E.b(this,void 0,void 0,function(){var e;return E.c(this,function(r){return void 0===t?[2,null]:(t.id=t.id||n.i(P.fixId)(t.name+n.i(P.randomId)(5)),t.fqname=t.fqname||t.name,t.description=t.description||"",t.creator=t.creator||"Anonymous",t.ts=t.ts||0,D.has(t.id)?[2,D.get(t.id)]:(e=M.filter(function(e){return e.id===t.type}),0===e.length?[2,o(t,Promise.resolve(new A.DummyDataType(t)))]:[2,o(t,e[0].load().then(function(e){return e.factory(t)}))]))})})}function a(t){return E.b(this,void 0,void 0,function(){var e,r,o;return E.c(this,function(a){return e="function"==typeof t?t:null,r=void 0!==t&&"function"!=typeof t?t:{},o=P.offline?i():n.i(O.getAPIJSON)("/dataset/",r).then(function(t){return Promise.all(t.map(s))}),null!==e&&(o=o.then(function(t){return t.filter(e)})),[2,o]})})}function u(t){var e={children:[],name:"/",data:null};return t.forEach(function(t){var n=t.desc.fqname.split("/"),r=e;n.forEach(function(t){var e=r.children.find(function(e){return e.name===t});e||(e={children:[],name:t,data:null},r.children.push(e)),r=e}),r.data=t}),e}function c(t){return E.b(this,void 0,void 0,function(){var e;return E.c(this,function(n){switch(n.label){case 0:return e=u,[4,a(t)];case 1:return[2,e.apply(void 0,[n.sent()])]}})})}function p(t){return E.b(this,void 0,void 0,function(){var e,n;return E.c(this,function(r){switch(r.label){case 0:return"string"==typeof t||t instanceof RegExp?[2,l(t)]:(e=t,e.limit=1,[4,a(e)]);case 1:return n=r.sent(),0===n.length?[2,Promise.reject({error:"nothing found, matching",args:e})]:[2,Promise.resolve(n[0])]}})})}function l(t){return h(t,I,"name")}function f(t){return h(t,T,"fqname")}function h(t,e,n){for(var r="string"==typeof t?new RegExp(t):t,i=0,o=Array.from(e.entries());i<o.length;i++){var s=o[i],a=s[0],u=s[1];if(r.test(a))return u}return p((c={},c[n]="string"==typeof t?t:t.source,c));var c}function d(t){return E.b(this,void 0,void 0,function(){var e;return E.c(this,function(r){switch(r.label){case 0:return D.has(t)?[2,D.get(t)]:(e=s,[4,n.i(O.getAPIJSON)("/dataset/"+t+"/desc")]);case 1:return[2,e.apply(void 0,[r.sent()])]}})})}function y(t){return E.b(this,void 0,void 0,function(){var e;return E.c(this,function(n){switch(n.label){case 0:return"string"==typeof t?[2,d(t)]:t.root?[4,y(t.root)]:[3,2];case 1:return e=n.sent(),[2,e?e.restore(t):null];case 2:return[2,Promise.reject("cannot restore non root and non data id")]}})})}function g(t){return s(t)}function v(t,e){var n=new FormData;return n.append("desc",JSON.stringify(t)),e&&n.append("file",e),n}function _(t,e){return E.b(this,void 0,void 0,function(){var r;return E.c(this,function(i){switch(i.label){case 0:return t=v(t,e),r=s,[4,n.i(O.sendAPI)("/dataset/",t,"POST")];case 1:return[2,r.apply(void 0,[i.sent()])]}})})}function m(t,e,i){return E.b(this,void 0,void 0,function(){var o;return E.c(this,function(a){switch(a.label){case 0:return e=v(e,i),[4,n.i(O.sendAPI)("/dataset/"+t.desc.id,e,"PUT")];case 1:return o=a.sent(),r(t),[2,s(o)]}})})}function b(t,e,i){return E.b(this,void 0,void 0,function(){var o;return E.c(this,function(a){switch(a.label){case 0:return e=v(e,i),[4,n.i(O.sendAPI)("/dataset/"+t.desc.id,e,"POST")];case 1:return o=a.sent(),r(t),[2,s(o)]}})})}function x(t){return E.b(this,void 0,void 0,function(){var e;return E.c(this,function(i){switch(i.label){case 0:return e=t.desc||t,[4,n.i(O.sendAPI)("/dataset/"+e.id,{},"DELETE")];case 1:return i.sent(),r(e),[2,!0]}})})}Object.defineProperty(e,"__esModule",{value:!0});var E=n(0),P=n(2),O=n(9),w=n(7),A=n(3);n.d(e,"random_id",function(){return P.random_id}),n.d(e,"fixId",function(){return P.fixId}),e.clearCache=r,e.list=a,e.convertToTree=u,e.tree=c,e.getFirst=p,e.getFirstByName=l,e.getFirstByFQName=f,e.get=y,e.create=g,e.upload=_,e.update=m,e.modify=b,e.remove=x;var M=n.i(w.list)("datatype"),D=new Map,I=new Map,T=new Map},function(t,e,n){"use strict";var r=n(0),i=n(6);n.d(e,"a",function(){return o});var o={makeNode:function(t){return(new i.b).restore(t)},makeEdge:function(t,e){return(new i.a).restore(t,e)}},s=function(t){function e(e,n,r){void 0===n&&(n=[]),void 0===r&&(r=[]);var i=t.call(this)||this;return i.desc=e,i._nodes=n,i._edges=r,i}return r.a(e,t),Object.defineProperty(e.prototype,"nodes",{get:function(){return this._nodes},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"edges",{get:function(){return this._edges},enumerable:!0,configurable:!0}),e.prototype.migrate=function(){return{nodes:this.nodes,edges:this.edges}},e.prototype.addNode=function(t){return this.nodes.push(t),this.fire("add_node",t),this},e.prototype.updateNode=function(t){return this.fire("update_node",t),this},e.prototype.removeNode=function(t){var e=this.nodes.indexOf(t);return e<0?null:(this.nodes.splice(e,1),this.fire("remove_node",t),this)},e.prototype.addEdge=function(t,e,n){if(t instanceof i.a){var r=t;return this.edges.push(r),this.fire("add_edge",r,r.type,r.source,r.target),this}return this.addEdge(new i.a(e,t,n))},e.prototype.updateEdge=function(t){return this.fire("update_edge",t),this},e.prototype.removeEdge=function(t){var e=this.edges.indexOf(t);return e<0?null:(t.takeDown(),this.edges.splice(e,1),this.fire("remove_edge",t),this)},e.prototype.clear=function(){return this.nodes.splice(0,this.nodes.length),this.edges.splice(0,this.edges.length),Promise.resolve(this)},e.prototype.persist=function(){var t={root:this.desc.id};return t.nodes=this.nodes.map(function(t){return t.persist()}),t.edges=this.edges.map(function(t){return t.persist()}),t},e.prototype.restore=function(t){return this},e}(i.c);e.b=s},function(t,e,n){"use strict";function r(t){return t.filter(function(t){return"noop"!==t.f_id})}function i(t){return function(e){e=r(e);var n;do{n=e.length,t.forEach(function(t){return e=t(e)})}while(n>e.length);return e}}function o(t){return y.b(this,void 0,void 0,function(){var e,r;return y.c(this,function(o){switch(o.label){case 0:return e=n.i(b.list)("actionCompressor").filter(function(e){return t.some(function(t){return null!=t.f_id.match(e.matches)})}),r=i,[4,n.i(b.load)(e)];case 1:return[2,r.apply(void 0,[o.sent().map(function(t){return t.factory})])]}})})}function s(t){return y.b(this,void 0,void 0,function(){var e,n;return y.c(this,function(r){switch(r.label){case 0:return t.length<=1?[2,t]:[4,o(t)];case 1:e=r.sent();do{n=t.length,t=e(t)}while(n>t.length);return[2,t]}})})}function a(t,e){for(var n=0;n<t.length&&n<e.length&&t[n]===e[n];)n++;return 0===n?null:{i:n-1,j:n-1}}function u(t){return"function"!=typeof t?function(){return t}:t}function c(t,e){return{inverse:p()}}function p(){return{meta:n.i(P.d)("noop",x.b.custom),id:"noop",f:c,inputs:[],parameter:{}}}function l(){function t(t){if("noop"===t)return n.i(A.a)(c);var i=r.find(function(e){return e.id===t});if(i)return i.load().then(function(t){return t.factory});var o=e.find(function(e){return null!=t.match(e.creates)});return o?o.load().then(function(e){return e.factory(t)}):Promise.reject("no factory found for "+t)}var e=n.i(b.list)("actionFactory"),r=n.i(b.list)("actionFunction"),i=function(e){var n=null;return function(r,i){var o=this,s=Array.from(arguments);return null==n&&(n=t(e)),n.then(function(t){return t.apply(o,s)})}};return function(t){return i(t)}}function f(){var t=l(),e={action:P.a,state:E.a,object:x.a,story:O.a};return{makeNode:function(n){return e[n.type].restore(n,t)},makeEdge:function(t,e){return(new w.a).restore(t,e)}}}function h(t){for(var e=[];t;){if(e.indexOf(t)>=0)return e;e.push(t),t=t.next}return e}function d(t){return function(e){return t===e||(null===e.value||e.value===t.value)&&t.hash===e.hash}}var y=n(0),g=n(2),v=n(4),_=n(1),m=n(3),b=n(7),x=n(34),E=n(60),P=n(56),O=n(59),w=n(6),A=n(8);e.b=s,e.d=f,n.d(e,"c",function(){return M}),e.e=h;var M;!function(t){t[t.Action=0]="Action",t[t.Object=1]="Object",t[t.State=2]="State",t[t.Slide=3]="Slide"}(M||(M={}));var D=function(t){function e(n,r){var i=t.call(this,n)||this;if(i.backend=r,i._actions=[],i._objects=[],i._states=[],i._slides=[],i.act=null,i.lastAction=null,i.currentlyRunning=!1,i.executeCurrentActionWithin=-1,i.nextQueue=[],i.propagate.apply(i,[i.backend].concat(e.PROPAGATED_EVENTS)),0===i.backend.nnodes)i.act=new E.a("Start"),i._states.push(i.act),i.backend.addNode(i.act);else{var o=n.act;i._actions=i.backend.nodes.filter(function(t){return t instanceof P.a}),i._objects=i.backend.nodes.filter(function(t){return t instanceof x.a}),i._states=i.backend.nodes.filter(function(t){return t instanceof E.a}),i._slides=i.backend.nodes.filter(function(t){return t instanceof O.a}),i.act=o>=0?i.getStateById(o):i._states[0]}return i}return y.a(e,t),e.prototype.migrateBackend=function(t){this.stopPropagation.apply(this,[this.backend].concat(e.PROPAGATED_EVENTS)),this.backend=t,this.propagate.apply(this,[this.backend].concat(e.PROPAGATED_EVENTS)),this.desc=t.desc},Object.defineProperty(e.prototype,"isEmpty",{get:function(){return this._states.length<=1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dim",{get:function(){return[this._actions.length,this._objects.length,this._states.length,this._slides.length]},enumerable:!0,configurable:!0}),e.prototype.ids=function(t){void 0===t&&(t=n.i(_.all)());var e=function(t){return t.id},r=_.Range1D.from(this._actions.map(e)),i=_.Range1D.from(this._objects.map(e)),o=_.Range1D.from(this._states.map(e)),s=_.Range1D.from(this._slides.map(e));return Promise.resolve(t.preMultiply(n.i(_.list)(r,i,o,s)))},e.prototype.selectState=function(t,e,n,r){void 0===e&&(e=v.SelectOperation.SET),void 0===n&&(n=v.defaultSelectionType),void 0===r&&(r={}),this.fire("select_state,select_state_"+n,t,n,e,r),this.select(M.State,n,t?[this._states.indexOf(t)]:[],e)},e.prototype.selectSlide=function(t,e,n,r){void 0===e&&(e=v.SelectOperation.SET),void 0===n&&(n=v.defaultSelectionType),void 0===r&&(r={}),this.fire("select_slide,select_slide_"+n,t,n,e,r),this.select(M.Slide,n,t?[this._slides.indexOf(t)]:[],e)},e.prototype.selectAction=function(t,e,n){void 0===e&&(e=v.SelectOperation.SET),void 0===n&&(n=v.defaultSelectionType),this.fire("select_action,select_action_"+n,t,n,e),this.select(M.Action,n,t?[this._actions.indexOf(t)]:[],e)},e.prototype.selectedStates=function(t){void 0===t&&(t=v.defaultSelectionType);var e=this.idtypes[M.State].selections(t);if(e.isNone)return[];var n=new Map;this._states.forEach(function(t){return n.set(t.id,t)});var r=[];return e.dim(0).forEach(function(t){var e=n.get(t);e&&r.push(e)}),r},e.prototype.selectedSlides=function(t){void 0===t&&(t=v.defaultSelectionType);var e=this.idtypes[M.Slide].selections(t);if(e.isNone)return[];var n=new Map;this._slides.forEach(function(t){return n.set(t.id,t)});var r=[];return e.dim(0).forEach(function(t){var e=n.get(t);e&&r.push(e)}),r},Object.defineProperty(e.prototype,"idtypes",{get:function(){return["_provenance_actions","_provenance_objects","_provenance_states","_provenance_stories"].map(v.resolve)},enumerable:!0,configurable:!0}),e.prototype.clear=function(){var t=this.backend.clear();return this._states=[],this._actions=[],this._objects=[],this._slides=[],this.act=null,this.lastAction=null,this.act=new E.a("start"),this._states.push(this.act),this.backend.addNode(this.act),this.fire("clear"),Promise.resolve(t)},Object.defineProperty(e.prototype,"states",{get:function(){return this._states},enumerable:!0,configurable:!0}),e.prototype.getStateById=function(t){return this._states.find(function(e){return e.id===t})},Object.defineProperty(e.prototype,"actions",{get:function(){return this._actions},enumerable:!0,configurable:!0}),e.prototype.getActionById=function(t){return this._actions.find(function(e){return e.id===t})},Object.defineProperty(e.prototype,"objects",{get:function(){return this._objects},enumerable:!0,configurable:!0}),e.prototype.getObjectById=function(t){return this._objects.find(function(e){return e.id===t})},Object.defineProperty(e.prototype,"stories",{get:function(){return this._slides},enumerable:!0,configurable:!0}),e.prototype.getSlideById=function(t){return this._slides.find(function(e){return e.id===t})},e.prototype.getSlideChains=function(){return this.stories.filter(function(t){return t.isStart})},e.prototype.getSlides=function(){return this.getSlideChains().map(h)},Object.defineProperty(e.prototype,"edges",{get:function(){return this.backend.edges},enumerable:!0,configurable:!0}),e.prototype.addEdge=function(t,e,n,r){void 0===r&&(r={});var i=new w.a(e,t,n);return Object.keys(r).forEach(function(t){return i.setAttr(t,r[t])}),this.backend.addEdge(i),i},e.prototype.createAction=function(t,e,n,r,i){void 0===r&&(r=[]),void 0===i&&(i={});var o=new P.a(t,e,n,i);return this.initAction(o,r)},e.prototype.initAction=function(t,n){var r=this;void 0===n&&(n=[]);var i=n.map(function(t){return e.findInArray(r._objects,t)});return this._actions.push(t),this.backend.addNode(t),this.fire("add_action",t),i.forEach(function(e,n){r.addEdge(t,"requires",e,{index:n})}),t},e.prototype.createInverse=function(t,e){var n=this,r=t.creates,i=t.removes,o=e.call(t,t.requires,r,i),s=this.createAction(o.meta,o.id,o.f,o.inputs,o.parameter);return s.onceExecuted=!0,this.addEdge(s,"inverses",t),i.forEach(function(t,e){n.addEdge(s,"creates",t,{index:e})}),r.forEach(function(t){n.addEdge(s,"removes",t)}),this.addEdge(t.resultsIn,"next",s),this.addEdge(s,"resultsIn",t.previous),s},e.prototype.push=function(t,e,n,r,i){var o=this;return void 0===e&&(e=""),void 0===n&&(n=null),void 0===r&&(r=[]),void 0===i&&(i={}),this.inOrder(function(){if(t instanceof P.c)return o.run(o.createAction(t,e,n,r,i),null);var s=t;return o.run(o.createAction(s.meta,s.id,s.f,s.inputs||[],s.parameter||{}),null)})},e.prototype.pushWithResult=function(t,e){var n=this;return this.inOrder(function(){var r=n.createAction(t.meta,t.id,t.f,t.inputs||[],t.parameter||{});return n.run(r,e)})},e.prototype.findObject=function(t){var e=this._objects.find(function(e){return e.value===t});return e||null},e.prototype.addObject=function(t,e,n,r){return void 0===e&&(e=t?t.toString():"Null"),void 0===n&&(n=x.b.data),void 0===r&&(r=e+"_"+n),this.addObjectImpl(t,e,n,r,!0)},e.prototype.addJustObject=function(t,e,n,r){return void 0===e&&(e=t?t.toString():"Null"),void 0===n&&(n=x.b.data),void 0===r&&(r=e+"_"+n),this.addObjectImpl(t,e,n,r,!1)},e.prototype.addObjectImpl=function(t,e,n,r,i){void 0===e&&(e=t?t.toString():"Null"),void 0===n&&(n=x.b.data),void 0===r&&(r=e+"_"+n),void 0===i&&(i=!1);var o=new x.a(t,e,n,r);return this._objects.push(o),this.backend.addNode(o),i&&this.addEdge(this.act,"consistsOf",o),this.fire("add_object",o),o},e.prototype.resolve=function(t){var e=this;return t.map(function(t){if(t instanceof x.a)return t;if(t._resolvesTo instanceof x.a)return t._resolvesTo;var n=e.addJustObject(t.value,t.name,t.category,t.hash);return t._resolvesTo=n,n})},e.findInArray=function(t,e){if(e instanceof x.a)return e;if(e._resolvesTo instanceof x.a)return e._resolvesTo;var n=t.find(d(e));return e._resolvesTo=n,n},e.prototype.findOrAddObject=function(t,e,n){return this.findOrAddObjectImpl(t,e,n,!0)},e.prototype.findOrAddJustObject=function(t,e,n){return this.findOrAddObjectImpl(t,e,n,!1)},e.prototype.findOrAddObjectImpl=function(t,e,n,r){void 0===r&&(r=!1);var i,o=t;return t instanceof x.a?t:o._resolvesTo instanceof x.a?o._resolvesTo:o.hasOwnProperty("value")&&o.hasOwnProperty("name")?(o.category=o.category||x.b.data,i=this._objects.find(d(o)),i?(null===i.value&&(i.value=o.value),o._resolvesTo=i,i):this.addObjectImpl(o.value,o.name,o.category,o.hash,r)):(i=this._objects.find(function(r){return!(null!==r.value&&r.value!==t||null!==e&&r.name!==e||null!==n&&n!==r.category)}),i?(null===i.value&&(i.value=t),i):this.addObjectImpl(t,e,n,e+"_"+n,r))},e.prototype.inOrder=function(t){var e=this;if(this.currentlyRunning){var n,r=new Promise(function(t){n=t.bind(e)});return this.nextQueue.push(n),r.then(t)}return t()},e.prototype.executedAction=function(t,r,i){var o=this,s=this.act,a=t.resultsIn;i=n.i(g.mixin)({created:[],removed:[],inverse:null,consumed:0},i),this.fire("executed",t,i);var c=!t.onceExecuted;t.onceExecuted=!0;var p,l;if(c){p=this.resolve(i.created),p.forEach(function(e,n){o.addEdge(t,"creates",e,{index:n})});var f=t.requires;if(l=i.removed.map(function(t){return e.findInArray(f,t)}),l.forEach(function(e){e.value=null,o.addEdge(t,"removes",e)}),r){var h=s.consistsOf;h.push.apply(h,p),l.forEach(function(t){var e=h.indexOf(t);h.splice(e,1)}),h.forEach(function(t){return o.addEdge(a,"consistsOf",t)})}this.fire("executed_first",t,a)}else p=t.creates,p.forEach(function(t,e){t.value=i.created[e].value}),l=t.removes,l.forEach(function(t){return t.value=null});return i.inverse=u(i.inverse),t.updateInverse(this,i.inverse),this.switchToImpl(t,a),{action:t,state:a,created:p,removed:l,consumed:i.consumed}},e.prototype.run=function(t,e,r){var i=this;void 0===r&&(r=-1);var o=t.resultsIn,s=!1;o||(s=!0,this.addEdge(this.act,"next",t),o=this.makeState(t.meta.name),this.addEdge(t,"resultsIn",o)),this.fire("execute",t),g.hash.has("debug")&&console.log("execute "+t.meta+" "+t.f_id),this.currentlyRunning=!0,"function"==typeof r&&(r=r()),this.executeCurrentActionWithin=r;var a=(e?n.i(A.a)(e):t.execute(this,this.executeCurrentActionWithin)).then(this.executedAction.bind(this,t,s));return a.then(function(t){var e=i.nextQueue.shift();e?e():i.currentlyRunning=!1}),a},e.prototype.switchToImpl=function(t,e){var n=this.act;this.act=e,this.fire("switch_state",e,n),n=this.lastAction,this.lastAction=t,this.fire("switch_action",t,n)},e.prototype.runChain=function(t,e){return void 0===e&&(e=-1),y.b(this,void 0,void 0,function(){function r(t){var e=a.length-t;return function(){return u<0?-1:u/e}}function i(t){u-=t}var o,a,u,c,p,l,f;return y.c(this,function(h){switch(h.label){case 0:return 0===t.length?e>0?[2,n.i(g.resolveIn)(e).then(function(){return[]})]:[2,n.i(A.a)([])]:(o=t[t.length-1],[4,s(t)]);case 1:a=h.sent(),u=e,this.fire("run_chain",a),c=[],p=0,h.label=2;case 2:return p<a.length?(l=a[p],[4,this.run(l,null,e<0?-1:r(p))]):[3,5];case 3:f=h.sent(),c.push(f),i(f.consumed),h.label=4;case 4:return++p,[3,2];case 5:return this.act!==o.resultsIn&&this.switchToImpl(o,o.resultsIn),this.fire("ran_chain",this.act,a),[2,c]}})})},e.prototype.undo=function(){var t=this;return this.lastAction?null!=this.lastAction.inverses?this.jumpTo(this.act.previousState):this.inOrder(function(){return t.run(t.lastAction.getOrCreateInverse(t),null)}):n.i(A.a)(null)},e.prototype.jumpTo=function(t,e){var r=this;return void 0===e&&(e=-1),this.inOrder(function(){var i=[],o=r.act;if(o===t)return e>=0?n.i(g.resolveIn)(e).then(function(){return[]}):n.i(A.a)([]);var s=o.path,u=t.path,c=a(s,u);if(c){var p=s.slice(c.i+1).reverse(),l=u.slice(c.j+1);i=i.concat(p.map(function(t){return t.resultsFrom[0].getOrCreateInverse(r)})),i=i.concat(l.map(function(t){return t.resultsFrom[0]}))}return r.runChain(i,e)})},e.prototype.fork=function(t,e,n){var r=this;void 0===n&&(n=[]);for(var i=[],o=[t.resultsIn];o.length>0;){var s=o.shift();i.indexOf(s)>=0||(i.push(s),o.push.apply(o,s.nextStates))}if(i.indexOf(e)>=0)return!1;var a=e.consistsOf,u=t.previous.consistsOf,c=u.filter(function(t){return a.indexOf(t)<0}),p={};return n.forEach(function(t){return p[r.findOrAddObject(t.from).id]=t.to}),this.copyBranch(t,e,c,p),this.fire("forked_branch",t,e),!0},e.prototype.copyAction=function(t,e,n){var r=this.initAction(t.clone(),t.requires.map(function(t){return n[String(t.id)]||t}));this.addEdge(e,"next",r);var i=this.makeState(t.resultsIn.name,t.resultsIn.description);return this.addEdge(r,"resultsIn",i),i},e.prototype.copyBranch=function(t,e,n,r){for(var i=[{a:t,b:e}],o=this;i.length>0;)!function(){var t=i.shift(),e=t.b,s=t.a;s.requires.some(function(t){return n.indexOf(t)>=0&&!(String(t.id)in r)})||(e=o.copyAction(s,t.b,r)),i.push.apply(i,s.resultsIn.next.map(function(t){return{a:t,b:e}}))}()},e.prototype.makeState=function(t,e){void 0===e&&(e="");var n=new E.a(t,e);return this._states.push(n),this.backend.addNode(n),this.fire("add_state",n),n},e.prototype.persist=function(){var t=this.backend.persist();return t.act=this.act?this.act.id:null,t.lastAction=this.lastAction?this.lastAction.id:null,t},e.prototype.wrapAsSlide=function(t){var e=new O.a;return e.name=t.name,this.addEdge(e,"jumpTo",t),this._slides.push(e),this.backend.addNode(e),this.fire("add_slide",e),e},e.prototype.cloneSingleSlideNode=function(t){var e=null!=t.state?this.wrapAsSlide(t.state):this.makeTextSlide();return t.attrs.forEach(function(n){"annotations"!==n&&e.setAttr(n,t.getAttr(n,null))}),e.setAttr("annotations",t.annotations.map(function(t){return n.i(g.mixin)({},t)})),e},e.prototype.extractSlide=function(t,e){var n=this;void 0===e&&(e=!0);var r=function(t){return n._slides.push(t),n.backend.addNode(t),n.fire("add_slide",t),t},i=e?r(O.a.makeText("Unnamed Story")):null,o=i;if(t.forEach(function(t,e){var s=r(new O.a);s.name=t.name,n.addEdge(s,"jumpTo",t),o?n.addEdge(o,"next",s):i=s,o=s}),e){var s=O.a.makeText("Thanks");r(s),this.addEdge(o,"next",s)}return this.fire("extract_slide",i),this.selectSlide(i),i},e.prototype.startNewSlide=function(t,e){void 0===e&&(e=[]);var n=this.makeTextSlide(t);if(e.length>0){var r=this.extractSlide(e,!1);this.addEdge(n,"next",r)}return this.fire("start_slide",n),n},e.prototype.makeTextSlide=function(t){var e=O.a.makeText(t);return this._slides.push(e),this.backend.addNode(e),this.fire("add_slide",e),e},e.prototype.insertIntoSlide=function(t,e,n){void 0===n&&(n=!1),this.moveSlide(t,e,n)},e.prototype.appendToSlide=function(t,e){var n=h(t);return this.moveSlide(e,n[n.length-1],!1)},e.prototype.moveSlide=function(t,e,n){var r=this;if(void 0===n&&(n=!1),!(n&&t.next===e||!n&&t.previous===e)){var i=t.previous;if(i&&t.nexts.forEach(function(t){r.addEdge(i,"next",t)}),this.edges.filter(function(e){return(e.source===t||e.target===t)&&"next"===e.type}).forEach(function(t){r.backend.removeEdge(t)}),n){var o=e.previous;o&&(this.edges.filter(function(t){return t.target===e&&"next"===t.type}).forEach(function(t){r.backend.removeEdge(t)}),this.addEdge(o,"next",t),this.addEdge(t,"next",e)),this.addEdge(t,"next",e)}else{var s=e.nexts;s.length>0&&(this.edges.filter(function(t){return t.source===e&&"next"===t.type}).forEach(function(t){r.backend.removeEdge(t)}),s.forEach(function(e){r.addEdge(t,"next",e)})),this.addEdge(e,"next",t)}this.fire("move_slide",t,e,n)}},e.prototype.removeSlideNode=function(t){var e=this,n=t.previous;n&&t.nexts.forEach(function(t){e.addEdge(n,"next",t)}),this.edges.filter(function(e){return e.source===t||e.target===t}).forEach(function(t){e.backend.removeEdge(t)}),this._slides.splice(this._slides.indexOf(t),1),this.backend.removeNode(t),this.fire("remove_slide",t)},e.prototype.removeFullSlide=function(t){for(;t.previous;)t=t.previous;for(var e=t;t;){var n=t.next;this.removeSlideNode(t),t=n}this.fire("destroy_slide",e)},e.prototype.setSlideJumpToTarget=function(t,e){var r=t.outgoing.filter(n.i(w.d)("jumpTo"))[0];r&&this.backend.removeEdge(r),e&&this.addEdge(t,"jumpTo",e),this.fire("set_jump_target",t,r?r.target:null,e)},e.PROPAGATED_EVENTS=["sync","add_edge","add_node","sync_node","sync_edge","sync_start"],e}(m.ADataType);e.a=D},function(t,e,n){"use strict";function r(){n.i(x.remove)("logged_in"),n.i(x.remove)("username"),n.i(x.remove)("user")}function i(){return!0===n.i(x.retrieve)("logged_in")}function o(t){n.i(x.store)("logged_in",!0),n.i(x.store)("username",t.name),n.i(x.store)("user",t),n.i(P.list)(O.EP_PHOVEA_CORE_LOGIN).map(function(e){e.load().then(function(e){return e.factory(t)})}),n.i(E.fire)(A,t)}function s(){var t=i();r(),t&&(n.i(P.list)(O.EP_PHOVEA_CORE_LOGOUT).map(function(t){t.load().then(function(t){return t.factory()})}),n.i(E.fire)(M))}function a(){return i()?n.i(x.retrieve)("user",D):null}function u(){var t=a();return t?t.name:D.name}function c(t){return(t.has(w.READ)?4:0)+(t.has(w.WRITE)?2:0)+(t.has(w.EXECUTE)?1:0)}function p(t){return(t.has(w.READ)?"r":"-")+(t.has(w.WRITE)?"w":"-")+(t.has(w.EXECUTE)?"x":"-")}function l(t){var e=new Set;return t>=4&&(e.add(w.READ),t-=4),t>=2&&(e.add(w.WRITE),t-=2),t>=1&&e.add(w.EXECUTE),e}function f(t,e,n,r){void 0===r&&(r=new Set);var i=c(t),o=c(e),s=c(n);return 1e3*c(r)+100*i+10*o+s}function h(t){void 0===t&&(t=j),"number"!=typeof t&&(t=j);var e=l(t%10),n=l(Math.floor(t/10)%10),r=l(Math.floor(t/100)%10),i=l(Math.floor(t/1e3)%10);return new k(r,n,e,i)}function d(t,e){return t===e||null!==t&&null!==e&&(t=t.toLowerCase(),e=e.toLowerCase(),0===t.localeCompare(e))}function y(t,e){return!!e&&t.some(function(t){return d(e,t)})}function g(t,e,n){void 0===n&&(n=a()),n||(n=D);var r=h(t.permissions);return!(!d(n.name,t.creator)||!r.user.has(e))||(!!(t.group&&y(n.roles,t.group)&&r.group.has(e))||(!!(t.buddies&&Array.isArray(t.buddies)&&y(t.buddies,n.name)&&r.buddies.has(e))||r.others.has(e)))}function v(t,e){return void 0===e&&(e=a()),g(t,w.READ,e)}function _(t,e){return void 0===e&&(e=a()),g(t,w.WRITE,e)}function m(t,e){return void 0===e&&(e=a()),g(t,w.EXECUTE,e)}function b(t,e,n){return void 0===e&&(e=I.USER),void 0===n&&(n=w.READ),h(t.permissions).hasPermission(e,n)}Object.defineProperty(e,"__esModule",{value:!0});var x=n(63),E=n(5),P=n(7),O=n(24);n.d(e,"GLOBAL_EVENT_USER_LOGGED_IN",function(){return A}),n.d(e,"GLOBAL_EVENT_USER_LOGGED_OUT",function(){return M}),n.d(e,"ANONYMOUS_USER",function(){return D}),e.reset=r,e.isLoggedIn=i,e.login=o,e.logout=s,e.currentUser=a,e.currentUserNameOrAnonymous=u,n.d(e,"EPermission",function(){return w}),n.d(e,"EEntity",function(){return I}),n.d(e,"ALL_READ_READ",function(){return T}),n.d(e,"ALL_NONE_NONE",function(){return S}),n.d(e,"ALL_READ_NONE",function(){return L}),n.d(e,"DEFAULT_PERMISSION",function(){return j}),n.d(e,"ALL_ALL_READ_READ",function(){return R}),n.d(e,"ALL_ALL_NONE_NONE",function(){return N}),n.d(e,"ALL_ALL_READ_NONE",function(){return C}),n.d(e,"Permission",function(){return k}),e.encode=f,e.decode=h,e.canRead=v,e.canWrite=_,e.canExecute=m,e.hasPermission=b;var w,A="USER_LOGGED_IN",M="USER_LOGGED_OUT",D={name:"anonymous",roles:["anonymous"]};!function(t){t[t.READ=4]="READ",t[t.WRITE=2]="WRITE",t[t.EXECUTE=1]="EXECUTE"}(w||(w={}));var I;!function(t){t[t.USER=0]="USER",t[t.GROUP=1]="GROUP",t[t.OTHERS=2]="OTHERS",t[t.BUDDIES=3]="BUDDIES"}(I||(I={}));var T=744,S=700,L=740,j=T,R=7744,N=7700,C=7740,k=function(){function t(t,e,n,r){void 0===r&&(r=new Set),this.user=t,this.group=e,this.others=n,this.buddies=r}return t.prototype.encode=function(){return f(this.user,this.group,this.others)},t.prototype.toString=function(){return p(this.user)+p(this.group)+p(this.others)},t.prototype.getPermissions=function(t){switch(t){case I.USER:return this.user;case I.GROUP:return this.group;case I.OTHERS:return this.others}},t.prototype.hasPermission=function(t,e){return this.getPermissions(t).has(e)},t}()},function(t,e,n){"use strict";var r=n(0),i=n(12),o=n(1),s=n(2),a=function(t){function e(e){var n=t.call(this,null)||this;return n.base=e,n.desc={type:"vector",name:e.desc.name,fqname:e.desc.fqname,description:e.desc.description,id:e.desc.id+"_names",value:{type:"string"},idtype:n.idtype.id,size:n.length,ts:e.desc.ts,creator:e.desc.creator,group:e.desc.group,permissions:e.desc.permissions},n}return r.a(e,t),Object.defineProperty(e.prototype,"valuetype",{get:function(){return this.desc.value},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"idtype",{get:function(){return null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"idtypes",{get:function(){return[this.idtype]},enumerable:!0,configurable:!0}),e.prototype.persist=function(){return{root:this.base.persist(),names:!0}},e.prototype.restore=function(t){var e=this;return t&&t.range&&(e=e.view(n.i(o.parse)(t.range))),e},e.prototype.at=function(t){return this.data(n.i(o.list)(t)).then(function(t){return t[0]})},e.prototype.data=function(t){return void 0===t&&(t=n.i(o.all)()),this.names(t)},e.prototype.sort=function(t,e){return r.b(this,void 0,void 0,function(){var i,a;return r.c(this,function(r){switch(r.label){case 0:return[4,this.data()];case 1:return i=r.sent(),a=n.i(s.argSort)(i,t,e),[2,this.view(n.i(o.list)(a))]}})})},e.prototype.filter=function(t,e){return r.b(this,void 0,void 0,function(){var i,a;return r.c(this,function(r){switch(r.label){case 0:return[4,this.data()];case 1:return i=r.sent(),a=n.i(s.argFilter)(i,t,e),[2,this.view(n.i(o.list)(a))]}})})},e}(i.a);e.a=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"EP_PHOVEA_CORE_LOGIN",function(){return r}),n.d(e,"EP_PHOVEA_CORE_LOGOUT",function(){return i}),n.d(e,"EP_PHOVEA_CORE_LOCALE",function(){return o});var r="epPhoveaCoreLogin",i="epPhoveaCoreLogout",o="epPhoveaCoreLocale"},function(t,e,n){"use strict";function r(t,e){return new p.Vector2D(t,e)}function i(t,e,n,r){return new l.a(t,e,n,r)}function o(t,e,n){return new f.a(t,e,n)}function s(t,e,n,r){return new y.a(t,e,n,r)}function a(t,e,n,r){return new d.a(t,e,n,r)}function u(){return Array.isArray(arguments[0])?new h.a(arguments[0]):new h.a(Array.from(arguments))}function c(t){if(!t)return t;if(t instanceof g.a)return t;if(t.hasOwnProperty("x")&&t.hasOwnProperty("y")){if(t.hasOwnProperty("radius")||t.hasOwnProperty("r"))return o(t.x,t.y,t.hasOwnProperty("radius")?t.radius:t.r);if((t.hasOwnProperty("radiusX")||t.hasOwnProperty("rx"))&&(t.hasOwnProperty("radiusY")||t.hasOwnProperty("ry")))return s(t.x,t.y,t.hasOwnProperty("radiusX")?t.radiusX:t.rx,t.hasOwnProperty("radiusY")?t.radiusY:t.ry);if(t.hasOwnProperty("w")&&t.hasOwnProperty("h"))return i(t.x,t.y,t.w,t.h);if(t.hasOwnProperty("width")&&t.hasOwnProperty("height"))return i(t.x,t.y,t.width,t.height)}return t.hasOwnProperty("x1")&&t.hasOwnProperty("y1")&&t.hasOwnProperty("x2")&&t.hasOwnProperty("y2")?a(t.x1,t.y1,t.x2,t.y2):Array.isArray(t)&&t.length>0&&t[0].hasOwnProperty("x")&&t[0].hasOwnProperty("y")?u(t):t}Object.defineProperty(e,"__esModule",{value:!0});var p=n(10),l=n(16),f=n(15),h=n(43),d=n(42),y=n(41),g=n(13);n.d(e,"Rect",function(){return l.a}),n.d(e,"Circle",function(){return f.a}),n.d(e,"Polygon",function(){return h.a}),n.d(e,"Line",function(){return d.a}),n.d(e,"Ellipse",function(){return y.a}),n.d(e,"AShape",function(){return g.a}),n.d(e,"CORNER",function(){return g.b}),e.vec2=r,e.rect=i,e.circle=o,e.ellipse=s,e.line=a,e.polygon=u,e.wrap=c},function(t,e,n){"use strict";function r(){return new d}function i(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 0===t.length?r():1===t.length?t[0]:new h(t)}function o(t,e,n){return new p(t,e,n)}function s(t){return new f(t)}function a(t){return new l(t)}Object.defineProperty(e,"__esModule",{value:!0});var u=n(0);n.d(e,"AIterator",function(){return c}),n.d(e,"Iterator",function(){return p}),n.d(e,"ListIterator",function(){return l}),n.d(e,"SingleIterator",function(){return f}),n.d(e,"ConcatIterator",function(){return h}),n.d(e,"EmptyIterator",function(){return d}),e.empty=r,e.concat=i,e.range=o,e.single=s,e.forList=a;var c=function(){function t(){}return t.prototype.hasNext=function(){return!1},t.prototype.next=function(){return null},t.prototype.forEach=function(t,e){for(var n=0;this.hasNext();)t.call(e,this.next(),n++)},t.prototype.map=function(t,e){return new y(this,t,e)},t.prototype.asList=function(){for(var t=[];this.hasNext();)t.push(this.next());return t},Object.defineProperty(t.prototype,"isIncreasing",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isDecreasing",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"byOne",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"byMinusOne",{get:function(){return!1},enumerable:!0,configurable:!0}),t}(),p=function(t){function e(e,n,r){var i=t.call(this)||this;return i.from=e,i.to=n,i.step=r,i.act=i.from,i}return u.a(e,t),e.prototype.hasNext=function(){return this.act!==this.to&&(this.step>0&&this.act<this.to||this.step<0&&this.act>this.to)},e.prototype.next=function(){if(!this.hasNext())throw new RangeError("end of iterator");var t=this.act;return this.act+=this.step,this.step<0&&this.act<this.to?this.act=this.to:this.step>0&&this.act>this.to&&(this.act=this.to),t},Object.defineProperty(e.prototype,"isIncreasing",{get:function(){return this.step>0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDecreasing",{get:function(){return this.step<0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"byOne",{get:function(){return 1===this.step},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"byMinusOne",{get:function(){return-1===this.step},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){if(this.byOne)return Math.max(this.to-this.from,0);if(this.byMinusOne)return Math.max(this.from-this.to,0);var t=this.isIncreasing?this.to-this.from+1:this.from-this.to+1,e=Math.abs(this.step);return t<=0?0:Math.floor(t/e)},enumerable:!0,configurable:!0}),e}(c),l=function(t){function e(e){var n=t.call(this)||this;return n.arr=e,n.it=new p(0,e.length,1),n}return u.a(e,t),e.prototype.hasNext=function(){return this.it.hasNext()},e.prototype.next=function(){if(!this.hasNext())throw new RangeError("end of iterator");return this.arr[this.it.next()]},e.prototype.asList=function(){return this.arr.slice()},e}(c),f=function(t){function e(e){var n=t.call(this)||this;return n.value=e,n.delivered=!1,n}return u.a(e,t),e.prototype.hasNext=function(){return!this.delivered},e.prototype.next=function(){if(!this.hasNext())throw new RangeError("end of iterator");return this.delivered=!0,this.value},e.prototype.asList=function(){return[this.value]},Object.defineProperty(e.prototype,"isIncreasing",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDecreasing",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"byOne",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"byMinusOne",{get:function(){return!0},enumerable:!0,configurable:!0}),e}(c),h=function(t){function e(e){var n=t.call(this)||this;return n.its=e,n.act=e.shift(),n}return u.a(e,t),e.prototype.hasNext=function(){for(var t=!1;!(t=this.act.hasNext())&&this.its.length>0;)this.act=this.its.shift();return t},e.prototype.next=function(){if(!this.hasNext())throw new RangeError("end of iterator");return this.act.next()},e.prototype.asList=function(){for(var t=[];this.hasNext();)t.push(this.next());return t},Object.defineProperty(e.prototype,"isIncreasing",{get:function(){return this.its.every(function(t){return t.isIncreasing})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDecreasing",{get:function(){return this.its.every(function(t){return t.isDecreasing})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"byOne",{get:function(){return this.its.every(function(t){return t.byOne})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"byMinusOne",{get:function(){return this.its.every(function(t){return t.byMinusOne})},enumerable:!0,configurable:!0}),e}(c),d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isIncreasing=!1,e.isDecreasing=!1,e.byOne=!1,e.byMinusOne=!1,e}return u.a(e,t),e.prototype.hasNext=function(){return!1},e.prototype.next=function(){throw new RangeError("end of iterator")},e.prototype.asList=function(){return[]},e}(c),y=function(t){function e(e,n,r){var i=t.call(this)||this;return i.it=e,i.f=n,i.thisArg=r,i}return u.a(e,t),e.prototype.hasNext=function(){return this.it.hasNext()},e.prototype.next=function(){if(!this.hasNext())throw new RangeError("end of iterator");return this.f.call(this.thisArg,this.it.next())},Object.defineProperty(e.prototype,"isIncreasing",{get:function(){return this.it.isIncreasing},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDecreasing",{get:function(){return this.it.isDecreasing},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"byOne",{get:function(){return this.it.byOne},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"byMinusOne",{get:function(){return this.it.byMinusOne},enumerable:!0,configurable:!0}),e}(c)},function(t,e,n){"use strict";function r(t,e){switch(typeof t){case"number":return e[Math.max(0,Math.min(t,e.length-1))];case"string":return e[Math.max(0,e.findIndex(function(e){return e.id===t}))];default:return e[Math.max(0,e.indexOf(t))]}}function i(t){for(var e=t.firstChild;null!=(e=t.firstChild);)t.removeChild(e)}function o(t,e,n){void 0===e&&(e="div");var r=t.ownerDocument.createElement(e);return n&&n.split(" ").forEach(function(t){return r.classList.add(t)}),t.appendChild(r),r}n.d(e,"b",function(){return s}),e.c=r,e.d=i,e.a=o;var s=function(){function t(t){this.proxy=t}return Object.defineProperty(t.prototype,"scaling",{get:function(){var t=this.proxy();return t?t.scaling:"free"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rotation",{get:function(){var t=this.proxy();return t?t.rotation:0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sizeDependsOnDataDimension",{get:function(){var t=this.proxy();return t?t.sizeDependsOnDataDimension:[!1,!1]},enumerable:!0,configurable:!0}),t}()},function(t,e,n){"use strict";function r(t,e){t.__vis__=e}function i(t){var e=t.filter;void 0===e?t.filter=function(){return!0}:"string"==typeof e?t.filter=function(t){return t&&t.desc.type&&null!=t.desc.type.match(e)}:Array.isArray(e)&&(t.filter=function(t){return t&&t&&t.desc.type&&t.desc.type.match(e[0])&&(void 0===t.desc.value||t.desc.value.type.match(e[1]))})}function o(t){"function"!=typeof t.iconify&&(t.iconify=function(t){t.title=this.name;var e=this;return e.iconcss?(t.classList.add("phovea-vis-icon"),t.classList.add(e.iconcss)):e.icon?(t.classList.add("phovea-vis-icon"),t.style.width="1em",t.style.display="inline-block",t.style.textAlign="center",t.style.backgroundSize="100%",t.style.backgroundRepeat="no-repeat",e.icon().then(function(e){t.style.backgroundImage="url("+e+")"}),t.innerHTML="&nbsp"):t.innerText=this.name.substr(0,1).toUpperCase(),t})}function s(t){t.scaling=t.scaling||"free",Array.isArray(t.sizeDependsOnDataDimension)&&"boolean"==typeof t.sizeDependsOnDataDimension[0]||("boolean"==typeof t.sizeDependsOnDataDimension?t.sizeDependsOnDataDimension=[t.sizeDependsOnDataDimension,t.sizeDependsOnDataDimension]:t.sizeDependsOnDataDimension=[!1,!1])}function a(t){var e={free:NaN,no:0,transpose:90,swap:180};"string"==typeof t.rotation&&t.rotation in e?t.rotation=e[t.rotation]:"number"==typeof t.rotation?t.rotation=+t.rotation:null===t.rotation?t.rotation=NaN:t.rotation=0}function u(t){var e=t;return i(e),o(e),s(e),a(e),e}function c(t){return n.i(f.list)("vis").map(u).filter(function(e){return e.filter(t)})}Object.defineProperty(e,"__esModule",{value:!0});var p=n(0),l=n(2),f=n(7),h=n(5);e.assignVis=r,n.d(e,"AVisInstance",function(){return d}),e.list=c;var d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.id=n.i(l.uniqueId)("vis"),e._built=!1,e}return p.a(e,t),e.prototype.option=function(t,e){return null},e.prototype.persist=function(){return null},Object.defineProperty(e.prototype,"isBuilt",{get:function(){return this._built},enumerable:!0,configurable:!0}),e.prototype.markReady=function(t){void 0===t&&(t=!0),this._built=t,t&&this.fire("ready")},e.prototype.locate=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 1===t.length?this.locateImpl(t[0]):Promise.all(t.map(this.locateImpl,this))},e.prototype.locateById=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return p.b(this,void 0,void 0,function(){var e,n=this;return p.c(this,function(r){switch(r.label){case 0:return[4,this.data.ids()];case 1:return e=r.sent(),1===t.length?[2,this.locateImpl(e.indexOf(t[0]))]:[2,Promise.all(t.map(function(t){return n.locateImpl(e.indexOf(t))}))]}})})},e.prototype.locateImpl=function(t){return Promise.resolve(null)},e.prototype.restore=function(t){return Promise.resolve(this)},e.prototype.update=function(){},e.prototype.destroy=function(){var t=this.node,e=t?t.ownerDocument.defaultView:null;!t||!t.parentNode||e&&e.event&&"DOMNodeRemoved"===e.event.type&&e.event.target===t||t.parentNode.removeChild(t),this.fire("destroyed")},e.prototype.transform=function(){return{scale:[1,1],rotate:0}},Object.defineProperty(e.prototype,"rawSize",{get:function(){return[100,100]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){var t=this.transform(),e=this.rawSize;return[e[0]*t.scale[0],e[1]*t.scale[1]]},enumerable:!0,configurable:!0}),e}(h.EventHandler)},function(t,e,n){"use strict";var r=n(0),i=n(20),o=n(6),s=n(8),a=function(t){function e(e,n,r,i){void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=sessionStorage);var s=t.call(this,e,n,r)||this;s.storage=i,s.updateHandler=function(t){var e=t.target;e instanceof o.b&&s.updateNode(e),e instanceof o.a&&s.updateEdge(e)};var a=s.uid;return(n.length>0||r.length>0)&&(s.storage.setItem(a+".nodes",JSON.stringify(n.map(function(t){return t.id}))),n.forEach(function(t){s.storage.setItem(a+".node."+t.id,JSON.stringify(t.persist())),t.on("setAttr",s.updateHandler)}),s.storage.setItem(a+".edges",JSON.stringify(r.map(function(t){return t.id}))),r.forEach(function(t){s.storage.setItem(a+".edge."+t.id,JSON.stringify(t.persist())),t.on("setAttr",s.updateHandler)})),s}return r.a(e,t),e.migrate=function(t,r){return void 0===r&&(r=sessionStorage),n.i(s.a)(t.migrate()).then(function(n){var i=n.nodes,o=n.edges;return new e(t.desc,i,o,r)})},e.prototype.migrate=function(){var e=this;return this.nodes.forEach(function(t){return t.off("setAttr",e.updateHandler)}),this.edges.forEach(function(t){return t.off("setAttr",e.updateHandler)}),t.prototype.migrate.call(this)},e.load=function(t,n,r,i){void 0===r&&(r=sessionStorage),void 0===i&&(i=!1);var o=new e(t,[],[],r);return i||o.load(n),o},e.clone=function(t,n,r){void 0===r&&(r=sessionStorage);var i=new e(t.desc,[],[],r);return i.restoreDump(t.persist(),n),i},Object.defineProperty(e.prototype,"uid",{get:function(){return"graph"+this.desc.id},enumerable:!0,configurable:!0}),e.prototype.load=function(e){var n=this,r=this.uid;if(null!=this.storage.getItem(r+".nodes")){var i=JSON.parse(this.storage.getItem(r+".nodes")),o=new Map;i.forEach(function(i){var s=JSON.parse(n.storage.getItem(r+".node."+i)),a=e.makeNode(s);o.set(a.id,a),a.on("setAttr",n.updateHandler),t.prototype.addNode.call(n,a)});JSON.parse(this.storage.getItem(r+".edges")).forEach(function(i){var s=JSON.parse(n.storage.getItem(r+".edge."+i)),a=e.makeEdge(s,o.get.bind(o));a.on("setAttr",n.updateHandler),t.prototype.addEdge.call(n,a)}),this.fire("loaded")}},e.delete=function(t,e){void 0===e&&(e=sessionStorage);var n="graph"+t.id;return JSON.parse(e.getItem(n+".nodes")||"[]").forEach(function(t){e.removeItem(n+".node."+t)}),e.removeItem(n+".nodes"),JSON.parse(e.getItem(n+".edges")||"[]").forEach(function(t){e.removeItem(n+".edge."+t)}),e.removeItem(n+".edges"),!0},e.update=function(t,e){void 0===e&&(e=sessionStorage);t.id},e.prototype.restoreDump=function(t,e){var n=this,r=new Map;return t.nodes.forEach(function(t){var i=e.makeNode(t);r.set(i.id,i),n.addNode(i)}),t.edges.forEach(function(t){var i=e.makeEdge(t,r.get.bind(r));n.addEdge(i)}),this},e.prototype.addNode=function(e){t.prototype.addNode.call(this,e);var n=this.uid;return this.storage.setItem(n+".node."+e.id,JSON.stringify(e.persist())),this.storage.setItem(n+".nodes",JSON.stringify(this.nodes.map(function(t){return t.id}))),e.on("setAttr",this.updateHandler),this},e.prototype.updateNode=function(e){t.prototype.updateNode.call(this,e);var n=this.uid;return this.storage.setItem(n+".node."+e.id,JSON.stringify(e.persist())),this},e.prototype.removeNode=function(e){if(!t.prototype.removeNode.call(this,e))return null;var n=this.uid;return this.storage.setItem(n+".nodes",JSON.stringify(this.nodes.map(function(t){return t.id}))),this.storage.removeItem(n+".node."+e.id),e.off("setAttr",this.updateHandler),this},e.prototype.addEdge=function(e,n,r){if(e instanceof o.a){t.prototype.addEdge.call(this,e);var i=e,s=this.uid;return this.storage.setItem(s+".edges",JSON.stringify(this.edges.map(function(t){return t.id}))),this.storage.setItem(s+".edge."+i.id,JSON.stringify(i.persist())),i.on("setAttr",this.updateHandler),this}return t.prototype.addEdge.call(this,e,n,r)},e.prototype.removeEdge=function(e){if(!t.prototype.removeEdge.call(this,e))return null;var n=this.uid;return this.storage.setItem(n+".edges",JSON.stringify(this.edges.map(function(t){return t.id}))),this.storage.removeItem(n+".edge."+e.id),e.off("setAttr",this.updateHandler),this},e.prototype.updateEdge=function(e){t.prototype.updateEdge.call(this,e);var n=this.uid;return this.storage.setItem(n+".edge."+e.id,JSON.stringify(e.persist())),this},e.prototype.clear=function(){var e=this,n=this.nnodes,r=this.nedges;if(0===n&&0===r)return Promise.resolve(this);this.nodes.forEach(function(t){return t.off("setAttr",e.updateHandler)}),this.edges.forEach(function(t){return t.off("setAttr",e.updateHandler)}),t.prototype.clear.call(this);var i=this.uid;return JSON.parse(this.storage.getItem(i+".nodes")).forEach(function(t){e.storage.removeItem(i+".node."+t)}),this.storage.removeItem(i+".nodes"),JSON.parse(this.storage.getItem(i+".edges")).forEach(function(t){e.storage.removeItem(i+".edge."+t)}),this.storage.removeItem(i+".edges"),Promise.resolve(this)},e.prototype.persist=function(){var t={root:this.desc.id};return t.nodes=this.nodes.map(function(t){return t.persist()}),t.edges=this.edges.map(function(t){return t.persist()}),t},e}(i.b);e.a=a},function(t,e,n){"use strict";var r=n(0),i=n(20),o=function(t){function e(e,n,r,o){void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===o&&(o=i.a);var s=t.call(this,e,n,r)||this;return s.factory=o,s}return r.a(e,t),e.prototype.restore=function(t){var e=this,n=new Map;return t.nodes.forEach(function(t){var r=e.factory.makeNode(t);n.set(r.id,r),e.addNode(r)}),t.edges.forEach(function(t){var r=e.factory.makeEdge(t,n.get.bind(n));e.addEdge(r)}),this},e}(i.b);e.a=o},function(t,e,n){"use strict";function r(t,e,n){if(0===e.ndim)return!0;for(var r=0;r<Math.min(t.ndim,n);++r){var i=function(n){var r=t.dim(n),i=e.dim(n);return i.isAll||r.isAll?{value:!0}:!r.isUnbound&&r.asList().every(function(t){return!i.contains(t)})?{value:!1}:void 0}(r);if("object"==typeof i)return i.value}return!1}function i(t,e,n){if(0===e.length)return t;var i=[];return t.forEach(function(t){e.some(function(e){return e.eq(t)})||e.some(function(e){return r(t,e,n)})||i.push(t)}),i}var o=n(0),s=n(5),a=n(1),u=n(14),c=n(17),p=function(t){function e(n,r){void 0===r&&(r=!1);var i=t.call(this)||this;return i.elems=n,i.internal=r,i.sel=new Map,i.isOn=!1,i.selectionListener=function(t,n,r,o,s){i.fire(e.EVENT_SELECT_DIM+","+e.EVENT_SELECT_PRODUCT,i.elems.indexOf(t.currentTarget),n,r,o,s),i.fire(e.EVENT_SELECT_DIM+"-"+n+","+e.EVENT_SELECT_PRODUCT+"-"+n,i.elems.indexOf(t.currentTarget),r,o,s)},i}return o.a(e,t),e.prototype.on=function(e,n){return this.isOn||(this.enable(),this.isOn=!0),t.prototype.on.call(this,e,n)},Object.defineProperty(e.prototype,"id",{get:function(){return this.elems.map(function(t){return t.id}).join("X")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.elems.map(function(t){return t.name}).join(" x ")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"names",{get:function(){return this.elems.map(function(t){return t.names}).join(" x ")},enumerable:!0,configurable:!0}),e.prototype.enable=function(){var t=this;this.elems.forEach(function(e){return e.on(c.a.EVENT_SELECT,t.selectionListener)})},e.prototype.disable=function(){var t=this;this.elems.forEach(function(e){return e.off(c.a.EVENT_SELECT,t.selectionListener)})},e.prototype.persist=function(){var t={};return this.sel.forEach(function(e,n){return t[n]=e.map(function(t){return t.toString()})}),{sel:t}},e.prototype.restore=function(t){var e=this;return Object.keys(t.sel).forEach(function(n){return e.sel.set(n,t.sel[n].map(a.parse))}),this},e.prototype.toString=function(){return this.name},e.prototype.selectionTypes=function(){return Array.from(this.sel.keys())},e.prototype.selections=function(t){return void 0===t&&(t=u.a),this.sel.has(t)?this.sel.get(t).slice():(this.sel.set(t,[]),[])},e.prototype.productSelections=function(t){var e=this;void 0===t&&(t=u.a);var r=this.selections(t),i=this.toPerDim(r);return this.elems.forEach(function(o,s){var u=o.selections(t),c=u.without(i[s]);c.isNone||r.push(n.i(a.list)(e.elems.map(function(t){return o===t?c.dim(0):a.Range1D.all()})))}),r},e.prototype.select=function(){var t=Array.from(arguments),e="string"==typeof t[0]?t.shift():u.a,r=t[0].map(a.parse),i=n.i(u.b)(t[1]);return this.selectImpl(r,i,e)},e.prototype.selectImpl=function(t,n,r){void 0===n&&(n=u.c.SET),void 0===r&&(r=u.a);var o=t.map(a.parse),s=this.selections(r),p=[];switch(n){case u.c.SET:p=o;break;case u.c.ADD:p=s.concat(o);break;case u.c.REMOVE:p=i(s,o,this.elems.length)}this.sel.set(r,p);var l=this.toPerDim(p);this.disable(),this.elems.forEach(function(t,e){return t.select(r,l[e])}),this.enable();var f=n!==u.c.REMOVE?o:[],h=n===u.c.ADD?[]:n===u.c.SET?s:o;return this.fire(c.a.EVENT_SELECT,r,p,f,h,s),this.fire(e.EVENT_SELECT_PRODUCT,-1,r,p,f,h,s),this.fire(c.a.EVENT_SELECT+"-"+r,p,f,h,s),this.fire(e.EVENT_SELECT_PRODUCT+"-"+r,-1,p,f,h,s),s},e.prototype.toPerDim=function(t){return this.elems.map(function(e,r){if(0===t.length)return n.i(a.none)();var i=t.map(function(t){return t.dim(r)}),o=i.reduce(function(t,e){return t?t.union(e):e},null);return n.i(a.list)(o)})},e.prototype.clear=function(t){return void 0===t&&(t=u.a),this.selectImpl([],u.c.SET,t)},e.EVENT_SELECT_DIM="selectDim",e.EVENT_SELECT_PRODUCT="selectProduct",e}(s.EventHandler);e.a=p},function(t,e,n){"use strict";var r=n(0),i=n(5),o=function(t){function e(e){var n=t.call(this)||this;return n.map=new Map,e&&n.parse(e),n}return r.a(e,t),e.prototype.keys=function(){return Array.from(this.map.keys())},e.prototype.forEach=function(t){this.map.forEach(function(e,n){return t(n,e)})},e.prototype.is=function(t){return this.has(t)},e.prototype.has=function(t){return null!=this.getProp(t,null)},e.prototype.getProp=function(t,e){if(void 0===e&&(e=null),this.map.has(t)){var n=this.map.get(t);return null===n?null:n.toString()}return e},e.prototype.getInt=function(t,e){void 0===e&&(e=NaN);var n=this.getProp(t,null);return null===n?e:parseInt(n,10)},e.prototype.removeProp=function(t){return!!this.map.has(t)&&(this.fire(e.EVENT_ENTRY_CHANGED+e.MULTI_EVENT_SEPARATOR+e.EVENT_CHANGED,t,this.map.get(t),null),this.map.delete(t),!0)},e.prototype.toString=function(){var t=[];return this.map.forEach(function(e,n){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}),t.join("&")},e.prototype.parse=function(t){var n=this;void 0===t&&(t="");var r=this.map.size;if(this.map.clear(),t.length<=1)return void(0!==r&&this.fire(e.EVENT_CHANGED));t.substr(1).split("&").forEach(function(t){var e=t.split("="),r=decodeURIComponent(e[0]),i=e[1]&&decodeURIComponent(e[1]);if(n.map.has(r)){var o=n.map.get(r);Array.isArray(o)?n.map.get(r).push(i):n.map.set(r,[o,i])}else n.map.set(r,i)}),this.fire(e.EVENT_CHANGED)},e.EVENT_CHANGED="changed",e.EVENT_ENTRY_CHANGED="entryChanged",e}(i.EventHandler);e.a=o},function(t,e,n){"use strict";function r(t){return 0===t.length?[]:1===t.length?t[0].visses:t[0].visses.filter(function(e){return t.every(function(t){return t.visses.indexOf(e)>=0})})}function i(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var o=t.ownerDocument.createElement("div");t.insertBefore(o,t.firstChild),r(e).forEach(function(t){var r=n.i(s.a)(o,"i");t.iconify(r),r.onclick=function(){return e.forEach(function(e){return e.switchTo(t)})}})}function o(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var o=t.ownerDocument.createElement("select");t.insertBefore(o,t.firstChild);var a=r(e);a.forEach(function(t,e){var r=n.i(s.a)(o,"option");r.setAttribute("value",String(e)),r.textContent=t.name}),e[0]&&(o.selectedIndex=a.indexOf(e[0].act)),o.onchange=function(){return e.forEach(function(t){return t.switchTo(a[o.selectedIndex])})}}var s=n(27);e.a=i,e.b=o},function(t,e,n){"use strict";function r(t,e,r,i){return void 0===r&&(r=l.data),void 0===i&&(i=e+"_"+r),{v:n.i(p.a)(t),value:t,name:e,category:r,hash:i}}function i(t){if(void 0===t||null===t)return null;if(t instanceof Element){var e=t;return{type:"element",id:e.getAttribute("id")}}if(n.i(u.isDataType)(t)){var e=t;return{type:"dataset",id:e.desc.id,persist:e.persist()}}return"string"==typeof t||"number"==typeof t?{type:"primitive",v:t}:null}function o(t){if(!t)return null;switch(t.type){case"element":return t.id?n.i(p.a)(document.getElementById(t.id)):null;case"dataset":return n.i(a.get)(t.persist);case"primitive":return n.i(p.a)(t.v)}return null}var s=n(0),a=n(19),u=n(3),c=n(6),p=n(8);n.d(e,"b",function(){return l}),n.d(e,"c",function(){return f}),e.d=r;var l={data:"data",selection:"selection",visual:"visual",layout:"layout",logic:"logic",custom:"custom",annotation:"annotation"},f={create:"create",update:"update",remove:"remove"},h=function(t){function e(e,r,i,o,s){void 0===i&&(i=l.data),void 0===o&&(o=r+"_"+i),void 0===s&&(s="");var a=t.call(this,"object")||this;return a._v=e,a._persisted=null,null!=e&&(a._promise=n.i(p.a)(e)),t.prototype.setAttr.call(a,"name",r),t.prototype.setAttr.call(a,"category",i),t.prototype.setAttr.call(a,"hash",o),t.prototype.setAttr.call(a,"description",s),a}return s.a(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this.checkPersisted(),this._v},set:function(t){this._v=t,this._promise=null==t?null:n.i(p.a)(t),this._persisted=null},enumerable:!0,configurable:!0}),e.prototype.checkPersisted=function(){var t=this;null!=this._persisted&&(this._promise=o(this._persisted),this._promise&&this._promise.then(function(e){t._v=e}),this._persisted=null)},Object.defineProperty(e.prototype,"v",{get:function(){return this.checkPersisted(),this._promise},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return t.prototype.getAttr.call(this,"name","")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"category",{get:function(){return t.prototype.getAttr.call(this,"category","")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hash",{get:function(){return t.prototype.getAttr.call(this,"hash","")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"description",{get:function(){return t.prototype.getAttr.call(this,"description","")},enumerable:!0,configurable:!0}),e.prototype.persist=function(){var e=t.prototype.persist.call(this);return e.attrs||(e.attrs={}),e.attrs.v=this._persisted?this._persisted:i(this.value),e},e.prototype.restore=function(e){return this._persisted=e.attrs.v,delete e.attrs.v,t.prototype.restore.call(this,e),this},e.restore=function(t){return new e(null,t.attrs.name,t.attrs.category,t.attrs.hash||t.attrs.name+"_"+t.attrs.category).restore(t)},Object.defineProperty(e.prototype,"createdBy",{get:function(){var t=this.incoming.filter(n.i(c.d)("creates"))[0];return t?t.source:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"removedBy",{get:function(){var t=this.incoming.filter(n.i(c.d)("removes"))[0];return t?t.source:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"requiredBy",{get:function(){return this.incoming.filter(n.i(c.d)("requires")).map(function(t){return t.source})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"partOf",{get:function(){return this.incoming.filter(n.i(c.d)("consistsOf")).map(function(t){return t.source})},enumerable:!0,configurable:!0}),e.prototype.toString=function(){return this.name},e}(c.b);e.a=h},function(t,e,n){"use strict";function r(t){if(1===t.length)return t[0];var e=t[0].iter().asList();return t.slice(1).forEach(function(t){t.iter().forEach(function(t){e.indexOf(t)<0&&e.push(t)})}),o.a.from(e)}var i=n(0),o=n(18),s=function(t){function e(e,n,i){var o=t.call(this,i||r(n))||this;return o.name=e,o.groups=n,o}return i.a(e,t),e.prototype.preMultiply=function(n,r){var i=this.groups.length>1?t.prototype.preMultiply.call(this,n,r):void 0;return new e(this.name,this.groups.map(function(t){return t.preMultiply(n,r)}),i)},e.prototype.union=function(n,r){var i=this.groups.length>1?t.prototype.union.call(this,n,r):void 0;return new e(this.name,this.groups.map(function(t){return t.union(n,r)}),i)},e.prototype.intersect=function(n,r){var i=this.groups.length>1?t.prototype.intersect.call(this,n,r):void 0;return new e(this.name,this.groups.map(function(t){return t.intersect(n,r)}),i)},e.prototype.without=function(n,r){var i=this.groups.length>1?t.prototype.without.call(this,n,r):void 0;return new e(this.name,this.groups.map(function(t){return t.without(n,r)}),i)},e.prototype.clone=function(){var n=this.groups.length>1?t.prototype.clone.call(this):void 0;return new e(name,this.groups.map(function(t){return t.clone()}),n)},e.prototype.sort=function(n){var r=this.groups.length>1?t.prototype.sort.call(this,n):void 0;return new e(this.name,this.groups.map(function(t){return t.sort(n)}),r)},e.prototype.toSet=function(n){var r=this.groups.length>1?t.prototype.toSet.call(this,n):void 0;return new e(this.name,this.groups.map(function(t){return t.toSet(n)}),r)},e.prototype.toString=function(){return'"'+this.name+'"{'+this.groups.join(",")+"}"},e.prototype.fromLikeComposite=function(t){return new e(this.name,t)},e}(o.a);e.a=s},function(t,e,n){"use strict";function r(){return new s}function i(){return new s([o.a.none(),o.a.none()])}var o=n(18);e.b=r,e.c=i;var s=function(){function t(t){void 0===t&&(t=[]),this.dims=t}return Object.defineProperty(t.prototype,"isAll",{get:function(){return this.dims.every(function(t){return t.isAll})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isNone",{get:function(){return this.dims.every(function(t){return t.isNone})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isUnbound",{get:function(){return this.dims.some(function(t){return t.isUnbound})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"first",{get:function(){return this.dim(0).first},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"last",{get:function(){return this.dim(0).last},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ndim",{get:function(){return this.dims.length},enumerable:!0,configurable:!0}),t.prototype.eq=function(t){return!!(this===t||this.isAll&&t.isAll||this.isNone&&t.isNone)||this.toString()===t.toString()},t.prototype.preMultiply=function(e,n){if(this.isAll)return e.clone();if(e.isAll)return this.clone();var r=new t;return this.dims.forEach(function(t,i){r.dims[i]=t.preMultiply(e.dim(i),n?n[i]:void 0)}),r},t.prototype.union=function(e,n){if(this.isAll||e.isNone)return this.clone();if(e.isAll||this.isNone)return e.clone();var r=new t;return this.dims.forEach(function(t,i){r.dims[i]=t.union(e.dim(i),n?n[i]:void 0)}),r},t.prototype.intersect=function(e,n){if(this.isNone||e.isNone)return i();if(this.isAll)return e.clone();if(e.isAll)return this.clone();var r=new t;return this.dims.forEach(function(t,i){r.dims[i]=t.intersect(e.dim(i),n?n[i]:void 0)}),r},t.prototype.without=function(e,n){if(this.isNone||e.isNone)return this.clone();if(e.isAll)return i();var r=new t;return this.dims.forEach(function(t,i){r.dims[i]=t.without(e.dim(i),n?n[i]:void 0)}),r},t.prototype.clone=function(){var e=new t;return this.dims.forEach(function(t,n){e.dims[n]=t.clone()}),e},t.prototype.swap=function(){return new t(this.dims.map(function(t){return t.clone()}).reverse())},t.prototype.filter=function(t,e){if(this.isAll)return t;var n=this.ndim,r=this,i=function(t){if(t>=n)return function(t){return t};var o=r.dim(t),s=i(t+1),a=e?e[t]:void 0;return function(t){return Array.isArray(t)?o.filter(t,a,s):t}};return i(0)(t)},t.prototype.dim=function(t){var e=this.dims[t];return e||(this.dims[t]=o.a.all(),this.dims[t])},t.prototype.invert=function(t,e){var n=this;return this.isAll?t:t.map(function(t,r){return n.dim(r).invert(t,e?e[r]:void 0)})},t.prototype.indexRangeOf=function(e,n){return e.isNone||this.isNone?i():this.isNone||e.isAll?this.clone():new t(this.dims.map(function(t,r){return t.indexRangeOf(e.dim(r),n?n[r]:void 0)}))},t.prototype.indexOf=function(){var e=this;if(arguments[0]instanceof t)return this.indexRangeOf(arguments[0],arguments[1]);var n;if(1===arguments.length){if("number"==typeof arguments[0])return this.dim(0).indexOf(arguments[0]);n=arguments[0]}else n=Array.from(arguments);return 0===n.length?[]:n.map(function(t,n){return e.dim(n).indexOf(t)})},t.prototype.size=function(t){return this.isAll?t:this.dims.map(function(e,n){return e.size(t?t[n]:void 0)})},t.prototype.split=function(){return this.dims.map(function(e){return new t([e])})},t.prototype.product=function(t,e){var n=this,r=this.ndim,i=function(o){var s=o.length;if(s<r){n.dims[s].iter(e?e[s]:null).forEach(function(t){o.push(t),i(o),o.pop()})}else t(o.slice())};i([])},t.prototype.toString=function(){return this.dims.map(function(t){return t.toString()}).join(",")},t}();e.a=s},function(t,e,n){"use strict";var r=n(0),i=n(18),o=function(t){function e(e,n,r){var i=t.call(this,r)||this;return i.name=e,i.color=n,i}return r.a(e,t),e.prototype.preMultiply=function(n,r){var i=t.prototype.preMultiply.call(this,n,r);return new e(this.name,this.color,i)},e.prototype.union=function(n,r){var i=t.prototype.union.call(this,n,r);return new e(this.name,this.color,i)},e.prototype.intersect=function(n,r){var i=t.prototype.intersect.call(this,n,r);return new e(this.name,this.color,i)},e.prototype.without=function(n,r){var i=t.prototype.without.call(this,n,r);return new e(this.name,this.color,i)},e.prototype.clone=function(){return new e(this.name,this.color,t.prototype.clone.call(this))},e.prototype.toString=function(){return'"'+this.name+'""'+this.color+'"'+t.prototype.toString.call(this)},e.prototype.toSet=function(n){return new e(this.name,this.color,t.prototype.toSet.call(this,n))},e.prototype.fromLike=function(n){return new e(this.name,this.color,t.prototype.fromLike.call(this,n))},e}(i.a);e.a=o},function(t,e,n){"use strict";function r(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}e.a=r},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}e.a=r},function(t,e,n){"use strict";function r(t){return void 0!==typeof t.data?new f(t,t.data):new f(t,h)}function i(t,e,r){void 0===r&&(r={});var i=n.i(s.mixin)(n.i(u.a)(),{value:n.i(a.guessValueTypeDesc)([e])},r),o=r.rowassigner||n.i(c.createLocalAssigner)(),p={name:t,value:e,id:o([t]).first};return new f(i,p)}Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),s=n(2),a=n(3),u=n(92),c=n(4),p=n(91),l=n(1);n.d(e,"Atom",function(){return f}),e.create=r,e.asAtom=i;var f=function(t){function e(e,n){var r=t.call(this,e)||this;return r.loaded=n,r}return o.a(e,t),e.prototype.id=function(){return Promise.resolve(n.i(l.list)(this.loaded.id))},e.prototype.name=function(){return Promise.resolve(this.loaded.name)},e.prototype.data=function(){return Promise.resolve(this.loaded.value)},e}(p.a),h={id:-1,name:"",value:null}},function(t,e,n){"use strict";var r=n(0),i=n(10),o=n(13),s=n(15),a=n(16),u=function(t){function e(e,n,r,i){void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=0),void 0===i&&(i=0);var o=t.call(this)||this;return o.x=e,o.y=n,o.radiusX=r,o.radiusY=i,o}return r.a(e,t),Object.defineProperty(e.prototype,"xy",{get:function(){return new i.Vector2D(this.x,this.y)},enumerable:!0,configurable:!0}),e.prototype.toString=function(){return"Ellipse(x="+this.x+",y="+this.y+",radiusX="+this.radiusX+",radiusY="+this.radiusY+")"},e.prototype.shiftImpl=function(t,e){this.x+=t,this.y+=e},e.prototype.aabb=function(){return new a.a(this.x-this.radiusX,this.y-this.radiusY,2*this.radiusX,2*this.radiusY)},e.prototype.bs=function(){return new s.a(this.x,this.y,Math.max(this.radiusX,this.radiusY))},e.prototype.transform=function(t,n){return new e(this.x*t[0],this.y*t[1],this.radiusX*t[0],this.radiusY*t[1])},e.prototype.asIntersectionParams=function(){return{name:"Ellipse",params:[this.xy,this.radiusX,this.radiusY]}},e}(o.a);e.a=u},function(t,e,n){"use strict";var r=n(0),i=n(10),o=n(13),s=n(15),a=n(16),u=function(t){function e(e,n,r,i){void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=0),void 0===i&&(i=0);var o=t.call(this)||this;return o.x1=e,o.y1=n,o.x2=r,o.y2=i,o}return r.a(e,t),Object.defineProperty(e.prototype,"xy",{get:function(){return new i.Vector2D(this.x1,this.y1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"x1y1",{get:function(){return this.xy},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"x2y2",{get:function(){return new i.Vector2D(this.x2,this.y2)},enumerable:!0,configurable:!0}),e.prototype.toString=function(){return"Line(x1="+this.x1+",y1="+this.y1+",x2="+this.x2+",y2="+this.y2+")"},e.prototype.shiftImpl=function(t,e){this.x1+=t,this.y1+=e,this.x2+=t,this.y2+=e},e.prototype.aabb=function(){return new a.a(Math.min(this.x1,this.x2),Math.min(this.y1,this.y2),Math.abs(this.x1-this.x2),Math.abs(this.y1-this.y2))},e.prototype.bs=function(){var t=.5*(this.x1+this.x2),e=.5*(this.y1+this.y2),n=this.x1-this.x2,r=this.y1-this.y2;return new s.a(t,e,Math.sqrt(n*n+r*r)/2)},e.prototype.transform=function(t,n){return new e(this.x1*t[0],this.y1*t[1],this.x2*t[0],this.y2*t[1])},e.prototype.asIntersectionParams=function(){return{name:"Line",params:[this.xy,this.x2y2]}},e}(o.a);e.a=u},function(t,e,n){"use strict";var r=n(0),i=n(10),o=n(13),s=n(15),a=n(16),u=function(t){function e(e){void 0===e&&(e=[]);var n=t.call(this)||this;return n.points=e,n}return r.a(e,t),e.prototype.push=function(){2===arguments.length&&"number"==typeof arguments[0]?this.points.push(new i.Vector2D(arguments[0],arguments[1])):(t=this.points).push.apply(t,Array.from(arguments));var t},e.prototype.toString=function(){return"Polygon("+this.points.join(",")+")"},e.prototype.shiftImpl=function(t,e){this.points.forEach(function(n){n.x+=t,n.y+=e})},Object.defineProperty(e.prototype,"length",{get:function(){return this.points.length},enumerable:!0,configurable:!0}),e.prototype.aabb=function(){var t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return this.points.forEach(function(i){i.x<t&&(t=i.x),i.y<e&&(e=i.y),i.x>n&&(n=i.x),i.y>r&&(r=i.y)}),new a.a(t,e,n-t,r-e)},e.prototype.bs=function(){var t=this.centroid,e=0;return this.points.forEach(function(n){var r=n.x-t.x,i=n.y-t.x,o=r*r+i*i;o>e&&(e=o)}),new s.a(t.x,t.y,Math.sqrt(e))},e.prototype.transform=function(t,n){return new e(this.points.map(function(e){return new i.Vector2D(e.x*t[0],e.y*t[1])}))},e.prototype.pointInPolygon=function(t){for(var e=this.points.length,n=0,r=this.points[0],i=1;i<=e;i++){var o=this.points[i%e];if(t.y>Math.min(r.y,o.y)&&t.y<=Math.max(r.y,o.y)&&t.x<=Math.max(r.x,o.x)&&r.y!==o.y){var s=(t.y-r.y)*(o.x-r.x)/(o.y-r.y)+r.x;(r.x===o.x||t.x<=s)&&n++}r=o}return n%2==1},Object.defineProperty(e.prototype,"area",{get:function(){for(var t=0,e=this.points.length,n=0;n<e;n++){var r=this.points[n],i=this.points[(n+1)%e];t+=r.x*i.y-i.x*r.y}return t/2},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"centroid",{get:function(){for(var t=this.points.length,e=6*this.area,n=0,r=0,o=0;o<t;o++){var s=this.points[o],a=this.points[(o+1)%t],u=s.x*a.y-a.x*s.y;n+=(s.x+a.x)*u,r+=(s.y+a.y)*u}return new i.Vector2D(n/e,r/e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isClockwise",{get:function(){return this.area<0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isCounterClockwise",{get:function(){return this.area>0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isConcave",{get:function(){for(var t=0,e=0,n=this.points.length,r=0;r<n;r++){var o=this.points[r],s=this.points[(r+1)%n],a=this.points[(r+2)%n],u=i.Vector2D.fromPoints(o,s),c=i.Vector2D.fromPoints(s,a);u.cross(c)<0?e++:t++}return 0!==e&&0!==t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isConvex",{get:function(){return!this.isConcave},enumerable:!0,configurable:!0}),e.prototype.asIntersectionParams=function(){return{name:"Polygon",params:[this.points.slice()]}},e}(o.a);e.a=u},function(t,e,n){"use strict";function r(t){return new d(t)}Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),o=n(4),s=n(3),a=n(1),u=n(6),c=n(20),p=n(45),l=n(30),f=n(29),h=n(8);e.create=r;var d=function(t){function e(e){var n=t.call(this,e)||this;return n.cache=null,n.loaded=null,n}return i.a(e,t),Object.defineProperty(e.prototype,"nnodes",{get:function(){return this.loaded?this.loaded.nnodes:this.desc.size[u.e]||0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nedges",{get:function(){return this.loaded?this.loaded.nedges:this.desc.size[u.f]||0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dim",{get:function(){return[this.nnodes,this.nedges]},enumerable:!0,configurable:!0}),e.prototype.impl=function(t){var e=this;if(void 0===t&&(t=c.a),this.cache)return this.cache;var r=this.desc.storage||"remote";return"memory"===r?(this.loaded=new l.a(this.desc,[],[],t),this.cache=n.i(h.a)(this.loaded)):"local"===r?(this.loaded=f.a.load(this.desc,t,localStorage),this.cache=n.i(h.a)(this.loaded)):"session"===r?(this.loaded=f.a.load(this.desc,t,sessionStorage),this.cache=n.i(h.a)(this.loaded)):"given"===r&&this.desc.graph instanceof u.c?(this.loaded=this.desc.graph,this.cache=n.i(h.a)(this.loaded)):this.cache=n.i(h.a)(p.a.load(this.desc,t)).then(function(t){return e.loaded=t}),this.cache},e.prototype.ids=function(t){return void 0===t&&(t=n.i(a.all)()),this.cache?Promise.resolve(this.cache.then(function(e){return e.ids(t)})):Promise.resolve(n.i(a.none)())},Object.defineProperty(e.prototype,"idtypes",{get:function(){return[u.g,u.h].map(o.resolve)},enumerable:!0,configurable:!0}),e}(s.ADataType);e.default=d},function(t,e,n){"use strict";var r=n(0),i=n(9),o=n(20),s=n(6),a=n(8),u=function(t){function e(n){var r=t.call(this,n)||this;return r.updateHandler=function(t){var e=t.target;e instanceof s.b&&r.updateNode(e),e instanceof s.a&&r.updateEdge(e)},r.waitForSynced=0,r.queue=[],r.flushTimeout=-1,r.batchSize=n.attrs.batchSize||e.DEFAULT_BATCH_SIZE,r}return r.a(e,t),e.prototype.migrate=function(){var e=this;return this.nodes.forEach(function(t){return t.off("setAttr",e.updateHandler)}),this.edges.forEach(function(t){return t.off("setAttr",e.updateHandler)}),t.prototype.migrate.call(this)},e.load=function(t,n){return new e(t).load(n)},e.prototype.load=function(t){return r.b(this,void 0,void 0,function(){var e;return r.c(this,function(r){switch(r.label){case 0:return this.fire("sync_load_start,sync_start",++this.waitForSynced),[4,n.i(i.sendAPI)("/dataset/graph/"+this.desc.id+"/data")];case 1:return e=r.sent(),this.loadImpl(e.nodes,e.edges,t),this.fire("sync_load,sync",--this.waitForSynced),[2,this]}})})},e.prototype.loadImpl=function(e,n,r){var i=this,o=new Map,s=o.get.bind(o);e.forEach(function(e){var n=r.makeNode(e);o.set(n.id,n),n.on("setAttr",i.updateHandler),t.prototype.addNode.call(i,n)}),n.forEach(function(e){var n=r.makeEdge(e,s);n.on("setAttr",i.updateHandler),t.prototype.addEdge.call(i,n)}),this.fire("loaded")},Object.defineProperty(e.prototype,"activeSyncOperations",{get:function(){return this.waitForSynced},enumerable:!0,configurable:!0}),e.prototype.send=function(t,e,n){if(this.batchSize<=1)return this.sendNow(t,e,n);var r={type:t,op:e,id:n.id,desc:n.persist()};return this.enqueue(r)},e.prototype.enqueue=function(t){var n=this;if(this.flushTimeout>=0&&(clearTimeout(this.flushTimeout),this.flushTimeout=-1),this.queue.push(t),this.queue.length>=2*this.batchSize)return this.sendQueued();var r=this.queue.length>=this.batchSize?e.DEFAULT_WAIT_TIME_BEFORE_FULL_FLUSH:e.DEFAULT_WAIT_TIME_BEFORE_EARLY_FLUSH;this.flushTimeout=setTimeout(function(){n.sendQueued()},r)},e.prototype.sendNow=function(t,e,r){var o=this;this.fire("sync_start_"+t+",sync_start",++this.waitForSynced,e+"_{type}",r);var s={desc:JSON.stringify(r.persist())};return function(){switch(e){case"add":return n.i(i.sendAPI)("/dataset/graph/"+o.desc.id+"/"+t,s,"POST");case"update":return n.i(i.sendAPI)("/dataset/graph/"+o.desc.id+"/"+t+"/"+r.id,s,"PUT");case"remove":return n.i(i.sendAPI)("/dataset/graph/"+o.desc.id+"/"+t+"/"+r.id,{},"DELETE")}}().then(function(){o.fire("sync_"+t+",sync",--o.waitForSynced,r)})},e.prototype.sendQueued=function(){var t=this;if(0===this.queue.length)return n.i(a.a)(null);var e=JSON.stringify({operation:"batch",items:this.queue.slice()});return this.queue.splice(0,this.queue.length),this.fire("sync_start",++this.waitForSynced,"batch"),n.i(i.sendAPI)("/dataset/"+this.desc.id,{desc:e},"POST").then(function(){return t.fire("sync",--t.waitForSynced,"batch"),t})},e.prototype.flush=function(){return this.batchSize<=1||0===this.queue.length?n.i(a.a)("nothing queued"):this.sendQueued()},e.prototype.addAll=function(e,n){var r=this;return e.forEach(function(e){t.prototype.addNode.call(r,e),e.on("setAttr",r.updateHandler),r.queue.push({type:"node",op:"add",id:e.id,desc:e.persist()})}),n.forEach(function(e){t.prototype.addEdge.call(r,e),e.on("setAttr",r.updateHandler),r.queue.push({type:"edge",op:"add",id:e.id,desc:e.persist()})}),this.sendQueued()},e.prototype.addNode=function(e){return r.b(this,void 0,void 0,function(){return r.c(this,function(n){switch(n.label){case 0:return t.prototype.addNode.call(this,e),e.on("setAttr",this.updateHandler),[4,this.send("node","add",e)];case 1:return n.sent(),[2,this]}})})},e.prototype.updateNode=function(e){return r.b(this,void 0,void 0,function(){return r.c(this,function(n){switch(n.label){case 0:return t.prototype.updateNode.call(this,e),[4,this.send("node","update",e)];case 1:return n.sent(),[2,this]}})})},e.prototype.removeNode=function(e){return r.b(this,void 0,void 0,function(){return r.c(this,function(n){switch(n.label){case 0:return t.prototype.removeNode.call(this,e)?(e.off("setAttr",this.updateHandler),[4,this.send("node","remove",e)]):[2,Promise.reject("invalid node")];case 1:return n.sent(),[2,this]}})})},e.prototype.addEdge=function(e,n,i){return r.b(this,void 0,void 0,function(){var o;return r.c(this,function(r){switch(r.label){case 0:return e instanceof s.a?(t.prototype.addEdge.call(this,e),o=e,o.on("setAttr",this.updateHandler),[4,this.send("edge","add",o)]):[3,2];case 1:return r.sent(),[2,this];case 2:return[2,t.prototype.addEdge.call(this,e,n,i)]}})})},e.prototype.removeEdge=function(e){return r.b(this,void 0,void 0,function(){return r.c(this,function(n){switch(n.label){case 0:return t.prototype.removeEdge.call(this,e)?(e.off("setAttr",this.updateHandler),[4,this.send("edge","remove",e)]):[2,Promise.reject("invalid edge")];case 1:return n.sent(),[2,this]}})})},e.prototype.updateEdge=function(e){return r.b(this,void 0,void 0,function(){return r.c(this,function(n){switch(n.label){case 0:return t.prototype.updateEdge.call(this,e),[4,this.send("edge","update",e)];case 1:return n.sent(),[2,this]}})})},e.prototype.clear=function(){var e=this;if(0===this.nnodes&&0===this.nedges)return Promise.resolve(this);this.nodes.forEach(function(t){return t.off("setAttr",e.updateHandler)}),this.edges.forEach(function(t){return t.off("setAttr",e.updateHandler)}),t.prototype.clear.call(this),this.flush().then(function(){return e.fire("sync_start",++e.waitForSynced,"clear"),n.i(i.sendAPI)("/dataset/graph/"+e.desc.id+"/node",{},"DELETE")}).then(function(){return e.fire("sync"),e})},e.DEFAULT_BATCH_SIZE=10,e.DEFAULT_WAIT_TIME_BEFORE_EARLY_FLUSH=1e3,e.DEFAULT_WAIT_TIME_BEFORE_FULL_FLUSH=100,e}(o.b);e.a=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(6);n.d(e,"AttributeContainer",function(){return r.i}),n.d(e,"GraphNode",function(){return r.b}),n.d(e,"GraphEdge",function(){return r.a}),n.d(e,"isType",function(){return r.d}),n.d(e,"AGraph",function(){return r.c});var i=n(44);n.d(e,"GraphProxy",function(){return i.default}),n.d(e,"create",function(){return i.create});var o=n(20);n.d(e,"GraphBase",function(){return o.b});var s=n(30);n.d(e,"MemoryGraph",function(){return s.a});var a=n(45);n.d(e,"RemoteStoreGraph",function(){return a.a});var u=n(29);n.d(e,"LocalStorageGraph",function(){return u.a})},function(t,e,n){"use strict";var r=n(0),i=n(1),o=n(14),s=n(48),a=n(31),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.numProductSelectListeners=0,e.productSelectionListener=function(t,r,i){var s=e.producttype.productSelections(i);if(0===s.length)return e.fire(a.a.EVENT_SELECT_PRODUCT,i,[]),void e.fire(a.a.EVENT_SELECT_PRODUCT+"-"+i,[]);e.ids().then(function(t){var r=s.map(function(e){return t.indexOf(e)}).filter(function(t){return!t.isNone});0!==r.length&&(r.forEach(function(e){return n.i(o.d)(e,t.ndim)}),e.fire(a.a.EVENT_SELECT_PRODUCT,i,r),e.fire(a.a.EVENT_SELECT_PRODUCT+"-"+i,r))})},e}return r.a(e,t),e.prototype.on=function(e,n){return"string"!=typeof e||"select"!==e&&"selectProduct"!==e&&"select-"!==e.slice(0,"select-".length)||1===++this.numProductSelectListeners&&this.producttype.on("selectProduct",this.productSelectionListener),t.prototype.on.call(this,e,n)},e.prototype.off=function(e,n){return"string"!=typeof e||"select"!==e&&"selectProduct"!==e&&"select-"!==e.slice(0,"select-".length)||0===--this.numProductSelectListeners&&this.producttype.off("selectProduct",this.productSelectionListener),t.prototype.off.call(this,e,n)},e.prototype.productSelections=function(t){var e=this;return void 0===t&&(t=o.a),this.ids().then(function(r){var i=e.producttype.productSelections(t),s=i.map(function(t){return r.indexRangeOf(t)}).filter(function(t){return!t.isNone});return s.forEach(function(t){return n.i(o.d)(t,r.ndim)}),s})},e.prototype.selectProduct=function(){var t=Array.from(arguments),e="string"==typeof t[0]?t.shift():o.a,r=t[0].map(i.parse),s=n.i(o.b)(t[1]);return this.selectProductImpl(r,s,e)},e.prototype.selectProductImpl=function(t,e,n){var r=this;return void 0===e&&(e=o.c.SET),void 0===n&&(n=o.a),this.ids().then(function(i){return t=t.map(function(t){return i.preMultiply(t)}),r.producttype.select(n,t,e)})},e.prototype.clear=function(){var t=Array.from(arguments);"number"==typeof t[0]&&t.shift();var e="string"==typeof t[0]?t[0]:o.a;return this.selectProductImpl([],o.c.SET,e||o.a)},e}(s.a);e.a=u},function(t,e,n){"use strict";var r=n(0),i=n(5),o=n(1),s=n(14),a=n(17),u=function(t){function e(){var i=null!==t&&t.apply(this,arguments)||this;return i.numSelectListeners=0,i.selectionListeners=[],i.singleSelectionListener=function(t,o,a,u,c){return r.b(i,void 0,void 0,function(){var t;return r.c(this,function(r){switch(r.label){case 0:return[4,this.ids()];case 1:return t=r.sent(),(a=t.indexOf(a),u=t.indexOf(u),c=t.indexOf(c),a.isNone&&u.isNone&&c.isNone)?[2]:(n.i(s.d)(a,t.ndim),n.i(s.d)(u,t.ndim),n.i(s.d)(c,t.ndim),this.fire(e.EVENT_SELECT,o,a,u,c),this.fire(e.EVENT_SELECT+"-"+o,a,u,c),[2])}})})},i.selectionCache=[],i.accumulateEvents=-1,i}return r.a(e,t),e.prototype.fromIdRange=function(t){return void 0===t&&(t=n.i(o.all)()),r.b(this,void 0,void 0,function(){return r.c(this,function(e){switch(e.label){case 0:return[4,this.ids()];case 1:return[2,e.sent().indexOf(n.i(o.parse)(t))]}})})},Object.defineProperty(e.prototype,"idtypes",{get:function(){return[]},enumerable:!0,configurable:!0}),e.prototype.selectionListener=function(t,e,n){var r=this;return function(t,i,o,s,a){r.selectionCache[e]={act:o,added:s,removed:a},(r.accumulateEvents<0||++r.accumulateEvents===n)&&r.fillAndSend(i,e)}},e.prototype.fillAndSend=function(t,e){var r=this,i=this.idtypes,s=i.map(function(e,i){var s=r.selectionCache[i];return s||{act:e.selections(t),added:n.i(o.none)(),removed:n.i(o.none)()}}),a=n.i(o.join)(s.map(function(t){return t.act})),u=n.i(o.join)(s.map(function(t){return t.added})),c=n.i(o.join)(s.map(function(t){return t.removed}));this.selectionCache=[],this.accumulateEvents=-1,this.singleSelectionListener(null,t,a,u,c)},e.prototype.on=function(n,r){var i=this;if("string"==typeof n&&(n===e.EVENT_SELECT||"select-"===n.slice(0,"select-".length))&&1===++this.numSelectListeners){var o=this.idtypes;1===o.length?(this.selectionListeners.push(this.singleSelectionListener),o[0].on(e.EVENT_SELECT,this.singleSelectionListener)):o.forEach(function(t,n){var r=i.selectionListener(t,n,o.length);i.selectionListeners.push(r),t.on(e.EVENT_SELECT,r)})}return t.prototype.on.call(this,n,r)},e.prototype.off=function(n,r){var i=this;return"string"!=typeof n||n!==e.EVENT_SELECT&&"select-"!==n.slice(0,"select-".length)||0===--this.numSelectListeners&&(this.idtypes.forEach(function(t,n){return t.off(e.EVENT_SELECT,i.selectionListeners[n])}),this.selectionListeners=[]),t.prototype.off.call(this,n,r)},e.prototype.selections=function(t){return void 0===t&&(t=s.a),r.b(this,void 0,void 0,function(){var e,i;return r.c(this,function(r){switch(r.label){case 0:return[4,this.ids()];case 1:return e=r.sent(),i=n.i(o.join)(this.idtypes.map(function(e){return e.selections(t)})),[2,e.indexRangeOf(i)]}})})},e.prototype.select=function(){var t=Array.from(arguments),e="number"==typeof t[0]?+t.shift():-1,r="string"==typeof t[0]?t.shift():s.a,i=n.i(o.parse)(t[0]),a=n.i(s.b)(t[1]);return this.selectImpl(i,a,r,e)},e.prototype.selectImpl=function(t,e,i,a){return void 0===e&&(e=s.c.SET),void 0===i&&(i=s.a),void 0===a&&(a=-1),r.b(this,void 0,void 0,function(){var s,u,c;return r.c(this,function(r){switch(r.label){case 0:return s=this.idtypes,[4,this.ids()];case 1:if(u=r.sent(),-1===a){for(t=u.preMultiply(t),this.accumulateEvents=0,c=n.i(o.join)(t.split().map(function(t,n){return s[n].select(i,t,e)})),this.accumulateEvents>0&&this.fillAndSend(i,-1);c.ndim<s.length;)c.dim(c.ndim);return[2,u.indexRangeOf(c)]}return u=u.split()[a],t=u.preMultiply(t),s[a].select(i,t,e),[2,u.indexRangeOf(t)]}})})},e.prototype.clear=function(){var t=Array.from(arguments),e="number"==typeof t[0]?+t.shift():-1,r="string"==typeof t[0]?t[0]:s.a;return this.selectImpl(n.i(o.none)(),s.c.SET,r,e)},e.EVENT_SELECT=a.a.EVENT_SELECT,e}(i.EventHandler);e.a=u},function(t,e,n){"use strict";function r(t){t.forEach(function(t){var e=x.get(t.id),r=!1;e?e instanceof _.a&&(e.name=t.name,e.names=t.names):(e=new _.a(t.id,t.name,t.names),r=!0),x.set(t.id,e),r&&n.i(g.fire)(P,e)})}function i(t){return"y"===t[t.length-1]?t.slice(0,t.length-1)+"ies":t+"s"}function o(t){if(t instanceof _.a)return t;var e=t;return c(e,new _.a(e,e,i(e)))}function s(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=new m.a(t);return c(n.id,n)}function a(){return Array.from(x.values())}function u(){return d.b(this,void 0,void 0,function(){var t;return d.c(this,function(e){switch(e.label){case 0:return E?[2,Promise.resolve(a())]:[4,n.i(y.getAPIJSON)("/idtype/",{},[])];case 1:return t=e.sent(),E=!0,r(t),[2,a()]}})})}function c(t,e){return x.has(t)?x.get(t):(x.set(t,e),n.i(g.fire)("register.idtype",e),e)}function p(){var t={};return x.forEach(function(e,n){t[n]=e.persist()}),t}function l(t){Object.keys(t).forEach(function(e){o(e).restore(t[e])})}function f(t){void 0===t&&(t=v.a),x.forEach(function(e){return e.clear(t)})}function h(t){return t.internal||t.id.startsWith("_")}var d=n(0),y=n(9),g=n(5),v=n(14),_=n(17),m=n(31),b=n(7);n.d(e,"c",function(){return P}),e.a=o,e.i=s,e.d=a,e.e=u,e.g=c,e.f=p,e.h=l,e.b=f,e.j=h;var x=new Map,E=!1,P="register.idtype";n.i(b.list)("idType").forEach(function(t){var e=t.id,n=t.name,r=t.names||i(n),o=Boolean(t.internal);c(e,new _.a(e,n,r,o))})},function(t,e,n){"use strict";var r=n(0),i=n(32),o=function(t){function e(){var n=t.call(this)||this;n.updated=function(){n.parse(location.hash),n.fire(e.EVENT_HASH_CHANGED)},n.debounceTimer=-1;var r=history.state;return r?Object.keys(r).forEach(function(t){return n.map.set(t,r[t])}):n.parse(location.hash),window.addEventListener("hashchange",n.updated,!1),n}return r.a(e,t),e.prototype.setInt=function(t,e,n){void 0===n&&(n=!0),this.setProp(t,String(e),n)},e.prototype.setProp=function(t,e,n){void 0===n&&(n=!0),this.map.get(t)!==e&&(this.map.set(t,e),!1!==n&&this.update("number"==typeof n?n:0))},e.prototype.removeProp=function(t,e){return void 0===e&&(e=!0),!!this.map.has(t)&&(this.map.delete(t),!1!==e&&this.update("number"==typeof e?e:0),!0)},e.prototype.toObject=function(){var t={};return this.map.forEach(function(e,n){return t[n]=e}),t},e.prototype.update=function(t){var e=this;if(void 0===t&&(t=0),t<=0)return this.updateImpl();this.debounceTimer>=0&&(self.clearTimeout(this.debounceTimer),this.debounceTimer=-1),this.debounceTimer=self.setTimeout(function(){return e.updateImpl()},t)},e.prototype.updateImpl=function(){var t=this;if(this.debounceTimer>=0&&(self.clearTimeout(this.debounceTimer),this.debounceTimer=-1),history.state){var n=history.state,r=Object.keys(n);if(r.length===this.map.size&&r.every(function(e){return t.map.get(e)===n[e]}))return}window.removeEventListener("hashchange",this.updated,!1),history.pushState(this.toObject(),"State "+Date.now(),"#"+this.toString()),window.addEventListener("hashchange",this.updated,!1),this.fire(e.EVENT_STATE_PUSHED,"State "+Date.now(),"#"+this.toString())},e.EVENT_STATE_PUSHED="pushedState",e.EVENT_HASH_CHANGED="hashChanged",e}(i.a);e.a=o},function(t,e,n){"use strict";function r(t){void 0===t&&(t="_default"),s.has(t)||s.set(t,0);var e=s.get(t);return s.set(t,e+1),e}function i(t,e){return isNaN(e)||e<0?e:(s.has(t)?s.set(t,Math.max(s.get(t),e+1)):s.set(t,e+1),e)}function o(t){return void 0===t&&(t="_default"),t+r(t)}e.b=r,e.a=i,e.c=o;var s=new Map},function(module,__webpack_exports__,__webpack_require__){"use strict";function flatten(t,e,n){void 0===n&&(n=0);var r=[],i=[t.length,t[0].length];if(0===n)r=r.concat.apply(r,t);else for(var o=0;o<i[1];++o)!function(e){t.forEach(function(t){r.push(t[e])})}(o);return{data:r,indices:e.dim(n).repeat(i[1-n])}}var __WEBPACK_IMPORTED_MODULE_0_tslib__=__webpack_require__(0),__WEBPACK_IMPORTED_MODULE_1__range__=__webpack_require__(1),__WEBPACK_IMPORTED_MODULE_2__idtype__=__webpack_require__(4),__WEBPACK_IMPORTED_MODULE_3__idtype_AProductSelectAble__=__webpack_require__(47),__WEBPACK_IMPORTED_MODULE_4__datatype__=__webpack_require__(3),__WEBPACK_IMPORTED_MODULE_5__math__=__webpack_require__(11),__WEBPACK_IMPORTED_MODULE_6__internal_SliceColVector__=__webpack_require__(108),__WEBPACK_IMPORTED_MODULE_7__internal_ProjectedVector__=__webpack_require__(107);__webpack_require__.d(__webpack_exports__,"b",function(){return MatrixView});var AMatrix=function(_super){function AMatrix(t){var e=_super.call(this)||this;return e.root=t,e}return __WEBPACK_IMPORTED_MODULE_0_tslib__.a(AMatrix,_super),Object.defineProperty(AMatrix.prototype,"dim",{get:function(){return this.size()},enumerable:!0,configurable:!0}),Object.defineProperty(AMatrix.prototype,"length",{get:function(){return this.nrow*this.ncol},enumerable:!0,configurable:!0}),Object.defineProperty(AMatrix.prototype,"nrow",{get:function(){return this.dim[0]},enumerable:!0,configurable:!0}),Object.defineProperty(AMatrix.prototype,"ncol",{get:function(){return this.dim[1]},enumerable:!0,configurable:!0}),Object.defineProperty(AMatrix.prototype,"indices",{get:function(){return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.range)([0,this.nrow],[0,this.ncol])},enumerable:!0,configurable:!0}),AMatrix.prototype.view=function(t){void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.all)());var e=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.parse)(t);return e.isAll?this.root:new MatrixView(this.root,e)},AMatrix.prototype.slice=function(t){return new __WEBPACK_IMPORTED_MODULE_6__internal_SliceColVector__.a(this.root,t)},AMatrix.prototype.stats=function(t){return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.all)()),__WEBPACK_IMPORTED_MODULE_0_tslib__.b(this,void 0,void 0,function(){var e,n,r,i;return __WEBPACK_IMPORTED_MODULE_0_tslib__.c(this,function(o){switch(o.label){case 0:return e=this.root.valuetype,e.type!==__WEBPACK_IMPORTED_MODULE_4__datatype__.VALUE_TYPE_INT&&e.type!==__WEBPACK_IMPORTED_MODULE_4__datatype__.VALUE_TYPE_REAL?[3,2]:(r=(n=__WEBPACK_IMPORTED_MODULE_5__math__.computeStats).apply,i=[void 0],[4,this.data(t)]);case 1:return[2,r.apply(n,i.concat([o.sent()]))];case 2:return[2,Promise.reject("invalid value type: "+e.type)]}})})},AMatrix.prototype.statsAdvanced=function(t){return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.all)()),__WEBPACK_IMPORTED_MODULE_0_tslib__.b(this,void 0,void 0,function(){var e,n,r,i,o;return __WEBPACK_IMPORTED_MODULE_0_tslib__.c(this,function(s){switch(s.label){case 0:return e=this.root.valuetype,e.type!==__WEBPACK_IMPORTED_MODULE_4__datatype__.VALUE_TYPE_INT&&e.type!==__WEBPACK_IMPORTED_MODULE_4__datatype__.VALUE_TYPE_REAL?[3,2]:(n=__WEBPACK_IMPORTED_MODULE_5__math__.computeAdvancedStats,i=(r=[].concat).apply,o=[[]],[4,this.data(t)]);case 1:return[2,n.apply(void 0,[i.apply(r,o.concat([s.sent()]))])];case 2:return[2,Promise.reject("invalid value type: "+e.type)]}})})},AMatrix.prototype.hist=function(t,e,n){return void 0===e&&(e=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.all)()),void 0===n&&(n=0),__WEBPACK_IMPORTED_MODULE_0_tslib__.b(this,void 0,void 0,function(){var r,i,o,s,a;return __WEBPACK_IMPORTED_MODULE_0_tslib__.c(this,function(u){switch(u.label){case 0:return r=this.root.valuetype,[4,this.data(e)];case 1:switch(i=u.sent(),o=flatten(i,this.indices,n),r.type){case __WEBPACK_IMPORTED_MODULE_4__datatype__.VALUE_TYPE_CATEGORICAL:return s=r,[2,__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_5__math__.categoricalHist)(o.data,o.indices,o.data.length,s.categories.map(function(t){return"string"==typeof t?t:t.name}),s.categories.map(function(t){return"string"==typeof t?t:t.label||t.name}),s.categories.map(function(t){return"string"==typeof t?"gray":t.color||"gray"}))];case __WEBPACK_IMPORTED_MODULE_4__datatype__.VALUE_TYPE_INT:case __WEBPACK_IMPORTED_MODULE_4__datatype__.VALUE_TYPE_REAL:return a=r,[2,__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_5__math__.hist)(o.data,o.indices,o.data.length,t||Math.round(Math.sqrt(this.length)),a.range)];default:return[2,Promise.reject("invalid value type: "+r.type)]}return[2]}})})},AMatrix.prototype.idView=function(t){return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.all)()),__WEBPACK_IMPORTED_MODULE_0_tslib__.b(this,void 0,void 0,function(){var e,n;return __WEBPACK_IMPORTED_MODULE_0_tslib__.c(this,function(r){switch(r.label){case 0:return e=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.parse)(t),e.isAll?[2,Promise.resolve(this.root)]:[4,this.ids()];case 1:return n=r.sent(),[2,this.view(n.indexOf(e))]}})})},AMatrix.prototype.reduce=function(t,e,n,r){return new __WEBPACK_IMPORTED_MODULE_7__internal_ProjectedVector__.a(this.root,t,e,n,r)},AMatrix.prototype.restore=function(persisted){return persisted&&persisted.f?this.reduce(eval(persisted.f),this,persisted.valuetype,persisted.idtype?__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__idtype__.resolve)(persisted.idtype):void 0):persisted&&persisted.range?this.view(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.parse)(persisted.range)):persisted&&persisted.transposed?this.t:persisted&&persisted.col?this.slice(+persisted.col):persisted&&persisted.row?this.t.slice(+persisted.row):this},AMatrix}(__WEBPACK_IMPORTED_MODULE_3__idtype_AProductSelectAble__.a);__webpack_exports__.a=AMatrix;var MatrixView=function(t){function e(n,r,i){void 0===i&&(i=null);var o=t.call(this,n)||this;return o.range=r,o.t=i,o.range=r,r.dim(0),r.dim(1),i||(o.t=new e(n.t,r.swap(),o)),o}return __WEBPACK_IMPORTED_MODULE_0_tslib__.a(e,t),Object.defineProperty(e.prototype,"desc",{get:function(){return this.root.desc},enumerable:!0,configurable:!0}),e.prototype.persist=function(){return{root:this.root.persist(),range:this.range.toString()}},e.prototype.ids=function(t){return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.all)()),this.root.ids(this.range.preMultiply(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.parse)(t),this.root.dim))},e.prototype.cols=function(t){return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.all)()),this.root.cols(this.range.preMultiply(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.parse)(t),this.root.dim))},e.prototype.colIds=function(t){return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.all)()),this.root.colIds(this.range.preMultiply(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.parse)(t),this.root.dim))},e.prototype.rows=function(t){return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.all)()),this.root.rows(this.range.preMultiply(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.parse)(t),this.root.dim))},e.prototype.rowIds=function(t){return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.all)()),this.root.rowIds(this.range.preMultiply(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.parse)(t),this.root.dim))},e.prototype.size=function(){return this.range.size(this.root.dim)},e.prototype.at=function(t,e){var n=this.range.invert([t,e],this.root.dim);return this.root.at(n[0],n[1])},e.prototype.data=function(t){return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.all)()),this.root.data(this.range.preMultiply(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.parse)(t),this.root.dim))},e.prototype.hist=function(t,e,n){return void 0===e&&(e=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.all)()),void 0===n&&(n=0),this.root.hist(t,this.range.preMultiply(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.parse)(e),this.root.dim),n)},e.prototype.stats=function(t){return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.all)()),this.root.stats(this.range.preMultiply(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.parse)(t),this.root.dim))},e.prototype.statsAdvanced=function(t){return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.all)()),this.root.statsAdvanced(this.range.preMultiply(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.parse)(t),this.root.dim))},e.prototype.heatmapUrl=function(t,e){return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.all)()),void 0===e&&(e={}),this.root.heatmapUrl(this.range.preMultiply(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.parse)(t),this.root.dim),e)},e.prototype.view=function(t){void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.all)());var n=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.parse)(t);return n.isAll?this:new e(this.root,this.range.preMultiply(n,this.dim))},Object.defineProperty(e.prototype,"valuetype",{get:function(){return this.root.valuetype},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rowtype",{get:function(){return this.root.rowtype},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"coltype",{get:function(){return this.root.coltype},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"producttype",{get:function(){return this.root.producttype},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"idtypes",{get:function(){return this.root.idtypes},enumerable:!0,configurable:!0}),e}(AMatrix)},function(t,e,n){"use strict";function r(){return n.i(o.mixin)(n.i(i.createDefaultDataDesc)(),{type:"matrix",rowtype:"_rows",coltype:"_cols",size:[0,0]})}var i=n(3),o=n(2);n.d(e,"d",function(){return s}),n.d(e,"c",function(){return a}),n.d(e,"b",function(){return u}),e.a=r;var s=0,a=1,u=2},function(t,e,n){"use strict";function r(t,e){return"function"==typeof e?new d(t,n.i(h.a)(e)):new d(t,e||n.i(h.b)())}function i(t,e,r,i){void 0===i&&(i={});var o=Array.isArray(e)?e:t.map(function(t){return t[0]}).slice(1),l=r||t[0].slice(1);"object"==typeof e&&(i=e),i=i||{};var f=Array.isArray(e)?t:t.slice(1).map(function(t){return t.slice(1)}),h=n.i(a.guessValueTypeDesc)([].concat.apply([],f));h.type===a.VALUE_TYPE_REAL?f=f.map(function(t){return t.map(parseFloat)}):h.type===a.VALUE_TYPE_REAL&&(f=f.map(function(t){return t.map(parseInt)}));var y=n.i(u.mixin)(n.i(p.a)(),{size:[o.length,l.length],value:h},i),g=i.rowassigner||n.i(c.createLocalAssigner)(),v=i.rowassigner||n.i(c.createLocalAssigner)();return new d(y,{rowIds:function(t,e){return Promise.resolve(g(e.filter(o)))},colIds:function(t,e){return Promise.resolve(v(e.filter(l)))},ids:function(t,e){var r=g(e.dim(0).filter(o)),i=v(e.dim(1).filter(l));return Promise.resolve(n.i(s.join)(r,i))},at:function(t,e,n){return Promise.resolve(f[e][n])},rows:function(t,e){return Promise.resolve(e.filter(o))},cols:function(t,e){return Promise.resolve(e.filter(l))},data:function(t,e){return Promise.resolve(e.filter(f))}})}Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),s=n(1),a=n(3),u=n(2),c=n(4),p=n(53),l=n(52),f=n(110),h=n(111);e.create=r,e.asMatrix=i;var d=function(t){function e(e,r){var i=t.call(this,null)||this;return i.desc=e,i.loader=r,i.root=i,i.valuetype=e.value,i.rowtype=n.i(c.resolve)(e.rowtype),i.coltype=n.i(c.resolve)(e.coltype),i._producttype=n.i(c.resolveProduct)(i.rowtype,i.coltype),i.t=new f.a(i),i}return o.a(e,t),Object.defineProperty(e.prototype,"producttype",{get:function(){return this._producttype},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"idtypes",{get:function(){return[this.rowtype,this.coltype]},enumerable:!0,configurable:!0}),e.prototype.at=function(t,e){return this.loader.at(this.desc,t,e)},e.prototype.data=function(t){return void 0===t&&(t=n.i(s.all)()),this.loader.data(this.desc,n.i(s.parse)(t))},e.prototype.ids=function(t){return void 0===t&&(t=n.i(s.all)()),this.loader.ids(this.desc,n.i(s.parse)(t))},e.prototype.cols=function(t){return void 0===t&&(t=n.i(s.all)()),this.loader.cols(this.desc,n.i(s.parse)(t))},e.prototype.colIds=function(t){return void 0===t&&(t=n.i(s.all)()),this.loader.colIds(this.desc,n.i(s.parse)(t))},e.prototype.rows=function(t){return void 0===t&&(t=n.i(s.all)()),this.loader.rows(this.desc,n.i(s.parse)(t))},e.prototype.rowIds=function(t){return void 0===t&&(t=n.i(s.all)()),this.loader.rowIds(this.desc,n.i(s.parse)(t))},e.prototype.hist=function(e,r,i){return void 0===r&&(r=n.i(s.all)()),void 0===i&&(i=0),!this.loader.numericalHist||this.valuetype.type!==a.VALUE_TYPE_REAL&&this.valuetype.type!==a.VALUE_TYPE_INT?t.prototype.hist.call(this,e,r,i):this.loader.numericalHist(this.desc,n.i(s.parse)(r),e)},e.prototype.stats=function(e){return void 0===e&&(e=n.i(s.all)()),!this.loader.numericalStats||this.valuetype.type!==a.VALUE_TYPE_REAL&&this.valuetype.type!==a.VALUE_TYPE_INT?t.prototype.stats.call(this,e):this.loader.numericalStats(this.desc,n.i(s.parse)(e))},e.prototype.statsAdvanced=function(e){return void 0===e&&(e=n.i(s.all)()),!this.loader.numericalStats||this.valuetype.type!==a.VALUE_TYPE_REAL&&this.valuetype.type!==a.VALUE_TYPE_INT?t.prototype.statsAdvanced.call(this,e):this.loader.numericalStats(this.desc,n.i(s.parse)(e))},e.prototype.size=function(){return this.desc.size},e.prototype.persist=function(){return this.desc.id},e.prototype.heatmapUrl=function(t,e){return void 0===t&&(t=n.i(s.all)()),void 0===e&&(e={}),this.loader.heatmapUrl?this.loader.heatmapUrl(this.desc,t,e):null},e}(l.a);e.default=d},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(7),i=n(24);e.default=function(t){t.push("datatype","matrix",function(){return Promise.resolve().then(n.bind(null,54))},{}),t.push("datatype","table",function(){return Promise.resolve().then(n.bind(null,69))},{}),t.push("datatype","vector",function(){return Promise.resolve().then(n.bind(null,70))},{}),t.push("datatype","stratification",function(){return Promise.resolve().then(n.bind(null,65))},{}),t.push("datatype","graph",function(){return Promise.resolve().then(n.bind(null,44))},{}),t.push("datatype","atom",function(){return Promise.resolve().then(n.bind(null,40))},{}),t.push("tabSyncer","selection",function(){return Promise.resolve().then(n.bind(null,124))},{}),t.push(i.EP_PHOVEA_CORE_LOCALE,"phoveaCoreLocaleEN",function(){return Promise.resolve().then(n.bind(null,142)).then(r.asResource)},{ns:"phovea"})}},function(t,e,n){"use strict";function r(t,e,r,i,o){return void 0===e&&(e=u.b.data),void 0===r&&(r=u.c.update),void 0===i&&(i=Date.now()),void 0===o&&(o=n.i(c.currentUserNameOrAnonymous)()),new l(e,r,t,i,o)}function i(t,e,n,r,i){return void 0===r&&(r=[]),void 0===i&&(i={}),{meta:t,id:e,f:n,inputs:r,parameter:i}}function o(t,e){return+t.getAttr("index",0)-+e.getAttr("index",0)}var s=n(0),a=n(6),u=n(34),c=n(22),p=n(8);n.d(e,"c",function(){return l}),e.d=r,e.b=i;var l=function(){function t(t,e,r,i,o){void 0===i&&(i=Date.now()),void 0===o&&(o=n.i(c.currentUserNameOrAnonymous)()),this.category=t,this.operation=e,this.name=r,this.timestamp=i,this.user=o}return t.restore=function(e){return new t(e.category,e.operation,e.name,e.timestamp,e.user)},t.prototype.eq=function(t){return this.category===t.category&&this.operation===t.operation&&this.name===t.name},t.prototype.inv=function(t){return this.category===t.category&&(this.operation===u.c.update?t.operation===u.c.update:this.operation===u.c.create?t.operation===u.c.remove:t.operation===u.c.create)},t.prototype.toString=function(){return this.category+":"+this.operation+" "+this.name},t}(),f=function(t){function e(e,n,r,i){void 0===i&&(i={});var o=t.call(this,"action")||this;return o.f=r,t.prototype.setAttr.call(o,"meta",e),t.prototype.setAttr.call(o,"f_id",n),t.prototype.setAttr.call(o,"parameter",i),o}return s.a(e,t),e.prototype.clone=function(){return new e(this.meta,this.f_id,this.f,this.parameter)},Object.defineProperty(e.prototype,"name",{get:function(){return this.meta.name},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"meta",{get:function(){return t.prototype.getAttr.call(this,"meta")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"f_id",{get:function(){return t.prototype.getAttr.call(this,"f_id")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parameter",{get:function(){return t.prototype.getAttr.call(this,"parameter")},set:function(e){t.prototype.setAttr.call(this,"parameter",e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onceExecuted",{get:function(){return t.prototype.getAttr.call(this,"onceExecuted",!1)},set:function(e){this.onceExecuted!==e&&t.prototype.setAttr.call(this,"onceExecuted",e)},enumerable:!0,configurable:!0}),e.restore=function(t,n){return new e(l.restore(t.attrs.meta),t.attrs.f_id,n(t.attrs.f_id),t.attrs.parameter).restore(t)},e.prototype.toString=function(){return this.meta.name},Object.defineProperty(e.prototype,"inversedBy",{get:function(){var t=this.incoming.filter(n.i(a.d)("inverses"))[0];return t?t.source:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inverses",{get:function(){var t=this.outgoing.filter(n.i(a.d)("inverses"))[0];return t?t.target:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isInverse",{get:function(){return null!=this.outgoing.filter(n.i(a.d)("inverses"))[0]},enumerable:!0,configurable:!0}),e.prototype.getOrCreateInverse=function(t){var e=this.inversedBy;return e||(this.inverter?t.createInverse(this,this.inverter):(this.inverter=null,null))},e.prototype.updateInverse=function(t,e){var n=this.inversedBy;if(n){var r=e.call(this,this.requires,this.creates,this.removes);n.parameter=r.parameter,this.inverter=null}else this.isInverse?this.inverter=e:(t.createInverse(this,e),this.inverter=null)},e.prototype.execute=function(t,e){var r=this.f.call(this,this.requires,this.parameter,t,e);return n.i(p.a)(r)},e.prototype.equals=function(t){return this.meta.category===t.meta.category&&t.meta.operation===t.meta.operation&&this.f_id===t.f_id},Object.defineProperty(e.prototype,"uses",{get:function(){return this.outgoing.filter(n.i(a.d)(/(creates|removes|requires)/)).map(function(t){return t.target})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"creates",{get:function(){return this.outgoing.filter(n.i(a.d)("creates")).map(function(t){return t.target})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"removes",{get:function(){return this.outgoing.filter(n.i(a.d)("removes")).sort(o).map(function(t){return t.target})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"requires",{get:function(){return this.outgoing.filter(n.i(a.d)("requires")).sort(o).map(function(t){return t.target})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"resultsIn",{get:function(){var t=this.outgoing.filter(n.i(a.d)("resultsIn"))[0];return t?t.target:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"previous",{get:function(){var t=this.incoming.filter(n.i(a.d)("next"))[0];return t?t.source:null},enumerable:!0,configurable:!0}),e}(a.b);e.a=f},function(t,e,n){"use strict";var r=n(0),i=n(2),o=n(21),s=n(29),a=n(22),u=n(30),c=n(8),p=function(){function t(t){void 0===t&&(t={}),this.options={storage:localStorage,prefix:"clue",application:"unknown"},n.i(i.mixin)(this.options,t)}return t.prototype.loadFromLocalStorage=function(t,e){try{var n=this.options.storage.getItem(this.options.prefix+t);return void 0===n||null===n?e:JSON.parse(n)}catch(t){return console.error(t),e}},t.prototype.listSync=function(){var t=this;return this.loadFromLocalStorage("_provenance_graphs",[]).map(function(e){return t.loadFromLocalStorage("_provenance_graph."+e,{})}).filter(function(e){return e.attrs&&e.attrs.of===t.options.application})},t.prototype.list=function(){return n.i(c.a)(this.listSync())},t.prototype.getGraph=function(t){return n.i(c.a)(s.a.load(t,n.i(o.d)(),this.options.storage))},t.prototype.get=function(t){return r.b(this,void 0,void 0,function(){var e,n;return r.c(this,function(r){switch(r.label){case 0:return e=o.a.bind,n=[void 0,t],[4,this.getGraph(t)];case 1:return[2,new(e.apply(o.a,n.concat([r.sent()])))]}})})},t.prototype.clone=function(t,e){return void 0===e&&(e={}),r.b(this,void 0,void 0,function(){var s,a,u;return r.c(this,function(r){switch(r.label){case 0:return s="Cloned from "+t.desc.name+" created by "+t.desc.creator+"\n"+(t.desc.description||""),a=this.createDesc(n.i(i.mixin)({name:t.desc.name,description:s},e)),[4,this.getGraph(a)];case 1:return u=r.sent(),u.restoreDump(t.persist(),n.i(o.d)()),[2,new o.a(a,u)]}})})},t.prototype.import=function(t,e){return void 0===e&&(e={}),r.b(this,void 0,void 0,function(){var i,s;return r.c(this,function(r){switch(r.label){case 0:return i=this.createDesc(e),[4,this.getGraph(i)];case 1:return s=r.sent(),s.restoreDump(t,n.i(o.d)()),[2,new o.a(i,s)]}})})},t.prototype.delete=function(t){var e=JSON.parse(this.options.storage.getItem(this.options.prefix+"_provenance_graphs")||"[]");return e.splice(e.indexOf(t.id),1),s.a.delete(t,this.options.storage),this.options.storage.removeItem(this.options.prefix+"_provenance_graph."+t.id),this.options.storage.setItem(this.options.prefix+"_provenance_graphs",JSON.stringify(e)),n.i(c.a)(!0)},t.prototype.edit=function(t,e){void 0===e&&(e={});var r=t instanceof o.a?t.desc:t;return n.i(i.mixin)(r,e),this.options.storage.setItem(this.options.prefix+"_provenance_graph."+r.id,JSON.stringify(r)),n.i(c.a)(r)},t.prototype.createDesc=function(t){var e=this;void 0===t&&(t={});var r=JSON.parse(this.options.storage.getItem(this.options.prefix+"_provenance_graphs")||"[]"),o=r.length>0?String(1+Math.max.apply(Math,r.map(function(t){return parseInt(t.slice(e.options.prefix.length),10)}))):"0",s=this.options.prefix+o,u=n.i(i.mixin)({type:"provenance_graph",name:"Temporary Session "+o,fqname:this.options.prefix+"Temporary Session "+o,id:s,local:!0,size:[0,0],attrs:{graphtype:"provenance_graph",of:this.options.application},creator:n.i(a.currentUserNameOrAnonymous)(),permissions:a.ALL_READ_NONE,ts:Date.now(),description:""},t);return r.push(s),this.options.storage.setItem(this.options.prefix+"_provenance_graphs",JSON.stringify(r)),this.options.storage.setItem(this.options.prefix+"_provenance_graph."+s,JSON.stringify(u)),u},t.prototype.create=function(t){void 0===t&&(t={});var e=this.createDesc(t);return this.get(e)},t.prototype.createInMemoryDesc=function(t){return n.i(i.mixin)({type:"provenance_graph",name:"In Memory Session",fqname:"In Memory Session",id:"memory",local:!0,size:[0,0],attrs:{graphtype:"provenance_graph",of:this.options.application},creator:n.i(a.currentUserNameOrAnonymous)(),permissions:a.ALL_READ_NONE,ts:Date.now(),description:""},t||{},{id:"memory",local:!0})},t.prototype.createInMemory=function(){var t=this.createInMemoryDesc();return new o.a(t,new u.a(t,[],[],n.i(o.d)()))},t.prototype.cloneInMemory=function(t){var e=this.createInMemoryDesc(t.desc),r=new u.a(e,[],[],n.i(o.d)());return r.restore(t.persist()),new o.a(e,r)},t}();e.a=p},function(t,e,n){"use strict";var r=n(0),i=n(2),o=n(19),s=n(21),a=n(22),u=n(8),c=function(){function t(t){void 0===t&&(t={}),this.options={application:"unknown"},n.i(i.mixin)(this.options,t)}return t.prototype.list=function(){return r.b(this,void 0,void 0,function(){var t=this;return r.c(this,function(e){switch(e.label){case 0:return[4,n.i(o.list)(function(e){return"graph"===e.desc.type&&"provenance_graph"===e.desc.attrs.graphtype&&e.desc.attrs.of===t.options.application})];case 1:return[2,e.sent().map(function(t){return t.desc})]}})})},t.prototype.getGraph=function(t){return r.b(this,void 0,void 0,function(){return r.c(this,function(e){switch(e.label){case 0:return[4,n.i(o.get)(t.id)];case 1:return[2,e.sent().impl(n.i(s.d)())]}})})},t.prototype.get=function(t){return r.b(this,void 0,void 0,function(){var e,n;return r.c(this,function(r){switch(r.label){case 0:return e=s.a.bind,n=[void 0,t],[4,this.getGraph(t)];case 1:return[2,new(e.apply(s.a,n.concat([r.sent()])))]}})})},t.prototype.delete=function(t){return n.i(o.remove)(t)},t.prototype.clone=function(t,e){return void 0===e&&(e={}),this.import(t.persist(),e)},t.prototype.importImpl=function(t,e){void 0===e&&(e={});var r=n.i(i.mixin)({type:"graph",attrs:{graphtype:"provenance_graph",of:this.options.application},name:"Persistent WS",creator:n.i(a.currentUserNameOrAnonymous)(),ts:Date.now(),description:"",nodes:t.nodes,edges:t.edges},e);return n.i(o.upload)(r).then(function(t){return t.impl(n.i(s.d)())})},t.prototype.import=function(t,e){return void 0===e&&(e={}),this.importImpl(t,e).then(function(t){return new s.a(t.desc,t)})},t.prototype.migrate=function(t,e){return void 0===e&&(e={}),this.importImpl({nodes:[],edges:[]},e).then(function(e){return n.i(u.a)(t.backend.migrate()).then(function(t){var n=t.nodes,r=t.edges;return e.addAll(n,r)}).then(function(){return t.migrateBackend(e),t})})},t.prototype.edit=function(t,e){return void 0===e&&(e={}),r.b(this,void 0,void 0,function(){var a,u;return r.c(this,function(r){switch(r.label){case 0:return a=t instanceof s.a?t.desc:t,n.i(i.mixin)(a,e),[4,n.i(o.get)(a.id)];case 1:return u=r.sent(),[4,n.i(o.modify)(u,e)];case 2:return r.sent(),[2,a]}})})},t.prototype.create=function(t){return void 0===t&&(t={}),r.b(this,void 0,void 0,function(){var e,u;return r.c(this,function(r){switch(r.label){case 0:return e=n.i(i.mixin)({id:void 0,type:"graph",attrs:{graphtype:"provenance_graph",of:this.options.application},name:"Persistent WS",fqname:"provenance_graphs/Persistent WS",creator:n.i(a.currentUserNameOrAnonymous)(),size:[0,0],ts:Date.now(),description:""},t),[4,n.i(o.upload)(e)];case 1:return u=r.sent().impl(n.i(s.d)()),[2,u.then(function(t){return new s.a(t.desc,t)})]}})})},t}();e.a=c},function(t,e,n){"use strict";var r=n(0),i=n(6);n.d(e,"b",function(){return o}),n.d(e,"c",function(){return s});var o=1500,s=0,a=function(t){function e(){return t.call(this,"story")||this}return r.a(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return t.prototype.getAttr.call(this,"name","")},set:function(e){t.prototype.setAttr.call(this,"name",e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"description",{get:function(){return t.prototype.getAttr.call(this,"description","")},set:function(e){t.prototype.setAttr.call(this,"description",e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isTextOnly",{get:function(){return!this.outgoing.some(n.i(i.d)("jumpTo"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){var t=this.outgoing.filter(n.i(i.d)("jumpTo"))[0];return t?t.target:null},enumerable:!0,configurable:!0}),e.restore=function(t){return(new e).restore(t)},Object.defineProperty(e.prototype,"next",{get:function(){var t=this.outgoing.filter(n.i(i.d)("next"))[0];return t?t.target:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nexts",{get:function(){return this.outgoing.filter(n.i(i.d)("next")).map(function(t){return t.target})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"previous",{get:function(){var t=this.incoming.filter(n.i(i.d)("next"))[0];return t?t.source:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"slideIndex",{get:function(){var t=this.previous;return 1+(t?t.slideIndex:0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"duration",{get:function(){return this.getAttr("duration",o)},set:function(t){this.setAttr("duration",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"transition",{get:function(){return this.getAttr("transition",s)},set:function(t){this.setAttr("transition",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"annotations",{get:function(){return this.getAttr("annotations",[])},enumerable:!0,configurable:!0}),e.prototype.setAnnotation=function(t,e){var n=this.annotations;n[t]=e,this.setAttr("annotations",n)},e.prototype.updateAnnotation=function(t){this.setAttr("annotations",this.annotations)},e.prototype.removeAnnotation=function(t){var e=this.annotations;e.splice(t,1),this.setAttr("annotations",e)},e.prototype.removeAnnotationElem=function(t){var e=this.annotations;e.splice(e.indexOf(t),1),this.setAttr("annotations",e)},e.prototype.pushAnnotation=function(t){var e=this.annotations;e.push(t),this.setAttr("annotations",e),this.fire("push-annotations",t,e)},Object.defineProperty(e.prototype,"isStart",{get:function(){return null==this.previous},enumerable:!0,configurable:!0}),e.makeText=function(t){var n=new e;return t&&(n.pushAnnotation({type:"text",pos:[25,25],text:"# ${name}"}),n.name=t),n},e}(i.b);e.a=a},function(t,e,n){"use strict";var r=n(0),i=n(6),o=function(t){function e(e,n){void 0===n&&(n="");var r=t.call(this,"state")||this;return t.prototype.setAttr.call(r,"name",e),t.prototype.setAttr.call(r,"description",n),r}return r.a(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return t.prototype.getAttr.call(this,"name")},set:function(e){t.prototype.setAttr.call(this,"name",e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"description",{get:function(){return t.prototype.getAttr.call(this,"description","")},set:function(e){t.prototype.setAttr.call(this,"description",e)},enumerable:!0,configurable:!0}),e.restore=function(t){return new e(t.attrs.name).restore(t)},Object.defineProperty(e.prototype,"consistsOf",{get:function(){return this.outgoing.filter(n.i(i.d)("consistsOf")).map(function(t){return t.target})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"resultsFrom",{get:function(){return this.incoming.filter(n.i(i.d)("resultsIn")).map(function(t){return t.source})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"creator",{get:function(){var t=this.incoming.filter(n.i(i.d)("resultsIn")).map(function(t){return t.source}).filter(function(t){return!t.isInverse});return 0===t.length?null:t[0]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"next",{get:function(){return this.outgoing.filter(n.i(i.d)("next")).map(function(t){return t.target}).filter(function(t){return!t.isInverse})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"previousState",{get:function(){var t=this.creator;return t?t.previous:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"previousStates",{get:function(){return this.resultsFrom.map(function(t){return t.previous})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nextStates",{get:function(){return this.next.map(function(t){return t.resultsIn})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nextState",{get:function(){var t=this.next[0];return t?t.resultsIn:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){var t=this.previousState,e=[];return e.unshift(this),t&&t.pathImpl(e),e},enumerable:!0,configurable:!0}),e.prototype.pathImpl=function(t){var e=this.previousState;t.unshift(this),e&&t.indexOf(e)<0&&e.pathImpl(t)},e.prototype.toString=function(){return this.name},e}(i.b);e.a=o},function(t,e,n){"use strict";var r=n(62),i=n(26),o=n(118),s=function(){function t(t,e,n){if(void 0===e&&(e=-1),void 0===n&&(n=1),this.from=t,this.to=e,this.step=n,0===n)throw new Error("invalid step size: "+n)}return Object.defineProperty(t.prototype,"isAll",{get:function(){return 0===this.from&&-1===this.to&&1===this.step},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isSingle",{get:function(){return this.from+this.step===this.to},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isUnbound",{get:function(){return this.from<0||this.to<0},enumerable:!0,configurable:!0}),t.all=function(){return new t(0,-1,1)},t.none=function(){return new t(0,0,1)},t.single=function(t){return new o.a(t)},t.range=function(e,n,r){return void 0===n&&(n=-1),void 0===r&&(r=1),e+r===n?t.single(e):new t(e,n,r)},t.prototype.size=function(t){var e=n.i(r.a)(this.to,t),i=n.i(r.a)(this.from,t);if(1===this.step)return Math.max(e-i,0);if(-1===this.step)return-1===this.to?Math.max(i- -1,0):Math.max(i-e,0);var o=this.step>0?e-i+1:i-e+1,s=Math.abs(this.step);return o<=0?0:Math.floor(o/s)},t.prototype.clone=function(){return new t(this.from,this.to,this.step)},t.prototype.reverse=function(){if(this.step>0){var e=this.from-1,n=this.to-1;return new t(n,e,-this.step)}var e=this.from-1,n=this.to-1;return new t(n,e,-this.step)},t.prototype.invert=function(t,e){return this.isAll?t:n.i(r.a)(this.from,e)+t*this.step},t.prototype.iter=function(t){return this.step<0&&-1===this.to?n.i(i.range)(n.i(r.a)(this.from,t),-1,this.step):n.i(i.range)(n.i(r.a)(this.from,t),n.i(r.a)(this.to,t),this.step)},Object.defineProperty(t.prototype,"__iterator__",{get:function(){return this.iter()},enumerable:!0,configurable:!0}),t.prototype.contains=function(t,e){if(this.isAll)return!0;var i=n.i(r.a)(this.from,e),o=n.i(r.a)(this.to,e);return-1===this.step?-1===this.to?t<=i&&t>=0:t<=i&&t>o:1===this.step?t>=i&&t<o:this.iter(e).asList().indexOf(t)>=0},t.prototype.toString=function(){if(this.isAll)return"";if(this.isSingle)return this.from.toString();var t=this.from+":"+this.to;return 1!==this.step&&(t+=":"+this.step),t},t.parse=function(e){if(0===e.length)return t.all();var n=function(t,e){if(void 0===e&&(e=NaN),""===(t=t.trim())&&!isNaN(e))return e;var n=parseInt(t,10);if(isNaN(n))throw Error('parse error: "'+t+'" is not a valid integer');return n},r=e.split(":");switch(r.length){case 1:return t.single(n(r[0]));case 2:return new t(n(r[0],0),n(r[1],-1));case 3:return new t(n(r[0],0),n(r[1],-1),n(r[2],1));default:throw new Error('parse error: "'+e+'" is not a valid range specifier')}},t}();e.a=s},function(t,e,n){"use strict";function r(t,e){return t<0?e+1+t:t}e.a=r},function(t,e,n){"use strict";function r(t,e){var n=a.getItem(t);return a.setItem(t,JSON.stringify(e)),n}function i(t){a.removeItem(t)}function o(t){return null!==a.getItem(t)}function s(t,e){return void 0===e&&(e=null),o(t)?JSON.parse(a.getItem(t)):e}Object.defineProperty(e,"__esModule",{value:!0}),e.store=r,e.remove=i,e.has=o,e.retrieve=s;var a=sessionStorage},function(t,e,n){"use strict";function r(t,e){switch(e.toLowerCase()){case"male":return"blue";case"female":return"red";case"deceased":return"#e41a1b";case"living":return"#377eb8"}return"gray"}function i(){return n.i(o.mixin)(n.i(s.createDefaultDataDesc)(),{type:"stratification",idtype:"_rows",size:0,groups:[],ngroups:0})}var o=n(2),s=n(3);e.a=r,e.b=i},function(t,e,n){"use strict";function r(t){return new _(t,n.i(g.a)())}function i(t,e,r,i){return new _(t,n.i(g.b)(e,r,i))}function o(t,e,r){void 0===r&&(r={});var i=n.i(u.mixin)(n.i(d.b)(),{size:0,groups:e.groups.map(function(t){return{name:t.name,color:t.color,size:t.length}}),ngroups:e.groups.length},r),o=r.rowassigner||n.i(p.createLocalAssigner)();return new _(i,n.i(g.b)(t,o(t),e))}function s(t){function e(){return Promise.all([t.groups(),t.ids(),t.names()]).then(function(t){return t[0].groups.forEach(function(t,e){return r[e].size=t.length}),{range:t[0],rowIds:t[1],rows:t[2]}})}if(t.valuetype.type!==l.VALUE_TYPE_CATEGORICAL)throw new Error("invalid vector value type: "+t.valuetype.type);var n=function(t){if("string"==typeof t)return{name:t,color:"gray",size:NaN};var e=t;return{name:e.name,color:e.color||"gray",size:NaN}},r=t.desc.value.categories.map(n),i={id:t.desc.id+"-s",type:"stratification",name:t.desc.name+"-s",fqname:t.desc.fqname+"-s",description:t.desc.description,idtype:t.idtype.id,ngroups:r.length,groups:r,size:t.length,creator:t.desc.creator,ts:t.desc.ts};return new _(i,e)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(0),u=n(2),c=n(1),p=n(4),l=n(3),f=n(19),h=n(11),d=n(64),y=n(66),g=n(123),v=n(120);e.create=r,e.wrap=i,e.asStratification=o,e.wrapCategoricalVector=s;var _=function(t){function e(e,n){var r=t.call(this,e)||this;return r.loader=n,r}return a.a(e,t),Object.defineProperty(e.prototype,"idtype",{get:function(){return n.i(p.resolve)(this.desc.idtype)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"groups",{get:function(){return this.desc.groups},enumerable:!0,configurable:!0}),e.prototype.group=function(t){return new y.a(this,t,this.groups[t])},e.prototype.hist=function(t,e){return a.b(this,void 0,void 0,function(){var t;return a.c(this,function(e){switch(e.label){case 0:return t=h.rangeHist,[4,this.range()];case 1:return[2,t.apply(void 0,[e.sent()])]}})})},e.prototype.vector=function(){return this.asVector()},e.prototype.asVector=function(){var t=this;return this._v||(this._v=this.loader(this.desc).then(function(e){return new v.a(t,e.range)})),this._v},e.prototype.origin=function(){return"origin"in this.desc?n.i(f.getFirstByFQName)(this.desc.origin):Promise.reject("no origin specified")},e.prototype.range=function(){return a.b(this,void 0,void 0,function(){return a.c(this,function(t){switch(t.label){case 0:return[4,this.loader(this.desc)];case 1:return[2,t.sent().range]}})})},e.prototype.idRange=function(){return a.b(this,void 0,void 0,function(){var t,e,n;return a.c(this,function(r){switch(r.label){case 0:return[4,this.loader(this.desc)];case 1:return t=r.sent(),e=t.rowIds.dim(0),n=t.range,[2,e.preMultiply(n,this.dim[0])]}})})},e.prototype.names=function(t){return void 0===t&&(t=n.i(c.all)()),a.b(this,void 0,void 0,function(){var e,r;return a.c(this,function(i){switch(i.label){case 0:return r=(e=n.i(c.parse)(t)).filter,[4,this.loader(this.desc)];case 1:return[2,r.apply(e,[i.sent().rows,this.dim])]}})})},e.prototype.ids=function(t){return void 0===t&&(t=n.i(c.all)()),a.b(this,void 0,void 0,function(){return a.c(this,function(e){switch(e.label){case 0:return[4,this.loader(this.desc)];case 1:return[2,e.sent().rowIds.preMultiply(n.i(c.parse)(t),this.dim)]}})})},Object.defineProperty(e.prototype,"idtypes",{get:function(){return[this.idtype]},enumerable:!0,configurable:!0}),e.prototype.size=function(){return this.desc.size},Object.defineProperty(e.prototype,"length",{get:function(){return this.dim[0]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngroups",{get:function(){return this.desc.ngroups},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dim",{get:function(){return[this.size()]},enumerable:!0,configurable:!0}),e.prototype.persist=function(){return this.desc.id},e}(l.ADataType);e.default=_},function(t,e,n){"use strict";var r=n(0),i=n(1),o=n(4),s=n(11),a=function(t){function e(e,n,r){var i=t.call(this)||this;return i.root=e,i.groupIndex=n,i.groupDesc=r,i}return r.a(e,t),Object.defineProperty(e.prototype,"desc",{get:function(){return this.root.desc},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"groups",{get:function(){return[this.groupDesc]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngroups",{get:function(){return 1},enumerable:!0,configurable:!0}),e.prototype.group=function(t){return 0===t?this:null},Object.defineProperty(e.prototype,"idtype",{get:function(){return this.root.idtype},enumerable:!0,configurable:!0}),e.prototype.hist=function(t,e){return void 0===e&&(e=n.i(i.all)()),r.b(this,void 0,void 0,function(){var t;return r.c(this,function(e){switch(e.label){case 0:return t=s.rangeHist,[4,this.range()];case 1:return[2,t.apply(void 0,[e.sent()])]}})})},e.prototype.vector=function(){return this.asVector()},e.prototype.asVector=function(){return Promise.all([this.root.asVector(),this.rangeGroup()]).then(function(t){return t[0].view(n.i(i.list)(t[1]))})},e.prototype.origin=function(){return this.root.origin()},e.prototype.range=function(){return r.b(this,void 0,void 0,function(){var t;return r.c(this,function(e){switch(e.label){case 0:return[4,this.rangeGroup()];case 1:return t=e.sent(),[2,new i.CompositeRange1D(t.name,[t])]}})})},e.prototype.idRange=function(){return r.b(this,void 0,void 0,function(){var t,e;return r.c(this,function(n){switch(n.label){case 0:return[4,this.root.idRange()];case 1:return t=n.sent(),e=t.groups[this.groupIndex],[2,new i.CompositeRange1D(e.name,[e])]}})})},e.prototype.rangeGroup=function(){return r.b(this,void 0,void 0,function(){var t;return r.c(this,function(e){switch(e.label){case 0:return[4,this.root.range()];case 1:return t=e.sent(),[2,t.groups[this.groupIndex]]}})})},e.prototype.names=function(t){return void 0===t&&(t=n.i(i.all)()),r.b(this,void 0,void 0,function(){var e,o;return r.c(this,function(r){switch(r.label){case 0:return[4,this.rangeGroup()];case 1:return e=r.sent(),o=n.i(i.list)(e).preMultiply(n.i(i.parse)(t)),[2,this.root.names(o)]}})})},e.prototype.ids=function(t){return void 0===t&&(t=n.i(i.all)()),r.b(this,void 0,void 0,function(){var e,o;return r.c(this,function(r){switch(r.label){case 0:return[4,this.rangeGroup()];case 1:return e=r.sent(),o=n.i(i.list)(e).preMultiply(n.i(i.parse)(t)),[2,this.root.ids(o)]}})})},e.prototype.idView=function(t){return void 0===t&&(t=n.i(i.all)()),Promise.reject("not implemented")},e.prototype.toString=function(){return this.persist()},Object.defineProperty(e.prototype,"idtypes",{get:function(){return[this.idtype]},enumerable:!0,configurable:!0}),e.prototype.size=function(){return[this.length]},Object.defineProperty(e.prototype,"length",{get:function(){return this.groupDesc.size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dim",{get:function(){return this.size()},enumerable:!0,configurable:!0}),e.prototype.persist=function(){return{root:this.root.persist(),group:this.groupIndex}},e.prototype.restore=function(t){return this},e}(o.SelectAble);e.a=a},function(t,e,n){"use strict";var r=n(2),i=n(125),o=n(7),s="tabSyncer",a=function(){function t(e){var a=this;this.options={keyPrefix:"tab-sync-",storage:localStorage},n.i(r.mixin)(this.options,e),this.store=new i.a(this.options.storage,this.options.keyPrefix),this.store.on(i.a.EVENT_CHANGED,t.handleChange.bind(this)),n.i(o.load)(n.i(o.list)(s)).then(function(t){t.forEach(function(t){return a.push(t.factory)})}),this.registerTab(document.location.href),window.addEventListener("beforeunload",function(){a.unregisterTab(document.location.href)})}return t.prototype.push=function(t){t(this.store)},t.prototype.registerTab=function(e){var n=this.getTabList();n.push(e),this.store.setValue(t.TAB_LIST,n)},t.handleChange=function(t,e,n,r,i){console.log("change in local storage",e,n,r,i)},t.prototype.unregisterTab=function(e){var n=this.getTabList(),r=n.indexOf(e);r>=0&&(n.splice(r,1),this.store.setValue(t.TAB_LIST,n))},t.prototype.getTabList=function(){return this.store.getValue(t.TAB_LIST,[])},t.TAB_LIST="tabList",t}();e.a=a},function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_tslib__=__webpack_require__(0),__WEBPACK_IMPORTED_MODULE_1__range__=__webpack_require__(1),__WEBPACK_IMPORTED_MODULE_2__idtype__=__webpack_require__(4),__WEBPACK_IMPORTED_MODULE_3__internal_MultiTableVector__=__webpack_require__(129),ATable=function(_super){function ATable(t){var e=_super.call(this)||this;return e.root=t,e}return __WEBPACK_IMPORTED_MODULE_0_tslib__.a(ATable,_super),Object.defineProperty(ATable.prototype,"dim",{get:function(){return this.size()},enumerable:!0,configurable:!0}),Object.defineProperty(ATable.prototype,"nrow",{get:function(){return this.dim[0]},enumerable:!0,configurable:!0}),Object.defineProperty(ATable.prototype,"ncol",{get:function(){return this.dim[1]},enumerable:!0,configurable:!0}),ATable.prototype.view=function(t){return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.all)()),new TableView(this.root,__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.parse)(t))},ATable.prototype.idView=function(t){return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.all)()),__WEBPACK_IMPORTED_MODULE_0_tslib__.b(this,void 0,void 0,function(){var e;return __WEBPACK_IMPORTED_MODULE_0_tslib__.c(this,function(n){switch(n.label){case 0:return e=this.view,[4,this.ids()];case 1:return[2,e.apply(this,[n.sent().indexOf(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.parse)(t))])]}})})},ATable.prototype.reduce=function(t,e,n,r){return new __WEBPACK_IMPORTED_MODULE_3__internal_MultiTableVector__.a(this.root,t,e,n,r)},ATable.prototype.restore=function(persisted){return persisted&&persisted.f?this.reduce(eval(persisted.f),this,persisted.valuetype,persisted.idtype?__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__idtype__.resolve)(persisted.idtype):void 0):persisted&&persisted.range?this.view(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.parse)(persisted.range)):this},ATable}(__WEBPACK_IMPORTED_MODULE_2__idtype__.SelectAble);__webpack_exports__.a=ATable;var TableView=function(t){function e(e,n){var r=t.call(this,e)||this;return r.range=n,r.range=n,r.vectors=r.root.cols(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.list)(n.dim(1))).map(function(t){return t.view(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.list)(n.dim(0)))}),r}return __WEBPACK_IMPORTED_MODULE_0_tslib__.a(e,t),Object.defineProperty(e.prototype,"desc",{get:function(){return this.root.desc},enumerable:!0,configurable:!0}),e.prototype.persist=function(){return{root:this.root.persist(),range:this.range.toString()}},e.prototype.restore=function(t){var e=this;return t&&t.range&&(e=e.view(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.parse)(t.range))),e},e.prototype.size=function(){return this.range.size(this.root.dim)},e.prototype.at=function(t,e){var n=this.range.invert([t,e],this.root.dim);return this.root.at(n[0],n[1])},e.prototype.col=function(t){return this.vectors[t]},e.prototype.cols=function(t){return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.all)()),__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.parse)(t).filter(this.vectors,[this.ncol])},e.prototype.data=function(t){return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.all)()),this.root.data(this.range.preMultiply(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.parse)(t),this.root.dim))},e.prototype.colData=function(t,e){return this.dataOfColumn(t,e)},e.prototype.dataOfColumn=function(t,e){void 0===e&&(e=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.all)());var n=this.range.dim(0).preMultiply(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.parse)(e).dim(0),this.root.dim[0]);return this.root.dataOfColumn(t,new __WEBPACK_IMPORTED_MODULE_1__range__.Range([n]))},e.prototype.objects=function(t){return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.all)()),this.root.objects(this.range.preMultiply(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.parse)(t),this.root.dim))},e.prototype.rows=function(t){return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.all)()),this.root.rows(this.range.preMultiply(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.parse)(t),this.root.dim))},e.prototype.rowIds=function(t){return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.all)()),this.root.rowIds(this.range.preMultiply(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.parse)(t),this.root.dim))},e.prototype.ids=function(t){return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.all)()),this.rowIds(t)},e.prototype.view=function(t){void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.all)());var n=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__range__.parse)(t);return n.isAll?this:new e(this.root,this.range.preMultiply(n,this.dim))},Object.defineProperty(e.prototype,"idtype",{get:function(){return this.root.idtype},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"idtypes",{get:function(){return[this.idtype]},enumerable:!0,configurable:!0}),e.prototype.queryView=function(t,e){throw new Error("not implemented")},e}(ATable)},function(t,e,n){"use strict";function r(t,e){return e?new m(t,n.i(_.a)(e)):new m(t,n.i(_.b)())}function i(t,e,r){return new m(t,n.i(_.a)(n.i(_.c)(e,r)))}function o(t,e){return t.map(function(t){var n={};return e.forEach(function(e,r){return n[e]=t[r]}),n})}function s(t,e){return t.map(function(t){return e.map(function(e){return t[e]})})}function a(t,e,r,i,o){void 0===o&&(o={});var s=n.i(l.mixin)(n.i(y.a)(),{columns:t,size:[e.length,t.length]},o),a=o.rowassigner||n.i(h.createLocalAssigner)(),u=function(){var t={rowIds:a(e),rows:e,objs:r,data:i};return Promise.resolve(t)};return new m(s,n.i(_.a)(u))}function u(t,e){void 0===e&&(e={});var r=t.map(function(t){return t[0]}),i=t[0].slice(1),s=t.slice(1).map(function(t){return t.slice(1)}),u=i.map(function(t,e){return{name:t,column:t,value:n.i(d.guessValueTypeDesc)(s.map(function(t){return t[e]}))}}),c=s.map(function(t){return u.map(function(e,n){return e.value.type===d.VALUE_TYPE_REAL||e.value.type===d.VALUE_TYPE_INT?parseFloat(t[n]):t[n]})}),p=o(c,i);return a(u,r,p,c,e)}function c(t,e){void 0===e&&(e={});var r=e.keyProperty||"_id",i=t.map(function(t,e){return String(t[r]||e)}),o=Object.keys(t[0]),u=t,c=s(u,o);return a(o.map(function(t,e){return{name:t,column:t,value:n.i(d.guessValueTypeDesc)(c.map(function(t){return t[e]}))}}),i,u,c,e)}Object.defineProperty(e,"__esModule",{value:!0});var p=n(0),l=n(2),f=n(1),h=n(4),d=n(3),y=n(127),g=n(68),v=n(131),_=n(133);e.create=r,e.wrapObjects=i,e.asTableFromArray=u,e.asTable=c;var m=function(t){function e(e,n){var r=t.call(this,null)||this;return r.desc=e,r.loader=n,e.columns.forEach(function(t){return t.column=t.column||t.name}),r.root=r,r.vectors=e.columns.map(function(t,e){return new v.a(r,e,t)}),r}return p.a(e,t),Object.defineProperty(e.prototype,"idtype",{get:function(){return n.i(h.resolve)(this.desc.idtype||this.desc.rowtype)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"idtypes",{get:function(){return[this.idtype]},enumerable:!0,configurable:!0}),e.prototype.col=function(t){return this.vectors[t]},e.prototype.cols=function(t){return void 0===t&&(t=n.i(f.all)()),n.i(f.parse)(t).filter(this.vectors,[this.ncol])},e.prototype.at=function(t,e){return p.b(this,void 0,void 0,function(){return p.c(this,function(r){switch(r.label){case 0:return[4,this.colData(this.col(e).column,n.i(f.list)(t))];case 1:return[2,r.sent()[0]]}})})},e.prototype.queryView=function(t,r){return new e(this.desc,n.i(_.a)(this.loader.view(this.desc,t,r)))},e.prototype.data=function(t){return void 0===t&&(t=n.i(f.all)()),this.loader.data(this.desc,n.i(f.parse)(t))},e.prototype.colData=function(t,e){return void 0===e&&(e=n.i(f.all)()),this.dataOfColumn(t,e)},e.prototype.dataOfColumn=function(t,e){return void 0===e&&(e=n.i(f.all)()),this.loader.col(this.desc,t,n.i(f.parse)(e))},e.prototype.objects=function(t){return void 0===t&&(t=n.i(f.all)()),this.loader.objs(this.desc,n.i(f.parse)(t))},e.prototype.rows=function(t){return void 0===t&&(t=n.i(f.all)()),this.loader.rows(this.desc,n.i(f.parse)(t))},e.prototype.rowIds=function(t){return void 0===t&&(t=n.i(f.all)()),this.loader.rowIds(this.desc,n.i(f.parse)(t))},e.prototype.ids=function(t){return void 0===t&&(t=n.i(f.all)()),this.rowIds(t)},e.prototype.size=function(){return this.desc.size},e.prototype.persist=function(){return this.desc.id},e.prototype.restore=function(e){return e&&"number"==typeof e.col?this.col(e.col):t.prototype.restore.call(this,e)},e}(g.a);e.default=m},function(t,e,n){"use strict";function r(t){return"function"==typeof t.loader?new d(t,t.loader):new d(t,n.i(h.a)())}function i(t,e,r,i){return new d(t,n.i(h.b)(e,r,i))}function o(t,e,r){void 0===r&&(r={});var i=n.i(a.mixin)(n.i(l.a)(),{size:e.length,value:n.i(p.guessValueTypeDesc)(e)},r),o=r.rowassigner||n.i(c.createLocalAssigner)();return new d(i,n.i(h.b)(t,o(t),e))}Object.defineProperty(e,"__esModule",{value:!0});var s=n(0),a=n(2),u=n(1),c=n(4),p=n(3),l=n(134),f=n(12),h=n(139);e.create=r,e.wrap=i,e.asVector=o;var d=function(t){function e(e,n){var r=t.call(this,null)||this;return r.desc=e,r.loader=n,r.root=r,r}return s.a(e,t),Object.defineProperty(e.prototype,"valuetype",{get:function(){return this.desc.value},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"idtype",{get:function(){return n.i(c.resolve)(this.desc.idtype)},enumerable:!0,configurable:!0}),e.prototype.load=function(){return this.loader(this.desc)},e.prototype.at=function(t){return s.b(this,void 0,void 0,function(){return s.c(this,function(e){switch(e.label){case 0:return[4,this.load()];case 1:return[2,e.sent().data[t]]}})})},e.prototype.data=function(t){return void 0===t&&(t=n.i(u.all)()),s.b(this,void 0,void 0,function(){var e,r;return s.c(this,function(i){switch(i.label){case 0:return[4,this.load()];case 1:return e=i.sent(),r=n.i(u.parse)(t).filter(e.data,this.dim),this.valuetype.type===p.VALUE_TYPE_REAL||this.valuetype.type===p.VALUE_TYPE_INT?[2,n.i(p.mask)(r,this.valuetype)]:[2,r]}})})},e.prototype.names=function(t){return void 0===t&&(t=n.i(u.all)()),s.b(this,void 0,void 0,function(){var e;return s.c(this,function(r){switch(r.label){case 0:return[4,this.load()];case 1:return e=r.sent(),[2,n.i(u.parse)(t).filter(e.rows,this.dim)]}})})},e.prototype.ids=function(t){return void 0===t&&(t=n.i(u.all)()),s.b(this,void 0,void 0,function(){var e;return s.c(this,function(r){switch(r.label){case 0:return[4,this.load()];case 1:return e=r.sent(),[2,e.rowIds.preMultiply(n.i(u.parse)(t),this.dim)]}})})},Object.defineProperty(e.prototype,"idtypes",{get:function(){return[this.idtype]},enumerable:!0,configurable:!0}),e.prototype.size=function(){return this.desc.size},e.prototype.sort=function(t,e){return s.b(this,void 0,void 0,function(){var r,i;return s.c(this,function(o){switch(o.label){case 0:return[4,this.data()];case 1:return r=o.sent(),i=n.i(a.argSort)(r,t,e),[2,this.view(n.i(u.list)(i))]}})})},e.prototype.filter=function(t,e){return s.b(this,void 0,void 0,function(){var r,i;return s.c(this,function(o){switch(o.label){case 0:return[4,this.data()];case 1:return r=o.sent(),i=n.i(a.argFilter)(r,t,e),[2,this.view(n.i(u.list)(i))]}})})},e.prototype.persist=function(){return this.desc.id},e}(f.b);e.default=d},function(t,e,n){function r(t,e){return t===i?t===e?0:-1:e===i?1:t.toLowerCase().localeCompare(e.toLowerCase())}var i="./index.ts",o=n(143),s=o.keys().sort(r);s[0]===i?t.exports=o(s.shift()):t.exports={},s.forEach(function(e){Object.defineProperty(t.exports,e.substring(2,e.lastIndexOf("/index.")>0?e.lastIndexOf("/index."):e.lastIndexOf(".")),{get:function(){return o(e)},enumerable:!0})})},function(t,e,n){t.exports=n.p+"buildInfo.json"},function(t,e,n){t.exports=n.p+"phoveaMetaData.json"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(7),i=n(55);n.i(r.register)("phovea_core",i.default)},function(t,e,n){"use strict";function r(t){if(Array.isArray(t))return t}e.a=r},function(t,e,n){"use strict";function r(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}e.a=r},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.a=r},function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}e.a=i},function(t,e,n){"use strict";function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}e.a=r},function(t,e,n){"use strict";function r(t){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}e.a=r},function(t,e,n){"use strict";function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&n.i(i.a)(t,e)}var i=n(88);e.a=r},function(t,e,n){"use strict";function r(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}e.a=r},function(t,e,n){"use strict";function r(t,e){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return n}}e.a=r},function(t,e,n){"use strict";function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}e.a=r},function(t,e,n){"use strict";function r(){throw new TypeError("Invalid attempt to spread non-iterable instance")}e.a=r},function(t,e,n){"use strict";function r(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?Object(arguments[e]):{},o=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(r).filter(function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable}))),o.forEach(function(e){n.i(i.a)(t,e,r[e])})}return t}var i=n(79);e.a=r},function(t,e,n){"use strict";function r(t,e){return!e||"object"!==n.i(i.a)(e)&&"function"!=typeof e?n.i(o.a)(t):e}var i=n(39),o=n(38);e.a=r},function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}e.a=r},function(t,e,n){"use strict";function r(t,e){return n.i(i.a)(t)||n.i(o.a)(t,e)||n.i(s.a)()}var i=n(75),o=n(83),s=n(84);e.a=r},function(t,e,n){"use strict";function r(t){return n.i(i.a)(t)||n.i(o.a)(t)||n.i(s.a)()}var i=n(76),o=n(82),s=n(85);e.a=r},function(t,e,n){"use strict";var r=n(0),i=n(1),o=n(4),s=function(t){function e(e){var n=t.call(this)||this;return n.desc=e,n}return r.a(e,t),Object.defineProperty(e.prototype,"dim",{get:function(){return[1]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"valuetype",{get:function(){return this.desc.value},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"idtype",{get:function(){return n.i(o.resolve)(this.desc.idtype)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"idtypes",{get:function(){return[this.idtype]},enumerable:!0,configurable:!0}),e.prototype.ids=function(t){return void 0===t&&(t=n.i(i.all)()),t=n.i(i.parse)(t),t.isNone?Promise.resolve(n.i(i.none)()):this.id()},e.prototype.idView=function(t){return Promise.resolve(this)},e.prototype.persist=function(){return this.desc.id},e.prototype.restore=function(t){return this},e}(o.SelectAble);e.a=s},function(t,e,n){"use strict";function r(){return n.i(i.mixin)(n.i(o.createDefaultDataDesc)(),{type:"atom",idtype:"_rows",value:{type:"string"}})}var i=n(2),o=n(3);e.a=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(40);n.d(e,"asAtom",function(){return r.asAtom})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(5);n.d(e,"ZoomLogic",function(){return o}),n.d(e,"ZoomBehavior",function(){return s});var o=function(t){function e(e,n){var r=t.call(this)||this;return r.v=e,r.meta=n,r}return r.a(e,t),e.prototype.zoomIn=function(){return this.zoom(1,1)},e.prototype.zoomOut=function(){return this.zoom(-1,-1)},e.prototype.zoom=function(t,e){function n(t){return t>0?.2:t<0?-.2:0}if(!this.v)return null;var r=this.v.transform(),i=n(t),o=n(e);return this.zoomSet(r.scale[0]+i,r.scale[1]+o)},Object.defineProperty(e.prototype,"isWidthFixed",{get:function(){return this.meta&&"height-only"===this.meta.scaling},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isHeightFixed",{get:function(){return this.meta&&"width-only"===this.meta.scaling},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isFixedAspectRatio",{get:function(){return this.meta&&"aspect"===this.meta.scaling},enumerable:!0,configurable:!0}),e.prototype.zoomSet=function(t,e){if(!this.v)return null;var n=this.v.transform(),r=[t,e];switch(this.meta?this.meta.scaling:"free"){case"width-only":r[1]=n.scale[1];break;case"height-only":r[0]=n.scale[0]}return r[0]<=0&&(r[0]=.001),r[1]<=0&&(r[1]=.001),this.meta&&"aspect"===this.meta.scaling&&(r[0]=r[1]=Math.min.apply(Math,r)),this.fire("zoom",{scale:r,rotate:n.rotate},n),this.v.transform(r,n.rotate)},e.prototype.zoomTo=function(t,e){if(!this.v)return null;var n=this.v.rawSize;return this.zoomSet(t/n[0],e/n[1])},e}(i.EventHandler),s=function(t){function e(e,n,r){var i=t.call(this,n,r)||this;return e.addEventListener("mousewheel",function(t){if(i.v){var e=t.ctrlKey,n=t.shiftKey,r=t.altKey,o=t.wheelDelta;i.zoom(o*(e||r?1:0),o*(e||n?1:0)),(e||n||r)&&t.preventDefault()}}),i}return r.a(e,t),e}(o)},function(t,e,n){"use strict";function r(){return i.b(this,void 0,void 0,function(){var t;return i.c(this,function(e){switch(e.label){case 0:return[4,Promise.all(n.i(s.list)(a.EP_PHOVEA_CORE_LOCALE).map(function(t){return t.load().then(function(e){return{lng:t.lng||u,ns:t.ns||c,resources:e.factory(),order:t.order||0}})}))];case 1:return t=e.sent(),[2,p.use({type:"postProcessor",name:"showKeyDebugger",process:function(t,e,n,r){return r.options.debug?e:t}}).init({debug:!1,appendNamespaceToCIMode:!0,interpolation:{escapeValue:!0,format:function(t,e){return"uppercase"===e?t.toUpperCase():"lowercase"===e?t.toLowerCase():t}},ns:c,defaultNS:c,lng:u,fallbackLng:u,postProcess:["showKeyDebugger"]}).then(function(){t.sort(function(t,e){return t.order-e.order}).forEach(function(t){p.addResourceBundle(t.lng,t.ns,t.resources,!0,!0)})})]}})})}Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),o=n(141),s=n(7),a=n(24);e.initI18n=r;var u="en",c="default_namespace",p=o.a.createInstance();e.default=p},function(t,e,n){"use strict";function r(){var t=new s;return t.map.bind(t)}var i=n(2),o=n(1);e.b=r;var s=function(){function t(){this.pool=new i.IdPool,this.lookup=new Map}return t.prototype.unmapOne=function(t){return this.unmap([t])[0]},t.prototype.unmap=function(t){var e=this,n=Object.keys(this.lookup);return t.map(function(t){for(var r in n)if(e.lookup.get(r)===t)return r;return null})},t.prototype.mapOne=function(t){return this.lookup.has(t)?this.lookup.get(t):(this.lookup.set(t,this.pool.checkOut()),this.lookup.get(t))},t.prototype.map=function(t){var e=this,n=t.map(function(t){return e.mapOne(t)});return o.list.apply(void 0,n)},t}();e.a=s},function(t,e,n){"use strict";function r(t){return t.id}function i(t){return function(e){return e&&e.id===t}}var o=n(0),s=n(2),a=n(14),u=n(17);e.c=r,e.b=i;var c=function(t){function e(e,n){var r=t.call(this,e,n,n+"s",!0)||this;return r.instances=[],r.pool=new s.IdPool,r}return o.a(e,t),e.prototype.nextId=function(t){var e=this.pool.checkOut();return t&&(t.id=e,this.instances[e]=t,this.fire("add",e,t)),e},e.prototype.push=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];e.forEach(function(e){t.instances[e.id]=e,t.fire("add",e.id,e)})},e.prototype.byId=function(t){return this.instances[t]},e.prototype.forEach=function(t,e){var n=this;this.instances.forEach(function(r,i){return n.pool.isCheckedOut(i)?t.call(e,r):null})},Object.defineProperty(e.prototype,"entries",{get:function(){var t=this;return this.instances.filter(function(e,n){return t.pool.isCheckedOut(n)})},enumerable:!0,configurable:!0}),e.prototype.remove=function(t){var e=this,n=null;return"number"==typeof t.id&&(t=t.id),"number"==typeof t&&(n=this.instances[t],delete this.instances[t],this.fire("remove",t,n)),this.selectionTypes().forEach(function(n){e.select(n,[t],a.c.REMOVE)}),this.pool.checkIn(t),n},e.prototype.selectedObjects=function(t){return void 0===t&&(t=a.a),this.selections(t).filter(this.instances)},e}(u.a);e.a=c},function(t,e,n){"use strict";var r=function(){function t(){this.counter=0,this.free=[]}return t.prototype.checkOut=function(){return 0===this.free.length?this.counter++:this.free.shift()},t.prototype.checkIn=function(t){t===this.counter-1?this.counter--:this.free.push(t)},t.prototype.isCheckedOut=function(t){return t<this.counter&&this.free.indexOf(t)<0},Object.defineProperty(t.prototype,"size",{get:function(){return this.counter-this.free.length},enumerable:!0,configurable:!0}),t}();e.a=r},function(t,e,n){"use strict";function r(t){for(var e=[],n=t;n;)e.push(n),n=n.parentNode;return e.reverse()}var i=function(){function t(t){var e=this;this.parent=t,this.observer=new MutationObserver(function(t){return e.onChange(t)}),this.observed=new Map,this.enabled=!1}return t.prototype.enable=function(){this.enabled=!0,this.observer.observe(this.parent,{childList:!0,subtree:!0})},t.prototype.disable=function(){this.enabled=!1,this.observer.disconnect()},t.prototype.onChange=function(t){var e=this,n=t.filter(function(t){return"childList"===t.type&&t.removedNodes.length>0});if(0!==n.length&&0!==this.observed.size){var i=Array.from(this.observed.entries()).map(function(t){var e=t[0];return{node:e,callback:t[1],parents:r(e)}}),o=function(t){return i.length===t.length?(e.observed.clear(),e.disable(),!0):(t.forEach(function(t){var n=i.splice(t,1)[0];e.observed.delete(n.node)}),!1)},s=[];if(i.forEach(function(t,n){var r=t.node,i=t.parents,o=t.callback;i.indexOf(e.parent)<0&&(o(r),s.unshift(n))}),!o(s))for(var a=0,u=n;a<u.length;a++){var c=u[a],p=function(t){var e=t.target,n=new Set(Array.from(t.removedNodes)),r=[];if(i.forEach(function(t,i){var o=t.node,s=t.callback,a=t.parents,u=a.indexOf(e);if(!(u<0)){var c=a[u+1];n.has(c)&&(s(o),r.unshift(i))}}),o(r))return{value:void 0}}(c);if("object"==typeof p)return p.value}}},t.prototype.observe=function(t,e,n){this.observed.set(t,e.bind(n)),this.enabled||this.enable()},t}(),o=function(){function t(){this.documents=new WeakMap}return t.prototype.observe=function(t,e,n){var r=t.ownerDocument.body,o=this.documents.get(r);o||(o=new i(r),this.documents.set(r,o)),o.observe(t,e,n)},t}();e.a=o},function(t,e,n){"use strict";function r(t,e){var n=void 0;return t.some(function(t){return!!e(t)&&(n=t,!0)}),n}function i(t,e){var n=-1;return t.some(function(t,r){return!!e(t)&&(n=r,!0)}),n}function o(t){return arguments.length>1?Array.prototype.slice.call(arguments):Array.prototype.slice.call(t)}function s(t){return Array.apply(null,{length:t}).map(Number.call,Number)}function a(t,e,n){return s(t.length).sort(function(r,i){return e.call(n,t[r],t[i])})}function u(t,e,n){return s(t.length).filter(function(r,i){return e.call(n,t[r],i)})}e.e=r,e.d=i,e.b=o,e.c=a,e.a=u},function(t,e,n){"use strict";function r(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=t.dataTransfer.types;return"function"==typeof r.indexOf?e.some(function(t){return r.indexOf(t)>=0}):"function"==typeof r.includes?e.some(function(t){return r.includes(t)}):"function"==typeof r.contains&&e.some(function(t){return r.contains(t)})}function i(t){return p.size>0&&r(t,"text/plain")}function o(t){var e=t.dataTransfer;return Boolean(t.ctrlKey&&e.effectAllowed.match(/copy/gi)||!e.effectAllowed.match(/move/gi))}function s(t){var e=t.dataTransfer;o(t)?e.dropEffect="copy":e.dropEffect="move"}function a(t,e,r){void 0===r&&(r=!1);var i=n.i(c.b)("edgeDragHelper");t.draggable=!0,t.addEventListener("dragstart",function(n){t.classList.add("phovea-dragging");var o=e();if(n.dataTransfer.effectAllowed=o.effectAllowed,r&&n.stopPropagation(),!Object.keys(o.data).every(function(t){try{return n.dataTransfer.setData(t,o.data[t]),!0}catch(t){return!1}})){var s=o.data["text/plain"]||"";n.dataTransfer.setData("text/plain",i+(s?": "+s:"")),p.set(i,o.data)}}),t.addEventListener("dragend",function(e){t.classList.remove("phovea-dragging"),r&&e.stopPropagation(),p.size>0&&p.delete(i)}),t.addEventListener("dragexit",function(e){t.classList.remove("phovea-dragging"),r&&e.stopPropagation()})}function u(t,e,n,o,a){void 0===o&&(o=null),void 0===a&&(a=!1),t.addEventListener("dragenter",function(n){if(r.apply(void 0,[n].concat(e))||i(n))return t.classList.add("phovea-dragover"),a&&n.stopPropagation(),!1;t.classList.remove("phovea-dragover")}),t.addEventListener("dragover",function(n){if(r.apply(void 0,[n].concat(e))||i(n))return n.preventDefault(),s(n),t.classList.add("phovea-dragover"),a&&n.stopPropagation(),o&&o(n),!1}),t.addEventListener("dragleave",function(t){t.target.classList.remove("phovea-dragover")}),t.addEventListener("drop",function(o){o.preventDefault(),a&&o.stopPropagation();var s=o.dataTransfer.effectAllowed;t.classList.remove("phovea-dragover");var u=t.ownerDocument.querySelector(".phovea-dragging");if(u&&u.classList.remove("phovea-dragging"),i(o)){var c=o.dataTransfer.getData("text/plain"),l=parseInt(c.indexOf(":")>=0?c.substring(0,c.indexOf(":")):c,10);if(p.has(l)){var f=p.get(l);return p.delete(l),!n({effect:s,data:f},o)}}else if(r.apply(void 0,[o].concat(e))){var h={};return e.forEach(function(t){var e=o.dataTransfer.getData(t);""!==e&&(h[t]=e)}),!n({effect:s,data:h},o)}})}var c=n(51);e.b=r,e.a=o,e.c=s,e.d=a,e.e=u;var p=new Map},function(t,e,n){"use strict";function r(t,e){return void 0===e&&(e={}),new y(t,e)}function i(t){return{top:t,left:t,right:t,bottom:t}}function o(t){return t<0||isNaN(t)}function s(t,e){return o(t)?e:t}function a(t,e){return void 0===e&&(e=!1),t=t.filter(function(t){return null!=t}),0===t.length?Promise.resolve(e):1===t.length?t[0].then(function(){return e}):Promise.all(t).then(function(){return e})}function u(t,e,n,r){return a(t.map(function(t){var r=s(t.layoutOption("prefX",Number.NaN),0),i=s(t.layoutOption("prefY",Number.NaN),0);return t.setBounds(r,i,e-r,n-i)}))}function c(t,e,n){function r(e,n,r,i){return t?[i,s(r.layoutOption("prefHeight",Number.NaN),n)]:[s(r.layoutOption("prefWidth",Number.NaN),e),i]}function i(i,s,u,c){s-=n.left+n.right,u-=n.top+n.bottom;var p=(t?s:u)-e*(i.length-1),l=0,f=0,h=0;i.forEach(function(e){var n=e.layoutOption(t?"prefWidth":"prefHeight",Number.NaN),r=e.layoutOption("ratio",Number.NaN);o(n)&&o(r)?l++:n>=0?f+=n:h+=r});var d=h<1?1:h,y=(p-f-p*h/d)/l,g=i.map(function(e){var n=e.layoutOption(t?"prefWidth":"prefHeight",Number.NaN),i=e.layoutOption("ratio",Number.NaN);return o(n)&&o(i)?r(s,u,e,y):n>=0?r(s,u,e,n):r(s,u,e,i/d*p)}),v=n.left,_=n.top,m=[];return i.forEach(function(n,r){var i=g[r];m.push(n.setBounds(v,_,i[0],i[1])),t?v+=i[0]+e:_+=i[1]+e}),a(m)}return void 0===n&&(n={top:0,left:0,right:0,bottom:0}),i}function p(t,e,n){function r(e,n,r,i,o,a){return t?o.setBounds(e,n,a,s(o.layoutOption("prefHeight",Number.NaN),i)):o.setBounds(e,n,s(o.layoutOption("prefWidth",Number.NaN),r),a)}function i(i,s,u,c){s-=n.left+n.right,u-=n.top+n.bottom;var p=t?s:u,l=0;i.forEach(function(n){var r=n.layoutOption(t?"prefWidth":"prefHeight",Number.NaN);o(r)&&(r=e),l+=r});var f=(p-l)/(i.length-1),h=n.left,d=n.top;1===i.length&&(t?h+=(p-l)/2:d+=(p-l)/2);var y=[];return i.forEach(function(n){var i=n.layoutOption(t?"prefWidth":"prefHeight",Number.NaN);o(i)&&(i=e),y.push(r(h,d,s,u,n,i)),t?h+=i+f:d+=i+f}),a(y)}return void 0===n&&(n=g),i}function l(t,e,n,r){function i(t,i,o,s){i-=r.left+r.right,o-=r.top+r.bottom;var u=r.top,p=r.left,l=i,f=o,h=new Map;h.set("top",[]),h.set("center",[]),h.set("left",[]),h.set("right",[]),h.set("bottom",[]),t.forEach(function(t){var e=t.layoutOption("border","center");h.has(e)||(e="center"),h.get(e).push(t)});var d=[];return h.get("top").length>0&&(p+=o*n.top,f-=o*n.top,d.push(c(!0,e)(h.get("top"),i,o*n.top,s))),h.get("bottom").length>0&&(f-=o*n.bottom,d.push(c(!0,e)(h.get("bottom"),i,o*n.bottom,s))),h.get("left").length>0&&(u+=i*n.left,l-=i*n.left,d.push(c(!1,e)(h.get("left"),i*n.left,f,s))),h.get("right").length>0&&(l-=i*n.right,d.push(c(!1,e)(h.get("right"),i*n.right,f,s))),h.get("center").length>0&&d.push(c(!0,e)(h.get("center"),l,f,s)),a(d)}return void 0===n&&(n={top:.2,left:.2,right:.2,bottom:.2}),void 0===r&&(r=g),i}Object.defineProperty(e,"__esModule",{value:!0});var f=n(0),h=n(25);n.d(e,"ALayoutElem",function(){return d}),e.wrapDOM=r,e.padding=i,n.d(e,"noPadding",function(){return g}),e.layers=u,e.flowLayout=c,e.distributeLayout=p,e.borderLayout=l;var d=function(){function t(t){void 0===t&&(t={}),this.options=t}return t.prototype.getBounds=function(){return n.i(h.rect)(0,0,0,0)},t.prototype.getLocation=function(){return this.getBounds().xy},t.prototype.getSize=function(){return this.getBounds().size},t.prototype.layoutOption=function(t,e){return void 0===e&&(e=null),this.options.hasOwnProperty(t)?this.options[t]:e},t}(),y=function(t){function e(e,n){void 0===n&&(n={});var r=t.call(this,n)||this;return r.node=e,r}return f.a(e,t),e.prototype.setBounds=function(t,e,n,r){var i=this.layoutOption("unit","px"),o=this.node.style;return o.left=t+i,o.top=e+i,o.width=n+i,o.height=r+i,null},e.prototype.getBounds=function(){function t(t){return t.length>=e.length&&t.substring(t.length-e.length)===e?(t=t.substring(0,t.length-e.length),parseFloat(t)):0}var e=this.layoutOption("unit","px"),r=this.node.style;return n.i(h.rect)(t(r.left),t(r.top),t(r.width),t(r.height))},e}(d),g=i(0)},function(t,e,n){"use strict";function r(t){var e=t;return e.type=e.type||"main",e.location=e.location||"center",e}function i(){return n.i(s.list)("view").map(r)}Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),s=n(7),a=n(5);n.d(e,"AView",function(){return u}),e.list=i;var u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._layoutOptions={},e}return o.a(e,t),Object.defineProperty(e.prototype,"data",{get:function(){return[]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"idtypes",{get:function(){return[]},enumerable:!0,configurable:!0}),e.prototype.setLayoutOption=function(t,e){this._layoutOptions[t]=e},e.prototype.layoutOption=function(t,e){return void 0===e&&(e=null),this._layoutOptions.hasOwnProperty(t)?this._layoutOptions[t]:e},e}(a.EventHandler)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(53);n.d(e,"IDTYPE_CELL",function(){return r.b}),n.d(e,"IDTYPE_COLUMN",function(){return r.c}),n.d(e,"IDTYPE_ROW",function(){return r.d});var i=n(54);n.d(e,"asMatrix",function(){return i.asMatrix});var o=n(105);n.d(e,"asColumnNameVector",function(){return o.a});var s=n(106);n.d(e,"asRowNameVector",function(){return s.a})},function(t,e,n){"use strict";function r(t){return new a(t)}var i=n(0),o=n(1),s=n(23);e.a=r;var a=function(t){function e(e){var n=t.call(this,e)||this;return n.root=n,n}return i.a(e,t),Object.defineProperty(e.prototype,"idtype",{get:function(){return this.base.coltype},enumerable:!0,configurable:!0}),e.prototype.names=function(t){return void 0===t&&(t=n.i(o.all)()),this.base.cols(t)},e.prototype.ids=function(t){return void 0===t&&(t=n.i(o.all)()),this.base.colIds(t)},e.prototype.size=function(){return this.base.ncol},e.prototype.persist=function(){return{root:this.base.persist(),names:"column"}},e}(s.a)},function(t,e,n){"use strict";function r(t){return new a(t)}var i=n(0),o=n(1),s=n(23);e.a=r;var a=function(t){function e(e){var n=t.call(this,e)||this;return n.root=n,n}return i.a(e,t),Object.defineProperty(e.prototype,"idtype",{get:function(){return this.base.rowtype},enumerable:!0,configurable:!0}),e.prototype.names=function(t){return void 0===t&&(t=n.i(o.all)()),this.base.rows(t)},e.prototype.ids=function(t){return void 0===t&&(t=n.i(o.all)()),this.base.rowIds(t)},e.prototype.size=function(){return this.base.nrow},e.prototype.persist=function(){return{root:this.base.persist(),names:"row"}},e}(s.a)},function(t,e,n){"use strict";var r=n(0),i=n(2),o=n(1),s=n(12),a=function(t){function e(e,n,r,i,o){void 0===r&&(r=e),void 0===i&&(i=e.valuetype),void 0===o&&(o=e.rowtype);var s=t.call(this,null)||this;return s.m=e,s.f=n,s.thisArgument=r,s.valuetype=i,s._idtype=o,s.desc={name:e.desc.name+"-p",fqname:e.desc.fqname+"-p",type:"vector",id:e.desc.id+"-p",size:s.dim[0],idtype:e.rowtype,value:s.valuetype,description:e.desc.description,creator:e.desc.creator,ts:e.desc.ts},s.root=s,s}return r.a(e,t),e.prototype.persist=function(){return{root:this.m.persist(),f:this.f.toString(),valuetype:this.valuetype===this.m.valuetype?void 0:this.valuetype,idtype:this.idtype===this.m.rowtype?void 0:this.idtype.name}},e.prototype.restore=function(t){var e=this;return t&&t.range&&(e=e.view(n.i(o.parse)(t.range))),e},Object.defineProperty(e.prototype,"idtype",{get:function(){return this._idtype},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"idtypes",{get:function(){return[this._idtype]},enumerable:!0,configurable:!0}),e.prototype.size=function(){return this.m.nrow},e.prototype.names=function(t){return this.m.rows(t)},e.prototype.ids=function(t){return this.m.rowIds(t)},e.prototype.at=function(t){return r.b(this,void 0,void 0,function(){var e;return r.c(this,function(r){switch(r.label){case 0:return[4,this.m.data(n.i(o.list)(t))];case 1:return e=r.sent(),[2,this.f.call(this.thisArgument,e[0])]}})})},e.prototype.data=function(t){return r.b(this,void 0,void 0,function(){return r.c(this,function(e){switch(e.label){case 0:return[4,this.m.data(t)];case 1:return[2,e.sent().map(this.f,this.thisArgument)]}})})},e.prototype.sort=function(t,e){return r.b(this,void 0,void 0,function(){var s,a;return r.c(this,function(r){switch(r.label){case 0:return[4,this.data()];case 1:return s=r.sent(),a=n.i(i.argSort)(s,t,e),[2,this.view(n.i(o.list)(a))]}})})},e.prototype.filter=function(t,e){return r.b(this,void 0,void 0,function(){var s,a;return r.c(this,function(r){switch(r.label){case 0:return[4,this.data()];case 1:return s=r.sent(),a=n.i(i.argFilter)(s,t,e),[2,this.view(n.i(o.list)(a))]}})})},e}(s.b);e.a=a},function(t,e,n){"use strict";var r=n(0),i=n(2),o=n(1),s=n(12),a=function(t){function e(e,n){var r=t.call(this,null)||this;return r.m=e,r.col=n,r.colRange=o.Range1D.from([r.col]),r.desc={name:e.desc.name+"-c"+n,fqname:e.desc.fqname+"-c"+n,id:e.desc.id+"-c"+n,type:"vector",idtype:e.rowtype,size:e.nrow,value:e.valuetype,description:e.desc.description,creator:e.desc.creator,ts:e.desc.ts},r.root=r,r}return r.a(e,t),e.prototype.persist=function(){return{root:this.m.persist(),col:this.col}},e.prototype.restore=function(t){var e=this;return t&&t.range&&(e=e.view(n.i(o.parse)(t.range))),e},Object.defineProperty(e.prototype,"valuetype",{get:function(){return this.m.valuetype},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"idtype",{get:function(){return this.m.rowtype},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"idtypes",{get:function(){return[this.idtype]},enumerable:!0,configurable:!0}),e.prototype.size=function(){return this.m.nrow},e.prototype.names=function(t){return this.m.rows(t)},e.prototype.ids=function(t){return this.m.rowIds(t)},e.prototype.at=function(t){return this.m.at(t,this.col)},e.prototype.data=function(t){return void 0===t&&(t=n.i(o.all)()),r.b(this,void 0,void 0,function(){var e,i,s;return r.c(this,function(r){switch(r.label){case 0:return e=n.i(o.parse)(t),i=n.i(o.list)(e.dim(0),this.colRange),[4,this.m.data(i)];case 1:return s=r.sent(),0===s.length?[2,[]]:Array.isArray(s[0])?[2,s.map(function(t){return t[0]})]:[2,s]}})})},e.prototype.sort=function(t,e){return r.b(this,void 0,void 0,function(){var s,a;return r.c(this,function(r){switch(r.label){case 0:return[4,this.data()];case 1:return s=r.sent(),a=n.i(i.argSort)(s,t,e),[2,this.view(n.i(o.list)(a))]}})})},e.prototype.filter=function(t,e){return r.b(this,void 0,void 0,function(){var s,a;return r.c(this,function(r){switch(r.label){case 0:return[4,this.data()];case 1:return s=r.sent(),a=n.i(i.argFilter)(s,t,e),[2,this.view(n.i(o.list)(a))]}})})},e}(s.b);e.a=a},function(t,e,n){"use strict";var r=n(0),i=n(2),o=n(1),s=n(12),a=function(t){function e(e,n){var r=t.call(this,null)||this;return r.m=e,r.row=n,r.rowRange=o.Range1D.from([r.row]),r.desc={name:e.desc.name+"-r"+n,fqname:e.desc.fqname+"-r"+n,id:e.desc.id+"-r"+n,type:"vector",idtype:e.coltype,size:e.ncol,value:e.valuetype,description:e.desc.description,creator:e.desc.creator,ts:e.desc.ts},r.root=r,r}return r.a(e,t),e.prototype.persist=function(){return{root:this.m.persist(),row:this.row}},e.prototype.restore=function(t){var e=this;return t&&t.range&&(e=e.view(n.i(o.parse)(t.range))),e},Object.defineProperty(e.prototype,"valuetype",{get:function(){return this.m.valuetype},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"idtype",{get:function(){return this.m.coltype},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"idtypes",{get:function(){return[this.idtype]},enumerable:!0,configurable:!0}),e.prototype.size=function(){return this.m.ncol},e.prototype.names=function(t){return this.m.cols(t)},e.prototype.ids=function(t){return this.m.colIds(t)},e.prototype.at=function(t){return this.m.at(this.row,t)},e.prototype.data=function(t){return void 0===t&&(t=n.i(o.all)()),r.b(this,void 0,void 0,function(){var e,i,s;return r.c(this,function(r){switch(r.label){case 0:return e=n.i(o.parse)(t),i=n.i(o.list)(this.rowRange,e.dim(0)),[4,this.m.data(i)];case 1:return s=r.sent(),[2,s[0]]}})})},e.prototype.sort=function(t,e){return r.b(this,void 0,void 0,function(){var s,a;return r.c(this,function(r){switch(r.label){case 0:return[4,this.data()];case 1:return s=r.sent(),a=n.i(i.argSort)(s,t,e),[2,this.view(n.i(o.list)(a))]}})})},e.prototype.filter=function(t,e){return r.b(this,void 0,void 0,function(){var s,a;return r.c(this,function(r){switch(r.label){case 0:return[4,this.data()];case 1:return s=r.sent(),a=n.i(i.argFilter)(s,t,e),[2,this.view(n.i(o.list)(a))]}})})},e}(s.b);e.a=a},function(t,e,n){"use strict";var r=n(0),i=n(1),o=n(3),s=n(52),a=n(109),u=function(t){function e(e){var n=t.call(this,e)||this;return n.t=e,n}return r.a(e,t),Object.defineProperty(e.prototype,"desc",{get:function(){return this.root.desc},enumerable:!0,configurable:!0}),e.prototype.persist=function(){return{root:this.root.persist(),transposed:!0}},Object.defineProperty(e.prototype,"valuetype",{get:function(){return this.root.valuetype},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rowtype",{get:function(){return this.root.coltype},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"coltype",{get:function(){return this.root.rowtype},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"producttype",{get:function(){return this.root.producttype},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"idtypes",{get:function(){return[this.rowtype,this.coltype]},enumerable:!0,configurable:!0}),e.prototype.ids=function(t){return void 0===t&&(t=n.i(i.all)()),r.b(this,void 0,void 0,function(){var e;return r.c(this,function(r){switch(r.label){case 0:return[4,this.t.ids(t?n.i(i.parse)(t).swap():void 0)];case 1:return e=r.sent(),[2,e.swap()]}})})},e.prototype.cols=function(t){return void 0===t&&(t=n.i(i.all)()),this.t.rows(t?n.i(i.parse)(t).swap():void 0)},e.prototype.colIds=function(t){return void 0===t&&(t=n.i(i.all)()),this.t.rowIds(t?n.i(i.parse)(t).swap():void 0)},e.prototype.rows=function(t){return void 0===t&&(t=n.i(i.all)()),this.t.cols(t?n.i(i.parse)(t).swap():void 0)},e.prototype.rowIds=function(t){return void 0===t&&(t=n.i(i.all)()),this.t.colIds(t?n.i(i.parse)(t).swap():void 0)},e.prototype.view=function(t){void 0===t&&(t=n.i(i.all)());var e=n.i(i.parse)(t);return e.isAll?this:new s.b(this.root,e.swap()).t},e.prototype.slice=function(t){return new a.a(this.root,t)},e.prototype.size=function(){var t=this.t.dim;return[t[1],t[0]]},e.prototype.at=function(t,e){return this.t.at(e,t)},e.prototype.data=function(t){return void 0===t&&(t=n.i(i.all)()),r.b(this,void 0,void 0,function(){var e;return r.c(this,function(r){switch(r.label){case 0:return e=o.transpose,[4,this.t.data(t?n.i(i.parse)(t).swap():void 0)];case 1:return[2,e.apply(void 0,[r.sent()])]}})})},e.prototype.hist=function(t,e,r){return void 0===e&&(e=n.i(i.all)()),void 0===r&&(r=0),this.t.hist(t,e?n.i(i.parse)(e).swap():void 0,1-r)},e.prototype.stats=function(t){return void 0===t&&(t=n.i(i.all)()),this.t.stats(t?n.i(i.parse)(t).swap():void 0)},e.prototype.statsAdvanced=function(t){return void 0===t&&(t=n.i(i.all)()),this.t.statsAdvanced(t?n.i(i.parse)(t).swap():void 0)},e.prototype.heatmapUrl=function(t,e){return void 0===t&&(t=n.i(i.all)()),void 0===e&&(e={}),e.transpose=!0!==e.transpose,this.t.heatmapUrl(t?n.i(i.parse)(t).swap():void 0,e)},e}(s.a);e.a=u},function(t,e,n){"use strict";function r(t){return{rowIds:function(e,n){return t(e).then(function(t){return n.preMultiply(t.rowIds,e.size)})},rows:function(e,n){return t(e).then(function(t){return n.dim(0).filter(t.rows,e.size[0])})},colIds:function(e,n){return t(e).then(function(t){return n.preMultiply(t.colIds,e.size)})},cols:function(e,n){return t(e).then(function(t){return n.dim(1).filter(t.cols,e.size[1])})},ids:function(e,n){return t(e).then(function(t){return n.preMultiply(t.ids,e.size)})},at:function(e,n,r){return t(e).then(function(t){return t.data[n][r]})},data:function(e,n){return t(e).then(function(t){return n.filter(t.data,e.size)})}}}function i(t){return t.value.type===c.VALUE_TYPE_INT||t.value.type===c.VALUE_TYPE_REAL?function(e){return n.i(c.mask)(e,t.value)}:function(t){return t}}function o(){function t(t){null!==r&&null!==o&&Promise.all([r,o]).then(function(e){var r=e[0],i=e[1],o=n.i(l.resolve)(t.rowtype),s=n.i(u.parse)(r);o.fillMapCache(s.dim(0).asList(i.length),i)})}function e(t){null!==c&&null!==f&&Promise.all([c,f]).then(function(e){var r=e[0],i=e[1],o=n.i(l.resolve)(t.coltype),s=n.i(u.parse)(r);o.fillMapCache(s.dim(0).asList(i.length),i)})}var r=null,o=null,c=null,f=null,h=null,d=null,y=null,g={rowIds:function(e,i){return null==r&&(r=n.i(a.getAPIJSON)("/dataset/matrix/"+e.id+"/rowIds").then(u.parse),t(e)),r.then(function(t){return t.preMultiply(i,e.size)})},rows:function(e,r){return null==o&&(o=n.i(a.getAPIJSON)("/dataset/matrix/"+e.id+"/rows"),t(e)),o.then(function(t){return r.dim(0).filter(t,e.size[0])})},colIds:function(t,r){return null==c&&(c=n.i(a.getAPIJSON)("/dataset/matrix/"+t.id+"/colIds").then(u.parse),e(t)),c.then(function(e){return e.preMultiply(r,t.size)})},cols:function(t,r){return null==f&&(f=n.i(a.getAPIJSON)("/dataset/matrix/"+t.id+"/cols"),e(t)),f.then(function(e){return r.dim(1).filter(e,t.size[1])})},ids:function(t,e){if(1===e.ndim)return g.rowIds(t,e);e.dim(0),e.dim(1);var r=e.split();return Promise.all([g.rowIds(t,r[0]||n.i(u.all)()),g.colIds(t,r[1]||n.i(u.all)())]).then(u.join)},numericalStats:function(t,e){if(e.isAll)return null==y&&(y=n.i(a.getAPIJSON)("/dataset/matrix/"+t.id+"/stats")),y;var r={range:e.toString()};return n.i(a.getAPIJSON)("/dataset/matrix/"+t.id+"/stats",r)},numericalHist:function(t,e,r){void 0===r&&(r=NaN);var i=t.value.range;if(e.isAll)return null==d&&(d=n.i(a.getAPIJSON)("/dataset/matrix/"+t.id+"/hist").then(function(t){return n.i(p.wrapHist)(t,i)})),d;var o={range:e.toString()};return isNaN(r)||(o.bins=r),n.i(a.getAPIJSON)("/dataset/matrix/"+t.id+"/hist",o).then(function(t){return n.i(p.wrapHist)(t,i)})},at:function(t,e,r){return g.data(t,n.i(u.list)([e],[r])).then(function(e){return i(t)(e[0][0])})},data:function(t,e){if(e.isAll)return null==h&&(h=n.i(a.getAPIJSON)("/dataset/matrix/"+t.id+"/raw").then(i(t))),h;if(null!=h)return h.then(function(n){return e.filter(n,t.size)});var r=t.size;return r[0]*r[1]<1e3||t.loadAtOnce?(h=n.i(a.getAPIJSON)("/dataset/matrix/"+t.id+"/raw").then(i(t)),h.then(function(n){return e.filter(n,t.size)})):n.i(a.getAPIData)("/dataset/matrix/"+t.id+"/raw",{range:e.toString()}).then(i(t))},heatmapUrl:function(t,e,r){var i=s(e,r);return n.i(a.api2absURL)("/dataset/matrix/"+t.id+"/data",i)}};return g}function s(t,e){var n={format:e.format||"png",range:t.toString()};return!0===e.transpose&&(n.format_transpose=!0),e.range&&(n.format_min=e.range[0],n.format_max=e.range[1]),e.palette&&(n.format_palette=e.palette.toString()),e.missing&&(n.format_missing=e.missing),n}var a=n(9),u=n(1),c=n(3),p=n(11),l=n(4);e.a=r,e.b=o},function(t,e,n){"use strict";function r(t,e,n){return new p(t,e,n)}var i=n(0),o=n(2),s=n(3),a=n(28),u=n(33),c=n(27);e.b=r;var p=function(t){function e(e,r,i){void 0===i&&(i={});var u=t.call(this)||this;return u.data=e,u.options=i,u._metaData=new c.b(function(){return u.actDesc}),u.options=n.i(o.mixin)({initialVis:0,all:{},filter:function(){return!0}},i),u.node=n.i(c.a)(r,"div","multiform"),n.i(s.assignData)(r,e),n.i(a.assignVis)(u.node,u),u.visses=n.i(a.list)(e).filter(u.options.filter),u.build(),u}return i.a(e,t),Object.defineProperty(e.prototype,"asMetaData",{get:function(){return this._metaData},enumerable:!0,configurable:!0}),e.prototype.build=function(){this.content=n.i(c.a)(this.node,"div","content"),this.switchTo(this.options.initialVis)},e.prototype.destroy=function(){this.actVis&&"function"==typeof this.actVis.destroy&&this.actVis.destroy(),t.prototype.destroy.call(this)},e.prototype.persist=function(){return{id:this.actDesc?this.actDesc.id:null,content:this.actVis&&"function"==typeof this.actVis.persist?this.actVis.persist():null}},e.prototype.restore=function(t){return i.b(this,void 0,void 0,function(){var e,n,r;return i.c(this,function(i){switch(i.label){case 0:return e=this,t.id?(n=this.visses.find(function(e){return e.id===t.id}),n?[4,this.switchTo(n)]:[3,4]):[3,4];case 1:return r=i.sent(),r&&t.content&&"function"==typeof r.restore?[4,Promise.resolve(r.restore(t.content))]:[3,3];case 2:i.sent(),i.label=3;case 3:return[2,e];case 4:return[2,Promise.resolve(e)]}})})},e.prototype.locate=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(this.actVisPromise||Promise.resolve(null)).then(function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=e.length>0?e[0]:void 0;return r&&"function"==typeof r.locate?r.locate.apply(r,t):Promise.resolve(1===e.length?void 0:new Array(t.length))})},e.prototype.locateById=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(this.actVisPromise||Promise.resolve(null)).then(function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=e.length>0?e[0]:void 0;return r&&"function"==typeof r.locateById?r.locateById.apply(r,t):Promise.resolve(1===e.length?void 0:new Array(t.length))})},e.prototype.transform=function(t,e){var n=this;if(this.actVis){if(0===arguments.length)return this.actVis.transform();var r=function(t,e,r){n.fire("transform",e,r)};this.actVis.on("transform",r);var i=this.actVis.transform(t,e);return this.actVis.off("transform",r),i}return this.actVisPromise&&arguments.length>0&&this.actVisPromise.then(function(r){return n.transform(t,e)}),{scale:[1,1],rotate:0}},Object.defineProperty(e.prototype,"act",{get:function(){return this.actDesc},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"actLoader",{get:function(){return this.actVisPromise},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this.actVis?this.actVis.size:[100,100]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rawSize",{get:function(){return this.actVis?this.actVis.rawSize:[100,100]},enumerable:!0,configurable:!0}),e.prototype.switchTo=function(t){var e=this,r=n.i(c.c)(t,this.visses);if(r===this.actDesc)return this.actVisPromise;this.actVis&&(this.actVis.destroy(),this.actVis=null,this.actVisPromise=null),n.i(c.d)(this.content);var i=this.actDesc;return this.actDesc=r,this.markReady(!1),this.fire("change",r,i),this.actVis=null,this.actVisPromise=null,r?this.actVisPromise=r.load().then(function(t){return e.actDesc!==r?null:(e.actVis=t.factory(e.data,e.content,n.i(o.mixin)({},e.options.all,e.options[r.id]||{})),e.actVis.isBuilt?e.markReady():e.actVis.on("ready",function(){e.markReady()}),e.fire("changed",r,i),e.actVis)}):Promise.resolve(null)},e.prototype.addIconVisChooser=function(t){return n.i(u.a)(t,this)},e.prototype.addSelectVisChooser=function(t){return n.i(u.b)(t)},e}(a.AVisInstance);e.a=p},function(t,e,n){"use strict";function r(t){return t.reduce(function(t,e){return t+e},0)}function i(t,e){return 0===t.length?NaN:t.reduce(function(t,n){return Math.max(t,e(n))},-1/0)}function o(t,e,n,r,i){return new y(t,e,n,r,i)}var s=n(0),a=n(2),u=n(3),c=n(25),p=n(28),l=n(33),f=n(27),h=n(115),d=n(1);e.b=o;var y=function(t){function e(e,r,i,o,s){function c(t,r,i){if(t===y.length){var s=0===r.length?n.i(d.all)():n.i(d.list)(r.slice());g.push(new h.a(s,i.slice(),o(e,s,i.slice())))}else y[t].forEach(function(e,n){r.push(e),i.push(n),c(t+1,r,i),r.pop(),i.pop()})}void 0===s&&(s={});var l=t.call(this)||this;l.data=e,l.range=r,l.options=s,l._metaData=new f.b(function(){return l.actDesc}),l.options=n.i(a.mixin)({initialVis:0,singleRowOptimization:!0,filter:function(){return!0}},s),l.node=n.i(f.a)(i,"div","multiformgrid"),n.i(u.assignData)(i,e),n.i(p.assignVis)(l.node,l),l.visses=n.i(p.list)(e).filter(l.options.filter);var y=l.dims=r.dims.map(function(t){return t instanceof d.CompositeRange1D?t.groups:t instanceof d.Range1DGroup?[t]:[n.i(d.asUngrouped)(t)]}),g=l.grid=[];return c(0,[],[]),l.build(),l}return s.a(e,t),Object.defineProperty(e.prototype,"dimSizes",{get:function(){return this.dims.map(function(t){return t.length})},enumerable:!0,configurable:!0}),e.prototype.toElem=function(t){var e=this.dimSizes;return 1===e.length?this.grid[t[0]]:this.grid[t[0]*e[1]+(t[1]||0)]},e.prototype.getRange=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this.toElem(t).range},e.prototype.getData=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this.toElem(t).data},e.prototype.getBounds=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=this.toElem(t),i=r.location,o=r.size,s=n.i(a.offset)(this.content);return n.i(c.rect)(i.x-s.left,i.y-s.top,o[0],o[1])},Object.defineProperty(e.prototype,"asMetaData",{get:function(){return this._metaData},enumerable:!0,configurable:!0}),e.prototype.build=function(){var t=this;this.content=this.node;var e=this.options.wrap||function(t){return t};if(1===this.dims.length)this.options.singleRowOptimization?this.grid.forEach(function(r){return r.setContent(e(n.i(f.a)(t.node,"div","content gridrow"),r.data,r.range,r.pos))}):this.grid.forEach(function(r){var i=n.i(f.a)(t.node,"div","gridrow"),o=n.i(f.a)(i,"div","content");o.style.display="inline-block",r.setContent(e(o,r.data,r.range,r.pos))});else for(var r=this.dimSizes,i=0;i<r[0];++i)for(var o=n.i(f.a)(this.node,"div","gridrow"),s=0;s<r[1];++s){var a=this.grid[i*r[1]+s],u=n.i(f.a)(o,"div","content");u.style.display="inline-block",a.setContent(e(u,a.data,a.range,a.pos))}this.switchTo(this.options.initialVis)},e.prototype.destroy=function(){this.grid.forEach(function(t){return t.destroy()}),t.prototype.destroy.call(this)},e.prototype.transform=function(t,e){if(this.grid[0].hasOne){var n=this.grid[0].transform();return arguments.length>0&&(this.grid.forEach(function(n){return n.transform(t,e)}),this.fire("transform",{scale:t,rotate:e},n)),n}return{scale:[1,1],rotate:0}},e.prototype.persist=function(){return{id:this.actDesc?this.actDesc.id:null,contents:this.grid.map(function(t){return t.persist()})}},e.prototype.restore=function(t){var e=this;if(t.id){var n=this.visses.find(function(e){return e.id===t.id});if(n)return this.switchTo(n).then(function(n){return n&&t.content&&"function"==typeof n.restore?Promise.resolve(n.restore(t.content)).then(function(){return e}):Promise.resolve(e)})}return Promise.resolve(e)},e.prototype.locateGroup=function(t){function e(t){return{x:t.x-o.left,y:t.y-o.top}}var r=this;if(t.isAll||t.isNone){var i=this.size;return Promise.resolve(n.i(c.rect)(0,0,i[0],i[1]))}var o=n.i(a.offset)(this.content),s=function(){for(var n=[],i=0,o=r.grid;i<o.length;i++){var s=o[i],a=s.subrange(t);a.isNone||n.push({g:s,pos:e(s.location),r:a})}return n}();return 1===s.length?s[0].g.actVis.locate(s[0].r).then(function(t){return t?t.shift(s[0].pos):t}):Promise.all(s.map(function(t){return t.g.actVis.locate(t.r)})).then(function(t){t=t.map(function(t,e){return t?t.shift(s[e].pos):t}).filter(function(t){return null!=t});var e=t[0].aabb(),r=e.x,i=e.y,o=e.x2,a=e.y2;return t.forEach(function(t){var e=t.aabb();r=Math.min(r,e.x),i=Math.min(i,e.y),o=Math.min(o,e.x2),a=Math.min(a,e.y2)}),Promise.resolve(n.i(c.rect)(r,i,o-r,a-i))})},e.prototype.locateGroupById=function(t){var e=this;return this.data.ids().then(function(n){return e.locateGroup(n.indexOf(t))})},e.prototype.locate=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(this.actVisPromise||Promise.resolve(null)).then(function(n){return n?1===n.length?n[0].locate.apply(n[0],e):1===e.length?t.locateGroup(e[0]):Promise.all(e.map(function(e){return t.locateGroup(e)})):Promise.resolve(1===e.length?void 0:new Array(e.length))})},e.prototype.locateById=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(this.actVisPromise||Promise.resolve(null)).then(function(n){return n?1===n.length?n[0].locateById.apply(n[0],e):1===e.length?t.locateGroupById(e[0]):Promise.all(e.map(function(e){return t.locateGroupById(e)})):Promise.resolve(1===e.length?void 0:new Array(e.length))})},Object.defineProperty(e.prototype,"act",{get:function(){return this.actDesc},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"actLoader",{get:function(){return this.actVisPromise},enumerable:!0,configurable:!0}),e.prototype.gridSize=function(t){void 0===t&&(t=!1);var e=this.grid.map(t?function(t){return t.rawSize}:function(t){return t.size});if(1===this.dims.length)return{cols:[i(e,function(t){return t[0]})],rows:e.map(function(t){return t[1]}),grid:e.map(function(t){return[t]})};var n=this.dims[1].length,r=this.dims[0].map(function(t,r){return e.slice(r*n,(r+1)*n)});return{cols:this.dims[1].map(function(t,e){return i(r,function(t){return t[e][0]})}),rows:r.map(function(t){return i(t,function(t){return t[1]})}),grid:r}},Object.defineProperty(e.prototype,"size",{get:function(){var t=this.gridSize();return[r(t.cols),r(t.rows)]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rawSize",{get:function(){var t=this.gridSize(!0);return[r(t.cols),r(t.rows)]},enumerable:!0,configurable:!0}),e.prototype.switchTo=function(t){var e=this,r=n.i(f.c)(t,this.visses);if(r===this.actDesc)return this.actVisPromise;this.grid.forEach(function(t){return t.switchDestroy()});var i=this.actDesc;return this.actDesc=r,this.markReady(!1),this.fire("change",r,i),this.actVisPromise=null,r?this.actVisPromise=r.load().then(function(t){if(e.actDesc!==r)return null;var o=n.i(a.mixin)({},e.options.all,e.options[r.id]||{}),s=e.grid.map(function(e){return e.build(t,o)}),u=s.length;return s.forEach(function(t){t.on("ready",function(){0===--u&&e.markReady()})}),e.fire("changed",r,i),s}):Promise.resolve([])},e.prototype.addIconVisChooser=function(t){return n.i(l.a)(t,this)},e.prototype.addSelectVisChooser=function(t){return n.i(l.b)(t)},e}(p.AVisInstance);e.a=y},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(112);n.d(e,"MultiForm",function(){return r.a}),n.d(e,"create",function(){return r.b});var i=n(113);n.d(e,"MultiFormGrid",function(){return i.a}),n.d(e,"createGrid",function(){return i.b});var o=n(33);n.d(e,"addIconVisChooser",function(){return o.a}),n.d(e,"addSelectVisChooser",function(){return o.b})},function(t,e,n){"use strict";var r=n(2),i=n(3),o=n(28),s=n(27),a=function(){function t(t,e,n){this.range=t,this.pos=e,this.data=n}return t.prototype.setContent=function(t){this.content=t,n.i(i.assignData)(this.content,this.data)},t.prototype.subrange=function(t){var e=this.range.intersect(t);return this.range.indexOf(e)},Object.defineProperty(t.prototype,"hasOne",{get:function(){return null!=this.actVis},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){this.actVis&&"function"==typeof this.actVis.destroy&&this.actVis.destroy()},Object.defineProperty(t.prototype,"size",{get:function(){return this.actVis?this.actVis.size:[100,100]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rawSize",{get:function(){return this.actVis?this.actVis.rawSize:[100,100]},enumerable:!0,configurable:!0}),t.prototype.persist=function(){return{range:this.range.toString(),content:this.actVis&&"function"==typeof this.actVis.persist?this.actVis.persist():null}},t.prototype.restore=function(t){return null},t.prototype.switchDestroy=function(){n.i(s.d)(this.content),this.actVis&&"function"==typeof this.actVis.destroy&&this.actVis.destroy(),this.actVis=null},t.prototype.build=function(t,e){return this.actVis=t.factory(this.data,this.content,e),n.i(o.assignVis)(this.content,this.actVis),this.actVis},Object.defineProperty(t.prototype,"location",{get:function(){var t=n.i(r.offset)(this.content);return{x:t.left,y:t.top}},enumerable:!0,configurable:!0}),t.prototype.transform=function(t,e){return this.actVis?arguments.length>0?this.actVis.transform(t,e):this.actVis.transform():{scale:[1,1],rotate:0}},t}();e.a=a},function(t,e,n){"use strict";var r=n(0),i=n(21),o=n(57),s=n(58),a=function(){function t(t){void 0===t&&(t={}),this.remote=new s.a(t),this.local=new o.a(t)}return t.prototype.listRemote=function(){return this.remote.list()},t.prototype.listLocal=function(){return this.local.list()},t.prototype.listLocalSync=function(){return this.local.listSync()},t.prototype.list=function(){return Promise.all([this.listLocal(),this.listRemote()]).then(function(t){return t[0].concat(t[1])})},t.prototype.delete=function(t){return t.local?this.local.delete(t):this.remote.delete(t)},t.prototype.get=function(t){return t.local?this.local.get(t):this.remote.get(t)},t.prototype.getGraph=function(t){return t.local?this.local.getGraph(t):this.remote.getGraph(t)},t.prototype.edit=function(t,e){var n=t instanceof i.a?t.desc:t;return n.local?this.local.edit(n,e):this.remote.edit(n,e)},t.prototype.cloneLocal=function(t,e){return void 0===e&&(e={}),r.b(this,void 0,void 0,function(){var n,i;return r.c(this,function(r){switch(r.label){case 0:return i=(n=this.local).clone,[4,this.getGraph(t)];case 1:return[2,i.apply(n,[r.sent(),e])]}})})},t.prototype.cloneRemote=function(t,e){return void 0===e&&(e={}),r.b(this,void 0,void 0,function(){var n,i;return r.c(this,function(r){switch(r.label){case 0:return i=(n=this.remote).clone,[4,this.getGraph(t)];case 1:return[2,i.apply(n,[r.sent(),e])]}})})},t.prototype.migrateRemote=function(t,e){return void 0===e&&(e={}),this.remote.migrate(t,e)},t.prototype.importLocal=function(t,e){return void 0===e&&(e={}),this.local.import(t,e)},t.prototype.importRemote=function(t,e){return void 0===e&&(e={}),this.remote.import(t,e)},t.prototype.import=function(t,e){return void 0===e&&(e={}),this.importLocal(t,e)},t.prototype.createLocal=function(t){return void 0===t&&(t={}),this.local.create(t)},t.prototype.createRemote=function(t){return void 0===t&&(t={}),this.remote.create(t)},t.prototype.create=function(t){return void 0===t&&(t={}),this.createLocal(t)},t.prototype.createInMemory=function(){return this.local.createInMemory()},t.prototype.cloneInMemory=function(t){var e=this;return this.getGraph(t).then(function(t){return e.local.cloneInMemory(t)})},t}();e.a=a},function(t,e,n){"use strict";function r(t){for(var e=t.path.slice();null!=(t=t.nextState)&&e.indexOf(t)<0;)e.push(t);return e}function i(){var t={type:"provenance_graph",id:"dummy",name:"dummy",fqname:"dummy",description:"",creator:"Anonymous",ts:Date.now(),size:[0,0],attrs:{graphtype:"provenance_graph",of:"dummy"}};return new s.a(t,new o.MemoryGraph(t,[],[],n.i(s.d)()))}Object.defineProperty(e,"__esModule",{value:!0});var o=n(46),s=n(21),a=n(56);n.d(e,"ActionNode",function(){return a.a}),n.d(e,"action",function(){return a.b}),n.d(e,"ActionMetaData",function(){return a.c}),n.d(e,"meta",function(){return a.d});var u=n(34);n.d(e,"ObjectNode",function(){return u.a}),n.d(e,"cat",function(){return u.b}),n.d(e,"op",function(){return u.c}),n.d(e,"ref",function(){return u.d});var c=n(59);n.d(e,"SlideNode",function(){return c.a}),n.d(e,"DEFAULT_DURATION",function(){return c.b}),n.d(e,"DEFAULT_TRANSITION",function(){return c.c});var p=n(60);n.d(e,"StateNode",function(){return p.a}),n.d(e,"ProvenanceGraph",function(){return s.a}),n.d(e,"compress",function(){return s.b}),n.d(e,"ProvenanceGraphDim",function(){return s.c}),n.d(e,"provenanceGraphFactory",function(){return s.d}),n.d(e,"toSlidePath",function(){return s.e});var l=n(57);n.d(e,"LocalStorageProvenanceGraphManager",function(){return l.a});var f=n(58);n.d(e,"RemoteStorageProvenanceGraphManager",function(){return f.a});var h=n(116);n.d(e,"MixedStorageProvenanceGraphManager",function(){return h.a});var d=n(6);n.d(e,"GraphEdge",function(){return d.a}),n.d(e,"graphModule",function(){return y}),e.findLatestPath=r,e.createDummy=i;var y=o},function(t,e,n){"use strict";var r=n(62),i=n(26),o=function(){function t(t){this.from=t}return Object.defineProperty(t.prototype,"step",{get:function(){return 1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"to",{get:function(){return this.from+1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isAll",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isSingle",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isUnbound",{get:function(){return!1},enumerable:!0,configurable:!0}),t.prototype.size=function(t){return 1},t.prototype.clone=function(){return new t(this.from)},t.prototype.contains=function(t,e){return n.i(r.a)(this.from,e)===t},t.prototype.reverse=function(){return this.clone()},t.prototype.invert=function(t,e){return n.i(r.a)(this.from,e)+t},t.prototype.iter=function(t){return n.i(i.single)(n.i(r.a)(this.from,t))},Object.defineProperty(t.prototype,"__iterator__",{get:function(){return this.iter()},enumerable:!0,configurable:!0}),t.prototype.toString=function(){return this.from.toString()},t}();e.a=o},function(t,e,n){"use strict";function r(t){var e,n,r=[],u=0;for(t=t.trim();u<t.length;)switch(e=t.charAt(u)){case'"':n=i(t,u),u=n.act+1,r.push(n.dim);break;case",":u++,r.push(a.a.all());break;default:e.match(/\s/)?u++:(n=o(t,u),u=n.act+1,r.push(n.dim))}return","===t.charAt(t.length-1)&&r.push(a.a.all()),new s.a(r)}function i(t,e){e+=1;var n,r=t.indexOf('"',e),s=t.slice(e,r);switch(e=r+1,t.charAt(e)){case'"':return r=t.indexOf('"',e+1),n=o(t,r+1),{dim:new u.a(s,t.slice(e+1,r),n.dim),act:n.act};case"{":for(var c=[];"}"!==t.charAt(e);)n=i(t,e+1),c.push(n.dim),e=n.act;return{dim:new p.a(s,c),act:n.act+1};default:return{dim:a.a.all(),act:e}}}function o(t,e){var n,r;switch(t.charAt(e)){case",":case"}":n=e,r=a.a.all();break;case"(":r=new a.a,n=t.indexOf(")",e),n>e+1&&r.push.apply(r,t.slice(e+1,n).split(",").map(c.a.parse)),n+=1;break;default:n=t.indexOf("}",e);var i=t.indexOf(",",e);n>=0&&i>=0?n=Math.min(n,i):n<0&&(n=i),n<0&&(n=t.length),r=new a.a([c.a.parse(t.slice(e,n))])}return{act:n,dim:r}}var s=n(36),a=n(18),u=n(37),c=n(61),p=n(35);e.a=r},function(t,e,n){"use strict";var r=n(0),i=n(2),o=n(1),s=n(3),a=n(12),u=function(t){function e(e,n){var r=t.call(this,null)||this;r.strat=e,r.range=n,r._cache=null,r.root=r,r.valuetype={type:s.VALUE_TYPE_CATEGORICAL,categories:n.groups.map(function(t){return{name:t.name,label:t.name,color:t.color}})};var i=e.desc;return r.desc={name:i.name,fqname:i.fqname,description:i.description,id:i.id+"-v",type:"vector",size:i.size,idtype:i.idtype,value:r.valuetype,creator:i.creator,ts:i.ts},r}return r.a(e,t),Object.defineProperty(e.prototype,"idtype",{get:function(){return this.strat.idtype},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"idtypes",{get:function(){return[this.idtype]},enumerable:!0,configurable:!0}),e.prototype.persist=function(){return{root:this.strat.persist()}},e.prototype.restore=function(t){var e=this;return t&&t.range&&(e=e.view(n.i(o.parse)(t.range))),e},e.prototype.load=function(){if(!this._cache){var t=[];this.range.groups.forEach(function(e){e.forEach(function(){return t.push(e.name)})}),this._cache=t}return this._cache},e.prototype.at=function(t){return Promise.resolve(this.load()[t])},e.prototype.data=function(t){void 0===t&&(t=n.i(o.all)());var e=this.load();return Promise.resolve(n.i(o.parse)(t).filter(e,this.dim))},e.prototype.names=function(t){return void 0===t&&(t=n.i(o.all)()),this.strat.names(t)},e.prototype.ids=function(t){return void 0===t&&(t=n.i(o.all)()),this.strat.ids(t)},e.prototype.size=function(){return this.strat.size()},e.prototype.sort=function(t,e){return r.b(this,void 0,void 0,function(){var s,a;return r.c(this,function(r){switch(r.label){case 0:return[4,this.data()];case 1:return s=r.sent(),a=n.i(i.argSort)(s,t,e),[2,this.view(n.i(o.list)(a))]}})})},e.prototype.filter=function(t,e){return r.b(this,void 0,void 0,function(){var s,a;return r.c(this,function(r){switch(r.label){case 0:return[4,this.data()];case 1:return s=r.sent(),a=n.i(i.argFilter)(s,t,e),[2,this.view(n.i(o.list)(a))]}})})},e}(a.b);e.a=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(64);n.d(e,"guessColor",function(){return r.a});var i=n(65);n.d(e,"asStratification",function(){return i.asStratification});var o=n(122);n.d(e,"asNameVector",function(){return o.a})},function(t,e,n){"use strict";function r(t){return new a(t)}var i=n(0),o=n(1),s=n(23);e.a=r;var a=function(t){function e(e){var n=t.call(this,e)||this;return n.root=n,n}return i.a(e,t),Object.defineProperty(e.prototype,"idtype",{get:function(){return this.base.idtype},enumerable:!0,configurable:!0}),e.prototype.names=function(t){return void 0===t&&(t=n.i(o.all)()),this.base.names(t)},e.prototype.ids=function(t){return void 0===t&&(t=n.i(o.all)()),this.base.ids(t)},e.prototype.size=function(){return this.base.length},e}(s.a)},function(t,e,n){"use strict";function r(t,e){return n.i(a.composite)(t,e.map(function(t){return new a.Range1DGroup(t.name,t.color||"gray",n.i(a.parse)(t.range).dim(0))}))}function i(){var t=void 0;return function(e){return t||(t=n.i(s.getAPIJSON)("/dataset/"+e.id).then(function(t){var i=n.i(u.resolve)(e.idtype),o=n.i(a.parse)(t.rowIds);return i.fillMapCache(o.dim(0).asList(t.rows.length),t.rows),{rowIds:o,rows:t.rows,range:r(e.name,t.groups)}})),t}}function o(t,e,r){var i=void 0;return function(){return i||(i=Promise.resolve({rowIds:n.i(a.list)(e),rows:t,range:r})),i}}var s=n(9),a=n(1),u=n(4);e.a=i,e.b=o},function(t,e,n){"use strict";function r(t,e,n){n.selectionTypes.forEach(function(n){var r=""+c+e.id+"-"+n,i=!1;e.on("select-"+n,function(e,n,o){i||t.setValue(r,o.toString())}),t.on(r,function(t,r){i=!0,e.select(n,r),i=!1})})}function i(t,e){return e=n.i(o.mixin)({filter:function(){return!0},selectionTypes:[s.defaultSelectionType]},e),n.i(s.list)().filter(function(t){return t instanceof a.a&&e.filter(t)}).forEach(function(n){return r(t,n,e)}),n.i(u.on)("register.idtype",function(n,i){e.filter(i)&&r(t,i,e)}),null}Object.defineProperty(e,"__esModule",{value:!0});var o=n(2),s=n(4),a=n(17),u=n(5);e.create=i;var c="selection-idtype-"},function(t,e,n){"use strict";function r(t){return null===t?null:JSON.parse(t)}function i(t){return JSON.stringify(t)}var o=n(0),s=n(5),a=function(t){function e(n,i){var o=t.call(this)||this;return o.storage=n,o.prefix=i,window.addEventListener("storage",function(t){if(t.storageArea===n&&t.key.startsWith(i)){var s=t.key.substring(i.length),a=r(t.newValue),u=r(t.oldValue);o.fire(s,a,u,t.url),o.fire(e.EVENT_CHANGED,s,a,u,t.url)}}),o}return o.a(e,t),e.prototype.toFullKey=function(t){return this.prefix+t},e.prototype.setValue=function(t,e){t=this.toFullKey(t);var n=this.storage.getItem(t);return this.storage.setItem(t,i(e)),n},e.prototype.deleteValue=function(t){t=this.toFullKey(t),this.storage.removeItem(t)},e.prototype.includes=function(t){return t=this.toFullKey(t),null!==this.storage.getItem(t)},e.prototype.getValue=function(t,e){void 0===e&&(e=null),t=this.toFullKey(t);var n=this.storage.getItem(t);return null!==n?r(n):e},e.EVENT_CHANGED="_change",e}(s.EventHandler);e.a=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(67);n.d(e,"TabSyncer",function(){return r.a}),e.default=r.a},function(t,e,n){"use strict";function r(){return n.i(i.mixin)(n.i(o.createDefaultDataDesc)(),{type:"table",idtype:"_rows",columns:[],size:[0,0]})}var i=n(2),o=n(3);e.a=r},function(t,e,n){"use strict";function r(t,e){return new i.a(t,e)}Object.defineProperty(e,"__esModule",{value:!0});var i=n(132),o=n(69);n.d(e,"asTable",function(){return o.asTable}),n.d(e,"asTableFromArray",function(){return o.asTableFromArray});var s=n(130);n.d(e,"asNameVector",function(){return s.a}),e.fromVectors=r},function(t,e,n){"use strict";var r=n(0),i=n(2),o=n(1),s=n(12),a=function(t){function e(e,r,o,s,a){void 0===o&&(o=e),void 0===s&&(s=null),void 0===a&&(a=e.idtype);var u=t.call(this,null)||this;return u.table=e,u.f=r,u.thisArgument=o,u.valuetype=s,u._idtype=a,u.desc={name:e.desc.name+"-p",fqname:e.desc.fqname+"-p",description:r.toString(),type:"vector",id:n.i(i.fixId)(e.desc.id+"-p"+r.toString()),idtype:e.desc.idtype,size:e.nrow,value:s,creator:e.desc.creator,ts:Date.now()},u.root=u,u}return r.a(e,t),Object.defineProperty(e.prototype,"idtype",{get:function(){return this._idtype},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"idtypes",{get:function(){return[this.idtype]},enumerable:!0,configurable:!0}),e.prototype.persist=function(){return{root:this.table.persist(),f:this.f.toString(),valuetype:this.valuetype?this.valuetype:void 0,idtype:this.idtype===this.table.idtype?void 0:this.idtype.name}},e.prototype.restore=function(t){var e=this;return t&&t.range&&(e=e.view(n.i(o.parse)(t.range))),e},e.prototype.size=function(){return this.table.nrow},e.prototype.names=function(t){return this.table.rows(t)},e.prototype.ids=function(t){return this.table.rowIds(t)},e.prototype.at=function(t){return r.b(this,void 0,void 0,function(){var e,i,s;return r.c(this,function(r){switch(r.label){case 0:return i=(e=this.f).call,s=[this.thisArgument],[4,this.table.data(n.i(o.list)(t))];case 1:return[2,i.apply(e,s.concat([r.sent()[0]]))]}})})},e.prototype.data=function(t){return r.b(this,void 0,void 0,function(){return r.c(this,function(e){switch(e.label){case 0:return[4,this.table.data(t)];case 1:return[2,e.sent().map(this.f,this.thisArgument)]}})})},e.prototype.sort=function(t,e){return r.b(this,void 0,void 0,function(){var s,a;return r.c(this,function(r){switch(r.label){case 0:return[4,this.data()];case 1:return s=r.sent(),a=n.i(i.argSort)(s,t,e),[2,this.view(n.i(o.list)(a))]}})})},e.prototype.filter=function(t,e){return r.b(this,void 0,void 0,function(){var s,a;return r.c(this,function(r){switch(r.label){case 0:return[4,this.data()];case 1:return s=r.sent(),a=n.i(i.argFilter)(s,t,e),[2,this.view(n.i(o.list)(a))]}})})},e}(s.b);e.a=a},function(t,e,n){"use strict";function r(t){return new a(t)}var i=n(0),o=n(1),s=n(23);e.a=r;var a=function(t){function e(e){var n=t.call(this,e)||this;return n.root=n,n}return i.a(e,t),Object.defineProperty(e.prototype,"idtype",{get:function(){return this.base.idtype},enumerable:!0,configurable:!0}),e.prototype.names=function(t){return void 0===t&&(t=n.i(o.all)()),this.base.rows(t)},e.prototype.ids=function(t){return void 0===t&&(t=n.i(o.all)()),this.base.rowIds(t)},e.prototype.size=function(){return this.base.nrow},e}(s.a)},function(t,e,n){"use strict";var r=n(0),i=n(2),o=n(1),s=n(12),a=function(t){function e(e,n,r){var i=t.call(this,null)||this;return i.table=e,i.index=n,i.column=r.column,i.root=i,i.desc={type:"vector",id:e.desc.id+"_"+r.name,name:r.name,description:r.description||"",fqname:e.desc.fqname+"/"+r.name,idtype:e.idtype.id,size:e.nrow,value:r.value,creator:e.desc.creator,ts:e.desc.ts},i}return r.a(e,t),Object.defineProperty(e.prototype,"valuetype",{get:function(){return this.desc.value},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"idtype",{get:function(){return this.table.idtype},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"idtypes",{get:function(){return[this.idtype]},enumerable:!0,configurable:!0}),e.prototype.persist=function(){return{root:this.table.persist(),col:this.index}},e.prototype.restore=function(t){var e=this;return t&&t.range&&(e=e.view(n.i(o.parse)(t.range))),e},e.prototype.at=function(t){return this.table.at(t,this.index)},e.prototype.data=function(t){return void 0===t&&(t=n.i(o.all)()),this.table.colData(this.column,t)},e.prototype.names=function(t){return void 0===t&&(t=n.i(o.all)()),this.table.rows(t)},e.prototype.ids=function(t){return void 0===t&&(t=n.i(o.all)()),this.table.rowIds(t)},e.prototype.size=function(){return this.table.nrow},e.prototype.sort=function(t,e){return r.b(this,void 0,void 0,function(){var s,a;return r.c(this,function(r){switch(r.label){case 0:return[4,this.data()];case 1:return s=r.sent(),a=n.i(i.argSort)(s,t,e),[2,this.view(n.i(o.list)(a))]}})})},e.prototype.filter=function(t,e){return r.b(this,void 0,void 0,function(){var s,a;return r.c(this,function(r){switch(r.label){case 0:return[4,this.data()];case 1:return s=r.sent(),a=n.i(i.argFilter)(s,t,e),[2,this.view(n.i(o.list)(a))]}})})},e}(s.b);e.a=a},function(t,e,n){"use strict";var r=n(0),i=n(1),o=n(68),s=function(t){function e(e,n){var r=t.call(this,null)||this;r.vectors=n,r.root=r;var i=n[0].desc,o=e;return o.idtype=i.idtype,o.size=[n[0].length,n.length],o.columns=n.map(function(t){return t.desc.column=t.desc.column||t.desc.name,t.desc}),r.desc=o,r.idtype=n[0].idtype,r}return r.a(e,t),Object.defineProperty(e.prototype,"idtypes",{get:function(){return[this.idtype]},enumerable:!0,configurable:!0}),e.prototype.col=function(t){return this.vectors[t]},e.prototype.cols=function(t){return void 0===t&&(t=n.i(i.all)()),n.i(i.parse)(t).filter(this.vectors,[this.ncol])},e.prototype.at=function(t,e){return this.col(t).at(e)},e.prototype.data=function(t){return void 0===t&&(t=n.i(i.all)()),Promise.all(this.vectors.map(function(e){return e.data(t)})).then(function(t){var e=t[0].map(function(t){return[t]});return t.slice(1).forEach(function(t){return t.forEach(function(t,n){return e[n].push(t)})}),e})},e.prototype.colData=function(t,e){return void 0===e&&(e=n.i(i.all)()),this.dataOfColumn(t,e)},e.prototype.dataOfColumn=function(t,e){return void 0===e&&(e=n.i(i.all)()),this.vectors.find(function(e){return e.desc.name===t}).data(e)},e.prototype.objects=function(t){var e=this;return void 0===t&&(t=n.i(i.all)()),Promise.all(this.vectors.map(function(e){return e.data(t)})).then(function(t){var n=e.vectors.map(function(t){return t.desc.name}),r=t[0].map(function(t){return e={},e[n[0]]=t,e;var e});return t.slice(1).forEach(function(t,e){var i=n[e+1];t.forEach(function(t,e){return r[e][i]=t})}),r})},e.prototype.rows=function(t){return void 0===t&&(t=n.i(i.all)()),this.col(0).names(t)},e.prototype.rowIds=function(t){return void 0===t&&(t=n.i(i.all)()),this.col(0).ids(t)},e.prototype.ids=function(t){return void 0===t&&(t=n.i(i.all)()),this.rowIds(t)},e.prototype.size=function(){return[this.col(0).length,this.vectors.length]},e.prototype.persist=function(){return this.desc.id},e.prototype.restore=function(e){return e&&"number"==typeof e.col?this.col(e.col):t.prototype.restore.call(this,e)},e.prototype.queryView=function(t,e){throw Error("not implemented")},e}(o.a);e.a=s},function(t,e,n){"use strict";function r(t,e,n){if(e.isAll)return t;if(t=e.dim(0).filter(t,n.size[0]),e.ndim>1&&!e.dim(1).isAll){var r=e.dim(1).filter(n.columns,n.columns.length),i=r.map(function(t){return t.column||t.name});return t.map(function(t){var e={};return i.forEach(function(n){return e[n]=t[n]}),e})}return t}function i(t){return{rowIds:function(e,n){return t(e).then(function(t){return n.preMultiply(t.rowIds,e.size)})},rows:function(e,n){return t(e).then(function(t){return n.dim(0).filter(t.rows,e.size[0])})},col:function(e,n,r){return t(e).then(function(t){return r.filter(t.objs.map(function(t){return t[n]}),e.size)})},objs:function(e,n){return t(e).then(function(t){return r(t.objs,n,e)})},data:function(e,n){return t(e).then(function(t){return n.filter(c(t.objs,e.columns),e.size)})},view:function(t,e,n){throw new Error("not implemented")}}}function o(t,e){var r=void 0;return function(i){return r||(r=n.i(l.getAPIJSON)("/dataset/table/"+i.id+"/view/"+t,e).then(function(t){return t.rowIds=n.i(f.parse)(t.rowIds),t.objs=a(t.data,i),t})),r}}function s(t,e){return!e.value||e.value.type!==h.VALUE_TYPE_INT&&e.value.type!==h.VALUE_TYPE_REAL?t:n.i(h.mask)(t,e.value)}function a(t,e){var r=e.columns.filter(function(t){return t.value&&(t.value.type===h.VALUE_TYPE_INT||t.value.type===h.VALUE_TYPE_REAL)});return r.length>0&&t.forEach(function(t){r.forEach(function(e){return t[e.name]=n.i(h.mask)(t[e.name],e.value)})}),t}function u(){function t(t){null!==i&&null!==u&&Promise.all([i,u]).then(function(e){var r=e[0],i=e[1],o=n.i(d.resolve)(t.idtype),s=n.i(f.parse)(r);o.fillMapCache(s.dim(0).asList(i.length),i)})}var e={},i=null,u=null,p=null,h=null,y={rowIds:function(e,r){return null==i&&(i=n.i(l.getAPIJSON)("/dataset/table/"+e.id+"/rowIds").then(f.parse),t(e)),i.then(function(t){return t.preMultiply(r,e.size)})},rows:function(e,r){return null==u&&(u=n.i(l.getAPIJSON)("/dataset/table/"+e.id+"/rows"),t(e)),u.then(function(t){return r.dim(0).filter(t,e.size[0])})},objs:function(t,e){return null==p&&(e.isAll||t.loadAtOnce)&&(p=n.i(l.getAPIJSON)("/dataset/table/"+t.id+"/raw").then(function(e){return a(e,t)})),e.isAll?p:null!=p?p.then(function(n){return e.filter(n,t.size)}):n.i(l.getAPIData)("/dataset/table/"+t.id+"/raw",{range:e.toString()}).then(function(e){return a(e,t)})},data:function(t,e){return null==h&&(e.isAll||t.loadAtOnce)&&(h=y.objs(t,n.i(f.all)()).then(function(e){return c(e,t.columns)})),e.isAll?h:null!=h?h.then(function(n){return e.filter(n,t.size)}):y.objs(t,e).then(function(e){return c(e,t.columns)})},col:function(t,i,o){var u=t.columns.find(function(t){return t.column===i||t.name===i});return null==e[i]&&(o.isAll||t.loadAtOnce)&&(null===p?t.loadAtOnce?(p=n.i(l.getAPIJSON)("/dataset/table/"+t.id+"/raw").then(function(e){return a(e,t)}),e[i]=p.then(function(t){return t.map(function(t){return t[i]})})):e[i]=n.i(l.getAPIJSON)("/dataset/table/"+t.id+"/col/"+i).then(function(t){return s(t,u)}):e[i]=p.then(function(t){return t.map(function(t){return t[i]})})),o.isAll?e[i]:null!=e[i]?e[i].then(function(e){return r(e,o,t)}):n.i(l.getAPIData)("/dataset/table/"+t.id+"/col/"+i,{range:o.toString()}).then(function(t){return s(t,u)})},view:function(t,e,n){return o(e,n)}};return y}function c(t,e){return t.map(function(t){return e.map(function(e){return t[e.column]})})}function p(t,e){var r=void 0;return function(i){function o(t){return t.getter?t.getter:function(e){return e[t.column]}}if(r)return Promise.resolve(r);var s="function"==typeof e?e:function(t){return t[e.toString()]},a=i.columns.map(o),u=t.map(function(t){var e={_:t};return i.columns.forEach(function(n,r){e[n.column]=a[r](t)}),e}),c=t.map(s);return r={rowIds:i.rowassigner?i.rowassigner.map(c):n.i(f.range)(0,t.length),rows:c,objs:u,data:a.map(function(e){return t.map(e)})},Promise.resolve(r)}}var l=n(9),f=n(1),h=n(3),d=n(4);e.a=i,e.b=u,e.c=p},function(t,e,n){"use strict";function r(){return n.i(i.mixin)(n.i(o.createDefaultDataDesc)(),{type:"vector",idtype:"_rows",size:0,value:{type:"string"}})}var i=n(2),o=n(3);e.a=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(70);n.d(e,"asVector",function(){return r.asVector});var i=n(138);n.d(e,"asNameVector",function(){return i.a})},function(t,e,n){"use strict";var r=n(0),i=n(1),o=n(4),s=function(t){function e(e,n,r,i,o){void 0===r&&(r=e),void 0===i&&(i=e.valuetype),void 0===o&&(o=e.idtype);var s=t.call(this)||this;return s.v=e,s.f=n,s.thisArgument=r,s.valuetype=i,s._idtype=o,s.cache=null,s.desc={name:e.desc.name+"-p",fqname:e.desc.fqname+"-p",type:"atom",id:e.desc.id+"-p",idtype:e.idtype,value:s.valuetype,description:e.desc.description,creator:e.desc.creator,ts:e.desc.ts},s}return r.a(e,t),e.prototype.load=function(){var t=this;return null===this.cache&&(this.cache=Promise.all([this.v.data(),this.v.ids(),this.v.names()]).then(function(e){return t.f.apply(t.thisArgument,e)})),this.cache},e.prototype.id=function(){return r.b(this,void 0,void 0,function(){var t;return r.c(this,function(e){switch(e.label){case 0:return[4,this.load()];case 1:return t=e.sent(),[2,n.i(i.list)(t.id)]}})})},e.prototype.name=function(){return r.b(this,void 0,void 0,function(){var t;return r.c(this,function(e){switch(e.label){case 0:return[4,this.load()];case 1:return t=e.sent(),[2,t.name]}})})},e.prototype.data=function(){return r.b(this,void 0,void 0,function(){var t;return r.c(this,function(e){switch(e.label){case 0:return[4,this.load()];case 1:return t=e.sent(),[2,t.value]}})})},Object.defineProperty(e.prototype,"dim",{get:function(){return[1]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"idtype",{get:function(){return this._idtype},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"idtypes",{get:function(){return[this._idtype]},enumerable:!0,configurable:!0}),e.prototype.ids=function(t){return void 0===t&&(t=n.i(i.all)()),t=n.i(i.parse)(t),t.isNone?Promise.resolve(n.i(i.none)()):this.id()},e.prototype.idView=function(t){return Promise.resolve(this)},e.prototype.persist=function(){return{root:this.v.persist(),f:this.f.toString(),valuetype:this.valuetype===this.v.valuetype?void 0:this.valuetype,idtype:this.idtype===this.v.idtype?void 0:this.idtype.name}},e.prototype.restore=function(t){return this},e}(o.SelectAble);e.a=s},function(t,e,n){"use strict";var r=n(0),i=n(1),o=n(3),s=n(11),a=n(66),u=function(t){function e(e,n){var r=t.call(this,{id:e.desc.id+"-s",name:e.desc.name,description:e.desc.description,creator:e.desc.creator,ts:e.desc.ts,fqname:e.desc.fqname,type:"stratification",idtype:e.idtype.id,size:e.length,ngroups:n.groups.length,groups:n.groups.map(function(t){return{name:t.name,color:t.color,size:t.length}})})||this;return r.v=e,r.r=n,r}return r.a(e,t),Object.defineProperty(e.prototype,"idtype",{get:function(){return this.v.idtype},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"groups",{get:function(){return this.desc.groups},enumerable:!0,configurable:!0}),e.prototype.group=function(t){return new a.a(this,t,this.groups[t])},e.prototype.hist=function(t,e){return void 0===e&&(e=n.i(i.all)()),r.b(this,void 0,void 0,function(){var t;return r.c(this,function(e){switch(e.label){case 0:return t=s.rangeHist,[4,this.range()];case 1:return[2,t.apply(void 0,[e.sent()])]}})})},e.prototype.vector=function(){return this.asVector()},e.prototype.asVector=function(){return Promise.resolve(this.v)},e.prototype.origin=function(){return this.asVector()},e.prototype.range=function(){return Promise.resolve(this.r)},e.prototype.idRange=function(){return r.b(this,void 0,void 0,function(){var t;return r.c(this,function(e){switch(e.label){case 0:return[4,this.ids()];case 1:return t=e.sent(),[2,t.dim(0).preMultiply(this.r,this.dim[0])]}})})},e.prototype.names=function(t){return void 0===t&&(t=n.i(i.all)()),this.v.names(t)},e.prototype.ids=function(t){return void 0===t&&(t=n.i(i.all)()),this.v.ids(t)},Object.defineProperty(e.prototype,"idtypes",{get:function(){return[this.idtype]},enumerable:!0,configurable:!0}),e.prototype.size=function(){return this.desc.size},Object.defineProperty(e.prototype,"length",{get:function(){return this.size()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngroups",{get:function(){return this.groups.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dim",{get:function(){return[this.size()]},enumerable:!0,configurable:!0}),e.prototype.persist=function(){return{root:this.v.persist(),asstrat:!0}},e}(o.ADataType);e.a=u},function(t,e,n){"use strict";function r(t){return new a(t)}var i=n(0),o=n(1),s=n(23);e.a=r;var a=function(t){function e(e){var n=t.call(this,e)||this;return n.root=n,n}return i.a(e,t),Object.defineProperty(e.prototype,"idtype",{get:function(){return this.base.idtype},enumerable:!0,configurable:!0}),e.prototype.names=function(t){return void 0===t&&(t=n.i(o.all)()),this.base.names(t)},e.prototype.ids=function(t){return void 0===t&&(t=n.i(o.all)()),this.base.ids(t)},e.prototype.size=function(){return this.base.length},e}(s.a)},function(t,e,n){"use strict";function r(){var t=void 0;return function(e){return t||(t=n.i(o.getAPIJSON)("/dataset/"+e.id).then(function(t){var r=n.i(s.parse)(t.rowIds);return t.rowIds=r,t.data=n.i(a.mask)(t.data,e.value),n.i(u.resolve)(e.idtype).fillMapCache(r.dim(0).asList(t.rows.length),t.rows),t}))}}function i(t,e,r){var i=void 0;return function(){return i?Promise.resolve(i):(i={rowIds:n.i(s.parse)(e),rows:t,data:r},Promise.resolve(i))}}var o=n(9),s=n(1),a=n(3),u=n(4);e.a=r,e.b=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(2),i=n(19),o=n(1),s=n(4),a=n(5),u=n(25);n.d(e,"C",function(){return c}),n.d(e,"data",function(){return p}),n.d(e,"ranges",function(){return l}),n.d(e,"idtypes",function(){return f}),n.d(e,"geom",function(){return h}),n.d(e,"events",function(){return d});var c=r,p=i,l=o,f=s,h=u,d=a},function(t,e,n){"use strict";function r(){var t,e,n=new Promise(function(n,r){t=n,e=r});return n.resolve=t,n.reject=e,n}function i(t){return null==t?"":""+t}function o(t,e,n){t.forEach(function(t){e[t]&&(n[t]=e[t])})}function s(t,e,n){function r(t){return t&&t.indexOf("###")>-1?t.replace(/###/g,"."):t}function i(){return!t||"string"==typeof t}for(var o="string"!=typeof e?[].concat(e):e.split(".");o.length>1;){if(i())return{};var s=r(o.shift());!t[s]&&n&&(t[s]=new n),t=t[s]}return i()?{}:{obj:t,k:r(o.shift())}}function a(t,e,n){var r=s(t,e,Object);r.obj[r.k]=n}function u(t,e,n,r){var i=s(t,e,Object),o=i.obj,a=i.k;o[a]=o[a]||[],r&&(o[a]=o[a].concat(n)),r||o[a].push(n)}function c(t,e){var n=s(t,e),r=n.obj,i=n.k;if(r)return r[i]}function p(t,e,n){var r=c(t,n);return void 0!==r?r:c(e,n)}function l(t,e,n){for(var r in e)r in t?"string"==typeof t[r]||t[r]instanceof String||"string"==typeof e[r]||e[r]instanceof String?n&&(t[r]=e[r]):l(t[r],e[r],n):t[r]=e[r];return t}function f(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}function h(t){return"string"==typeof t?t.replace(/[&<>"'\/]/g,function(t){return R[t]}):t}function d(t){return t.charAt(0).toUpperCase()+t.slice(1)}function y(){var t={};return V.forEach(function(e){e.lngs.forEach(function(n){t[n]={numbers:e.nr,plurals:B[e.fc]}})}),t}function g(t,e){for(var n=t.indexOf(e);-1!==n;)t.splice(n,1),n=t.indexOf(e)}function v(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,whitelist:!1,nonExplicitWhitelist:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!0,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(t){var e={};if("object"===n.i(b.a)(t[1])&&(e=t[1]),"string"==typeof t[1]&&(e.defaultValue=t[1]),"string"==typeof t[2]&&(e.tDescription=t[2]),"object"===n.i(b.a)(t[2])||"object"===n.i(b.a)(t[3])){var r=t[3]||t[2];Object.keys(r).forEach(function(t){e[t]=r[t]})}return e},interpolation:{escapeValue:!0,format:function(t,e,n){return t},prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",maxReplaces:1e3}}}function _(t){return"string"==typeof t.ns&&(t.ns=[t.ns]),"string"==typeof t.fallbackLng&&(t.fallbackLng=[t.fallbackLng]),"string"==typeof t.fallbackNS&&(t.fallbackNS=[t.fallbackNS]),t.whitelist&&t.whitelist.indexOf("cimode")<0&&(t.whitelist=t.whitelist.concat(["cimode"])),t}function m(){}var b=n(39),x=n(86),E=n(77),P=n(78),O=n(87),w=n(80),A=n(38),M=n(81),D=n(90),I=n(89),T={type:"logger",log:function(t){this.output("log",t)},warn:function(t){this.output("warn",t)},error:function(t){this.output("error",t)},output:function(t,e){var r;console&&console[t]&&(r=console)[t].apply(r,n.i(D.a)(e))}},S=function(){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n.i(E.a)(this,t),this.init(e,r)}return n.i(P.a)(t,[{key:"init",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.prefix=e.prefix||"i18next:",this.logger=t||T,this.options=e,this.debug=e.debug}},{key:"setDebug",value:function(t){this.debug=t}},{key:"log",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.forward(e,"log","",!0)}},{key:"warn",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.forward(e,"warn","",!0)}},{key:"error",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.forward(e,"error","")}},{key:"deprecate",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}},{key:"forward",value:function(t,e,n,r){return r&&!this.debug?null:("string"==typeof t[0]&&(t[0]="".concat(n).concat(this.prefix," ").concat(t[0])),this.logger[e](t))}},{key:"create",value:function(e){return new t(this.logger,n.i(x.a)({},{prefix:"".concat(this.prefix,":").concat(e,":")},this.options))}}]),t}(),L=new S,j=function(){function t(){n.i(E.a)(this,t),this.observers={}}return n.i(P.a)(t,[{key:"on",value:function(t,e){var n=this;return t.split(" ").forEach(function(t){n.observers[t]=n.observers[t]||[],n.observers[t].push(e)}),this}},{key:"off",value:function(t,e){if(this.observers[t])return e?void(this.observers[t]=this.observers[t].filter(function(t){return t!==e})):void delete this.observers[t]}},{key:"emit",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];if(this.observers[t]){[].concat(this.observers[t]).forEach(function(t){t.apply(void 0,n)})}if(this.observers["*"]){[].concat(this.observers["*"]).forEach(function(e){e.apply(e,[t].concat(n))})}}}]),t}(),R={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},N=function(t){function e(t){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{ns:["translation"],defaultNS:"translation"};return n.i(E.a)(this,e),r=n.i(O.a)(this,n.i(w.a)(e).call(this)),j.call(n.i(A.a)(r)),r.data=t||{},r.options=i,void 0===r.options.keySeparator&&(r.options.keySeparator="."),r}return n.i(M.a)(e,t),n.i(P.a)(e,[{key:"addNamespaces",value:function(t){this.options.ns.indexOf(t)<0&&this.options.ns.push(t)}},{key:"removeNamespaces",value:function(t){var e=this.options.ns.indexOf(t);e>-1&&this.options.ns.splice(e,1)}},{key:"getResource",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=void 0!==r.keySeparator?r.keySeparator:this.options.keySeparator,o=[t,e];return n&&"string"!=typeof n&&(o=o.concat(n)),n&&"string"==typeof n&&(o=o.concat(i?n.split(i):n)),t.indexOf(".")>-1&&(o=t.split(".")),c(this.data,o)}},{key:"addResource",value:function(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{silent:!1},o=this.options.keySeparator;void 0===o&&(o=".");var s=[t,e];n&&(s=s.concat(o?n.split(o):n)),t.indexOf(".")>-1&&(s=t.split("."),r=e,e=s[1]),this.addNamespaces(e),a(this.data,s,r),i.silent||this.emit("added",t,e,n,r)}},{key:"addResources",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{silent:!1};for(var i in n)"string"!=typeof n[i]&&"[object Array]"!==Object.prototype.toString.apply(n[i])||this.addResource(t,e,i,n[i],{silent:!0});r.silent||this.emit("added",t,e,n)}},{key:"addResourceBundle",value:function(t,e,r,i,o){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{silent:!1},u=[t,e];t.indexOf(".")>-1&&(u=t.split("."),i=r,r=e,e=u[1]),this.addNamespaces(e);var p=c(this.data,u)||{};i?l(p,r,o):p=n.i(x.a)({},p,r),a(this.data,u,p),s.silent||this.emit("added",t,e,r)}},{key:"removeResourceBundle",value:function(t,e){this.hasResourceBundle(t,e)&&delete this.data[t][e],this.removeNamespaces(e),this.emit("removed",t,e)}},{key:"hasResourceBundle",value:function(t,e){return void 0!==this.getResource(t,e)}},{key:"getResourceBundle",value:function(t,e){return e||(e=this.options.defaultNS),"v1"===this.options.compatibilityAPI?n.i(x.a)({},{},this.getResource(t,e)):this.getResource(t,e)}},{key:"getDataByLanguage",value:function(t){return this.data[t]}},{key:"toJSON",value:function(){return this.data}}]),e}(j),C={processors:{},addPostProcessor:function(t){this.processors[t.name]=t},handle:function(t,e,n,r,i){var o=this;return t.forEach(function(t){o.processors[t]&&(e=o.processors[t].process(e,n,r,i))}),e}},k=function(t){function e(t){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n.i(E.a)(this,e),r=n.i(O.a)(this,n.i(w.a)(e).call(this)),j.call(n.i(A.a)(r)),o(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],t,n.i(A.a)(r)),r.options=i,void 0===r.options.keySeparator&&(r.options.keySeparator="."),r.logger=L.create("translator"),r}return n.i(M.a)(e,t),n.i(P.a)(e,[{key:"changeLanguage",value:function(t){t&&(this.language=t)}},{key:"exists",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}},n=this.resolve(t,e);return n&&void 0!==n.res}},{key:"extractFromKey",value:function(t,e){var n=e.nsSeparator||this.options.nsSeparator;void 0===n&&(n=":");var r=void 0!==e.keySeparator?e.keySeparator:this.options.keySeparator,i=e.ns||this.options.defaultNS;if(n&&t.indexOf(n)>-1){var o=t.split(n);(n!==r||n===r&&this.options.ns.indexOf(o[0])>-1)&&(i=o.shift()),t=o.join(r)}return"string"==typeof i&&(i=[i]),{key:t,namespaces:i}}},{key:"translate",value:function(t,e){var r=this;if("object"!==n.i(b.a)(e)&&this.options.overloadTranslationOptionHandler&&(e=this.options.overloadTranslationOptionHandler(arguments)),e||(e={}),void 0===t||null===t)return"";Array.isArray(t)||(t=[String(t)]);var i=void 0!==e.keySeparator?e.keySeparator:this.options.keySeparator,o=this.extractFromKey(t[t.length-1],e),s=o.key,a=o.namespaces,u=a[a.length-1],c=e.lng||this.language,p=e.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(c&&"cimode"===c.toLowerCase()){if(p){var l=e.nsSeparator||this.options.nsSeparator;return u+l+s}return s}var f=this.resolve(t,e),h=f&&f.res,d=f&&f.usedKey||s,y=f&&f.exactUsedKey||s,g=Object.prototype.toString.apply(h),v=["[object Number]","[object Function]","[object RegExp]"],_=void 0!==e.joinArrays?e.joinArrays:this.options.joinArrays,m=!this.i18nFormat||this.i18nFormat.handleAsObject,E="string"!=typeof h&&"boolean"!=typeof h&&"number"!=typeof h;if(m&&h&&E&&v.indexOf(g)<0&&("string"!=typeof _||"[object Array]"!==g)){if(!e.returnObjects&&!this.options.returnObjects)return this.logger.warn("accessing an object - but returnObjects options is not enabled!"),this.options.returnedObjectHandler?this.options.returnedObjectHandler(d,h,e):"key '".concat(s," (").concat(this.language,")' returned an object instead of string.");if(i){var P="[object Array]"===g,O=P?[]:{},w=P?y:d;for(var A in h)if(Object.prototype.hasOwnProperty.call(h,A)){var M="".concat(w).concat(i).concat(A);O[A]=this.translate(M,n.i(x.a)({},e,{joinArrays:!1,ns:a})),O[A]===M&&(O[A]=h[A])}h=O}}else if(m&&"string"==typeof _&&"[object Array]"===g)(h=h.join(_))&&(h=this.extendTranslation(h,t,e));else{var D=!1,I=!1;if(!this.isValidLookup(h)&&void 0!==e.defaultValue){if(D=!0,void 0!==e.count){var T=this.pluralResolver.getSuffix(c,e.count);h=e["defaultValue".concat(T)]}h||(h=e.defaultValue)}this.isValidLookup(h)||(I=!0,h=s);var S=e.defaultValue&&e.defaultValue!==h&&this.options.updateMissing;if(I||D||S){this.logger.log(S?"updateKey":"missingKey",c,u,s,S?e.defaultValue:h);var L=[],j=this.languageUtils.getFallbackCodes(this.options.fallbackLng,e.lng||this.language);if("fallback"===this.options.saveMissingTo&&j&&j[0])for(var R=0;R<j.length;R++)L.push(j[R]);else"all"===this.options.saveMissingTo?L=this.languageUtils.toResolveHierarchy(e.lng||this.language):L.push(e.lng||this.language);var N=function(t,n){r.options.missingKeyHandler?r.options.missingKeyHandler(t,u,n,S?e.defaultValue:h,S,e):r.backendConnector&&r.backendConnector.saveMissing&&r.backendConnector.saveMissing(t,u,n,S?e.defaultValue:h,S,e),r.emit("missingKey",t,u,n,h)};if(this.options.saveMissing){var C=void 0!==e.count&&"string"!=typeof e.count;this.options.saveMissingPlurals&&C?L.forEach(function(t){r.pluralResolver.getPluralFormsOfKey(t,s).forEach(function(e){return N([t],e)})}):N(L,s)}}h=this.extendTranslation(h,t,e,f),I&&h===s&&this.options.appendNamespaceToMissingKey&&(h="".concat(u,":").concat(s)),I&&this.options.parseMissingKeyHandler&&(h=this.options.parseMissingKeyHandler(h))}return h}},{key:"extendTranslation",value:function(t,e,r,i){var o=this;if(this.i18nFormat&&this.i18nFormat.parse)t=this.i18nFormat.parse(t,r,i.usedLng,i.usedNS,i.usedKey,{resolved:i});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init(n.i(x.a)({},r,{interpolation:n.i(x.a)({},this.options.interpolation,r.interpolation)}));var s=r.replace&&"string"!=typeof r.replace?r.replace:r;this.options.interpolation.defaultVariables&&(s=n.i(x.a)({},this.options.interpolation.defaultVariables,s)),t=this.interpolator.interpolate(t,s,r.lng||this.language,r),!1!==r.nest&&(t=this.interpolator.nest(t,function(){return o.translate.apply(o,arguments)},r)),r.interpolation&&this.interpolator.reset()}var a=r.postProcess||this.options.postProcess,u="string"==typeof a?[a]:a;return void 0!==t&&null!==t&&u&&u.length&&!1!==r.applyPostProcessor&&(t=C.handle(u,t,e,this.options&&this.options.postProcessPassResolved?n.i(x.a)({i18nResolved:i},r):r,this)),t}},{key:"resolve",value:function(t){var e,n,r,i,o,s=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"string"==typeof t&&(t=[t]),t.forEach(function(t){if(!s.isValidLookup(e)){var u=s.extractFromKey(t,a),c=u.key;n=c;var p=u.namespaces;s.options.fallbackNS&&(p=p.concat(s.options.fallbackNS));var l=void 0!==a.count&&"string"!=typeof a.count,f=void 0!==a.context&&"string"==typeof a.context&&""!==a.context,h=a.lngs?a.lngs:s.languageUtils.toResolveHierarchy(a.lng||s.language,a.fallbackLng);p.forEach(function(t){s.isValidLookup(e)||(o=t,s.utils&&s.utils.hasLoadedNamespace&&!s.utils.hasLoadedNamespace(o)&&s.logger.warn('key "'.concat(n,'" for namespace "').concat(o,"\" won't get resolved as namespace was not yet loaded"),"This means something IS WRONG in your application setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!"),h.forEach(function(n){if(!s.isValidLookup(e)){i=n;var o=c,u=[o];if(s.i18nFormat&&s.i18nFormat.addLookupKeys)s.i18nFormat.addLookupKeys(u,c,n,t,a);else{var p;l&&(p=s.pluralResolver.getSuffix(n,a.count)),l&&f&&u.push(o+p),f&&u.push(o+="".concat(s.options.contextSeparator).concat(a.context)),l&&u.push(o+=p)}for(var h;h=u.pop();)s.isValidLookup(e)||(r=h,e=s.getResource(n,t,h,a))}}))})}}),{res:e,usedKey:n,exactUsedKey:r,usedLng:i,usedNS:o}}},{key:"isValidLookup",value:function(t){return!(void 0===t||!this.options.returnNull&&null===t||!this.options.returnEmptyString&&""===t)}},{key:"getResource",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(t,e,n,r):this.resourceStore.getResource(t,e,n,r)}}]),e}(j),U=function(){function t(e){n.i(E.a)(this,t),this.options=e,this.whitelist=this.options.whitelist||!1,this.logger=L.create("languageUtils")}return n.i(P.a)(t,[{key:"getScriptPartFromCode",value:function(t){if(!t||t.indexOf("-")<0)return null;var e=t.split("-");return 2===e.length?null:(e.pop(),this.formatLanguageCode(e.join("-")))}},{key:"getLanguagePartFromCode",value:function(t){if(!t||t.indexOf("-")<0)return t;var e=t.split("-");return this.formatLanguageCode(e[0])}},{key:"formatLanguageCode",value:function(t){if("string"==typeof t&&t.indexOf("-")>-1){var e=["hans","hant","latn","cyrl","cans","mong","arab"],n=t.split("-");return this.options.lowerCaseLng?n=n.map(function(t){return t.toLowerCase()}):2===n.length?(n[0]=n[0].toLowerCase(),n[1]=n[1].toUpperCase(),e.indexOf(n[1].toLowerCase())>-1&&(n[1]=d(n[1].toLowerCase()))):3===n.length&&(n[0]=n[0].toLowerCase(),2===n[1].length&&(n[1]=n[1].toUpperCase()),"sgn"!==n[0]&&2===n[2].length&&(n[2]=n[2].toUpperCase()),e.indexOf(n[1].toLowerCase())>-1&&(n[1]=d(n[1].toLowerCase())),e.indexOf(n[2].toLowerCase())>-1&&(n[2]=d(n[2].toLowerCase()))),n.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?t.toLowerCase():t}},{key:"isWhitelisted",value:function(t){return("languageOnly"===this.options.load||this.options.nonExplicitWhitelist)&&(t=this.getLanguagePartFromCode(t)),!this.whitelist||!this.whitelist.length||this.whitelist.indexOf(t)>-1}},{key:"getFallbackCodes",value:function(t,e){if(!t)return[];if("string"==typeof t&&(t=[t]),"[object Array]"===Object.prototype.toString.apply(t))return t;if(!e)return t.default||[];var n=t[e];return n||(n=t[this.getScriptPartFromCode(e)]),n||(n=t[this.formatLanguageCode(e)]),n||(n=t.default),n||[]}},{key:"toResolveHierarchy",value:function(t,e){var n=this,r=this.getFallbackCodes(e||this.options.fallbackLng||[],t),i=[],o=function(t){t&&(n.isWhitelisted(t)?i.push(t):n.logger.warn("rejecting non-whitelisted language code: ".concat(t)))};return"string"==typeof t&&t.indexOf("-")>-1?("languageOnly"!==this.options.load&&o(this.formatLanguageCode(t)),"languageOnly"!==this.options.load&&"currentOnly"!==this.options.load&&o(this.getScriptPartFromCode(t)),"currentOnly"!==this.options.load&&o(this.getLanguagePartFromCode(t))):"string"==typeof t&&o(this.formatLanguageCode(t)),r.forEach(function(t){i.indexOf(t)<0&&o(n.formatLanguageCode(t))}),i}}]),t}(),V=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","id","ja","jbo","ka","kk","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he"],nr:[1,2,20,21],fc:22}],B={1:function(t){return Number(t>1)},2:function(t){return Number(1!=t)},3:function(t){return 0},4:function(t){return Number(t%10==1&&t%100!=11?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2)},5:function(t){return Number(0===t?0:1==t?1:2==t?2:t%100>=3&&t%100<=10?3:t%100>=11?4:5)},6:function(t){return Number(1==t?0:t>=2&&t<=4?1:2)},7:function(t){return Number(1==t?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2)},8:function(t){return Number(1==t?0:2==t?1:8!=t&&11!=t?2:3)},9:function(t){return Number(t>=2)},10:function(t){return Number(1==t?0:2==t?1:t<7?2:t<11?3:4)},11:function(t){return Number(1==t||11==t?0:2==t||12==t?1:t>2&&t<20?2:3)},12:function(t){return Number(t%10!=1||t%100==11)},13:function(t){return Number(0!==t)},14:function(t){return Number(1==t?0:2==t?1:3==t?2:3)},15:function(t){return Number(t%10==1&&t%100!=11?0:t%10>=2&&(t%100<10||t%100>=20)?1:2)},16:function(t){return Number(t%10==1&&t%100!=11?0:0!==t?1:2)},17:function(t){return Number(1==t||t%10==1?0:1)},18:function(t){return Number(0==t?0:1==t?1:2)},19:function(t){return Number(1==t?0:0===t||t%100>1&&t%100<11?1:t%100>10&&t%100<20?2:3)},20:function(t){return Number(1==t?0:0===t||t%100>0&&t%100<20?1:2)},21:function(t){return Number(t%100==1?1:t%100==2?2:t%100==3||t%100==4?3:0)},22:function(t){return Number(1===t?0:2===t?1:(t<0||t>10)&&t%10==0?2:3)}},q=function(){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n.i(E.a)(this,t),this.languageUtils=e,this.options=r,this.logger=L.create("pluralResolver"),this.rules=y()}return n.i(P.a)(t,[{key:"addRule",value:function(t,e){this.rules[t]=e}},{key:"getRule",value:function(t){return this.rules[t]||this.rules[this.languageUtils.getLanguagePartFromCode(t)]}},{key:"needsPlural",value:function(t){var e=this.getRule(t);return e&&e.numbers.length>1}},{key:"getPluralFormsOfKey",value:function(t,e){var n=this,r=[],i=this.getRule(t);return i?(i.numbers.forEach(function(i){var o=n.getSuffix(t,i);r.push("".concat(e).concat(o))}),r):r}},{key:"getSuffix",value:function(t,e){var n=this,r=this.getRule(t);if(r){var i=r.noAbs?r.plurals(e):r.plurals(Math.abs(e)),o=r.numbers[i];this.options.simplifyPluralSuffix&&2===r.numbers.length&&1===r.numbers[0]&&(2===o?o="plural":1===o&&(o=""));var s=function(){return n.options.prepend&&o.toString()?n.options.prepend+o.toString():o.toString()};return"v1"===this.options.compatibilityJSON?1===o?"":"number"==typeof o?"_plural_".concat(o.toString()):s():"v2"===this.options.compatibilityJSON?s():this.options.simplifyPluralSuffix&&2===r.numbers.length&&1===r.numbers[0]?s():this.options.prepend&&i.toString()?this.options.prepend+i.toString():i.toString()}return this.logger.warn("no plural rule found for: ".concat(t)),""}}]),t}(),z=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n.i(E.a)(this,t),this.logger=L.create("interpolator"),this.options=e,this.format=e.interpolation&&e.interpolation.format||function(t){return t},this.init(e)}return n.i(P.a)(t,[{key:"init",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.interpolation||(t.interpolation={escapeValue:!0});var e=t.interpolation;this.escape=void 0!==e.escape?e.escape:h,this.escapeValue=void 0===e.escapeValue||e.escapeValue,this.useRawValueToEscape=void 0!==e.useRawValueToEscape&&e.useRawValueToEscape,this.prefix=e.prefix?f(e.prefix):e.prefixEscaped||"{{",this.suffix=e.suffix?f(e.suffix):e.suffixEscaped||"}}",this.formatSeparator=e.formatSeparator?e.formatSeparator:e.formatSeparator||",",this.unescapePrefix=e.unescapeSuffix?"":e.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":e.unescapeSuffix||"",this.nestingPrefix=e.nestingPrefix?f(e.nestingPrefix):e.nestingPrefixEscaped||f("$t("),this.nestingSuffix=e.nestingSuffix?f(e.nestingSuffix):e.nestingSuffixEscaped||f(")"),this.maxReplaces=e.maxReplaces?e.maxReplaces:1e3,this.resetRegExp()}},{key:"reset",value:function(){this.options&&this.init(this.options)}},{key:"resetRegExp",value:function(){var t="".concat(this.prefix,"(.+?)").concat(this.suffix);this.regexp=new RegExp(t,"g");var e="".concat(this.prefix).concat(this.unescapePrefix,"(.+?)").concat(this.unescapeSuffix).concat(this.suffix);this.regexpUnescape=new RegExp(e,"g");var n="".concat(this.nestingPrefix,"(.+?)").concat(this.nestingSuffix);this.nestingRegexp=new RegExp(n,"g")}},{key:"interpolate",value:function(t,e,n,r){function o(t){return t.replace(/\$/g,"$$$$")}var s,a,u,c=this,l=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},f=function(t){if(t.indexOf(c.formatSeparator)<0)return p(e,l,t);var r=t.split(c.formatSeparator),i=r.shift().trim(),o=r.join(c.formatSeparator).trim();return c.format(p(e,l,i),o,n)};this.resetRegExp();var h=r&&r.missingInterpolationHandler||this.options.missingInterpolationHandler;for(u=0;s=this.regexpUnescape.exec(t);){if(void 0===(a=f(s[1].trim())))if("function"==typeof h){var d=h(t,s,r);a="string"==typeof d?d:""}else this.logger.warn("missed to pass in variable ".concat(s[1]," for interpolating ").concat(t)),a="";else"string"==typeof a||this.useRawValueToEscape||(a=i(a));if(t=t.replace(s[0],o(a)),this.regexpUnescape.lastIndex=0,++u>=this.maxReplaces)break}for(u=0;s=this.regexp.exec(t);){if(void 0===(a=f(s[1].trim())))if("function"==typeof h){var y=h(t,s,r);a="string"==typeof y?y:""}else this.logger.warn("missed to pass in variable ".concat(s[1]," for interpolating ").concat(t)),a="";else"string"==typeof a||this.useRawValueToEscape||(a=i(a));if(a=o(this.escapeValue?this.escape(a):a),t=t.replace(s[0],a),this.regexp.lastIndex=0,++u>=this.maxReplaces)break}return t}},{key:"nest",value:function(t,e){function r(t,e){if(t.indexOf(",")<0)return t;var r=t.split(",");t=r.shift();var i=r.join(",");i=this.interpolate(i,u),i=i.replace(/'/g,'"');try{u=JSON.parse(i),e&&(u=n.i(x.a)({},e,u))}catch(e){this.logger.error("failed parsing options string in nesting for key ".concat(t),e)}return delete u.defaultValue,t}var o,s,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},u=n.i(x.a)({},a);for(u.applyPostProcessor=!1,delete u.defaultValue;o=this.nestingRegexp.exec(t);){if((s=e(r.call(this,o[1].trim(),u),u))&&o[0]===t&&"string"!=typeof s)return s;"string"!=typeof s&&(s=i(s)),s||(this.logger.warn("missed to resolve ".concat(o[1]," for nesting ").concat(t)),s=""),t=t.replace(o[0],s),this.regexp.lastIndex=0}return t}}]),t}(),W=function(t){function e(t,r,i){var o,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return n.i(E.a)(this,e),o=n.i(O.a)(this,n.i(w.a)(e).call(this)),j.call(n.i(A.a)(o)),o.backend=t,o.store=r,o.services=i,o.languageUtils=i.languageUtils,o.options=s,o.logger=L.create("backendConnector"),o.state={},o.queue=[],o.backend&&o.backend.init&&o.backend.init(i,s.backend,s),o}return n.i(M.a)(e,t),n.i(P.a)(e,[{key:"queueLoad",value:function(t,e,n,r){var i=this,o=[],s=[],a=[],u=[];return t.forEach(function(t){var r=!0;e.forEach(function(e){var a="".concat(t,"|").concat(e);!n.reload&&i.store.hasResourceBundle(t,e)?i.state[a]=2:i.state[a]<0||(1===i.state[a]?s.indexOf(a)<0&&s.push(a):(i.state[a]=1,r=!1,s.indexOf(a)<0&&s.push(a),o.indexOf(a)<0&&o.push(a),u.indexOf(e)<0&&u.push(e)))}),r||a.push(t)}),(o.length||s.length)&&this.queue.push({pending:s,loaded:{},errors:[],callback:r}),{toLoad:o,pending:s,toLoadLanguages:a,toLoadNamespaces:u}}},{key:"loaded",value:function(t,e,r){var i=t.split("|"),o=n.i(I.a)(i,2),s=o[0],a=o[1];e&&this.emit("failedLoading",s,a,e),r&&this.store.addResourceBundle(s,a,r),this.state[t]=e?-1:2;var c={};this.queue.forEach(function(n){u(n.loaded,[s],a),g(n.pending,t),e&&n.errors.push(e),0!==n.pending.length||n.done||(Object.keys(n.loaded).forEach(function(t){c[t]||(c[t]=[]),n.loaded[t].length&&n.loaded[t].forEach(function(e){c[t].indexOf(e)<0&&c[t].push(e)})}),n.done=!0,n.errors.length?n.callback(n.errors):n.callback())}),this.emit("loaded",c),this.queue=this.queue.filter(function(t){return!t.done})}},{key:"read",value:function(t,e,n){var r=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:250,s=arguments.length>5?arguments[5]:void 0;return t.length?this.backend[n](t,e,function(a,u){if(a&&u&&i<5)return void setTimeout(function(){r.read.call(r,t,e,n,i+1,2*o,s)},o);s(a,u)}):s(null,{})}},{key:"prepareLoading",value:function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),i&&i();"string"==typeof t&&(t=this.languageUtils.toResolveHierarchy(t)),"string"==typeof e&&(e=[e]);var o=this.queueLoad(t,e,r,i);if(!o.toLoad.length)return o.pending.length||i(),null;o.toLoad.forEach(function(t){n.loadOne(t)})}},{key:"load",value:function(t,e,n){this.prepareLoading(t,e,{},n)}},{key:"reload",value:function(t,e,n){this.prepareLoading(t,e,{reload:!0},n)}},{key:"loadOne",value:function(t){var e=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=t.split("|"),o=n.i(I.a)(i,2),s=o[0],a=o[1];this.read(s,a,"read",null,null,function(n,i){n&&e.logger.warn("".concat(r,"loading namespace ").concat(a," for language ").concat(s," failed"),n),!n&&i&&e.logger.log("".concat(r,"loaded namespace ").concat(a," for language ").concat(s),i),e.loaded(t,n,i)})}},{key:"saveMissing",value:function(t,e,r,i,o){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(e))return void this.logger.warn('did not save key "'.concat(r,'" for namespace "').concat(e,'" as the namespace was not yet loaded'),"This means something IS WRONG in your application setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");this.backend&&this.backend.create&&this.backend.create(t,e,r,i,null,n.i(x.a)({},s,{isUpdate:o})),t&&t[0]&&this.store.addResource(t[0],e,r,i)}}]),e}(j),K=function(t){function e(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0;if(n.i(E.a)(this,e),t=n.i(O.a)(this,n.i(w.a)(e).call(this)),j.call(n.i(A.a)(t)),t.options=_(r),t.services={},t.logger=L,t.modules={external:[]},i&&!t.isInitialized&&!r.isClone){if(!t.options.initImmediate)return t.init(r,i),n.i(O.a)(t,n.i(A.a)(t));setTimeout(function(){t.init(r,i)},0)}return t}return n.i(M.a)(e,t),n.i(P.a)(e,[{key:"init",value:function(){function t(t){return t?"function"==typeof t?new t:t:null}var e=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0;if("function"==typeof i&&(o=i,i={}),this.options=n.i(x.a)({},v(),this.options,_(i)),this.format=this.options.interpolation.format,o||(o=m),!this.options.isClone){this.modules.logger?L.init(t(this.modules.logger),this.options):L.init(null,this.options);var s=new U(this.options);this.store=new N(this.options.resources,this.options);var a=this.services;a.logger=L,a.resourceStore=this.store,a.languageUtils=s,a.pluralResolver=new q(s,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),a.interpolator=new z(this.options),a.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},a.backendConnector=new W(t(this.modules.backend),a.resourceStore,a,this.options),a.backendConnector.on("*",function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];e.emit.apply(e,[t].concat(r))}),this.modules.languageDetector&&(a.languageDetector=t(this.modules.languageDetector),a.languageDetector.init(a,this.options.detection,this.options)),this.modules.i18nFormat&&(a.i18nFormat=t(this.modules.i18nFormat),a.i18nFormat.init&&a.i18nFormat.init(this)),this.translator=new k(this.services,this.options),this.translator.on("*",function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];e.emit.apply(e,[t].concat(r))}),this.modules.external.forEach(function(t){t.init&&t.init(e)})}["getResource","addResource","addResources","addResourceBundle","removeResourceBundle","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(function(t){e[t]=function(){var n;return(n=e.store)[t].apply(n,arguments)}});var u=r(),c=function(){e.changeLanguage(e.options.lng,function(t,n){e.isInitialized=!0,e.logger.log("initialized",e.options),e.emit("initialized",e.options),u.resolve(n),o(t,n)})};return this.options.resources||!this.options.initImmediate?c():setTimeout(c,0),u}},{key:"loadResources",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m;if(!this.options.resources||this.options.partialBundledLanguages){if(this.language&&"cimode"===this.language.toLowerCase())return e();var n=[],r=function(e){if(e){t.services.languageUtils.toResolveHierarchy(e).forEach(function(t){n.indexOf(t)<0&&n.push(t)})}};if(this.language)r(this.language);else{this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(function(t){return r(t)})}this.options.preload&&this.options.preload.forEach(function(t){return r(t)}),this.services.backendConnector.load(n,this.options.ns,e)}else e(null)}},{key:"reloadResources",value:function(t,e,n){var i=r();return t||(t=this.languages),e||(e=this.options.ns),n||(n=m),this.services.backendConnector.reload(t,e,function(t){i.resolve(),n(t)}),i}},{key:"use",value:function(t){return"backend"===t.type&&(this.modules.backend=t),("logger"===t.type||t.log&&t.warn&&t.error)&&(this.modules.logger=t),"languageDetector"===t.type&&(this.modules.languageDetector=t),"i18nFormat"===t.type&&(this.modules.i18nFormat=t),"postProcessor"===t.type&&C.addPostProcessor(t),"3rdParty"===t.type&&this.modules.external.push(t),this}},{key:"changeLanguage",value:function(t,e){var n=this,i=r();this.emit("languageChanging",t);var o=function(t,r){n.translator.changeLanguage(r),r&&(n.emit("languageChanged",r),n.logger.log("languageChanged",r)),i.resolve(function(){return n.t.apply(n,arguments)}),e&&e(t,function(){return n.t.apply(n,arguments)})},s=function(t){t&&(n.language=t,n.languages=n.services.languageUtils.toResolveHierarchy(t),n.translator.language||n.translator.changeLanguage(t),n.services.languageDetector&&n.services.languageDetector.cacheUserLanguage(t)),n.loadResources(function(e){o(e,t)})};return t||!this.services.languageDetector||this.services.languageDetector.async?!t&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect(s):s(t):s(this.services.languageDetector.detect()),i}},{key:"getFixedT",value:function(t,e){var r=this,i=function t(e,i){var o;if("object"!==n.i(b.a)(i)){for(var s=arguments.length,a=new Array(s>2?s-2:0),u=2;u<s;u++)a[u-2]=arguments[u];o=r.options.overloadTranslationOptionHandler([e,i].concat(a))}else o=n.i(x.a)({},i);return o.lng=o.lng||t.lng,o.lngs=o.lngs||t.lngs,o.ns=o.ns||t.ns,r.t(e,o)};return"string"==typeof t?i.lng=t:i.lngs=t,i.ns=e,i}},{key:"t",value:function(){var t;return this.translator&&(t=this.translator).translate.apply(t,arguments)}},{key:"exists",value:function(){var t;return this.translator&&(t=this.translator).exists.apply(t,arguments)}},{key:"setDefaultNamespace",value:function(t){this.options.defaultNS=t}},{key:"hasLoadedNamespace",value:function(t){var e=this;if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;var n=this.languages[0],r=!!this.options&&this.options.fallbackLng,i=this.languages[this.languages.length-1];if("cimode"===n.toLowerCase())return!0;var o=function(t,n){var r=e.services.backendConnector.state["".concat(t,"|").concat(n)];return-1===r||2===r};return!!this.hasResourceBundle(n,t)||(!this.services.backendConnector.backend||!(!o(n,t)||r&&!o(i,t)))}},{key:"loadNamespaces",value:function(t,e){var n=this,i=r();return this.options.ns?("string"==typeof t&&(t=[t]),t.forEach(function(t){n.options.ns.indexOf(t)<0&&n.options.ns.push(t)}),this.loadResources(function(t){i.resolve(),e&&e(t)}),i):(e&&e(),Promise.resolve())}},{key:"loadLanguages",value:function(t,e){var n=r();"string"==typeof t&&(t=[t]);var i=this.options.preload||[],o=t.filter(function(t){return i.indexOf(t)<0});return o.length?(this.options.preload=i.concat(o),this.loadResources(function(t){n.resolve(),e&&e(t)}),n):(e&&e(),Promise.resolve())}},{key:"dir",value:function(t){return t||(t=this.languages&&this.languages.length>0?this.languages[0]:this.language),t?["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam"].indexOf(this.services.languageUtils.getLanguagePartFromCode(t))>=0?"rtl":"ltr":"rtl"}},{key:"createInstance",value:function(){return new e(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments.length>1?arguments[1]:void 0)}},{key:"cloneInstance",value:function(){var t=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:m,o=n.i(x.a)({},this.options,r,{isClone:!0}),s=new e(o);return["store","services","language"].forEach(function(e){s[e]=t[e]}),s.translator=new k(s.services,s.options),s.translator.on("*",function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];s.emit.apply(s,[t].concat(n))}),s.init(o,i),s.translator.options=s.options,s}}]),e}(j),F=new K;e.a=F},function(t,e){t.exports={core:{}}},function(t,e,n){function r(t){return n(i(t))}function i(t){var e=o[t];if(!(e+1))throw new Error("Cannot find module '"+t+"'.");return e}var o={"./2D.ts":10,"./ajax.ts":9,"./atom/index.ts":93,"./behavior.ts":94,"./data.ts":19,"./datatype.ts":3,"./event.ts":5,"./extensions.ts":24,"./geom/index.ts":25,"./graph/index.ts":46,"./i18n/index.ts":95,"./idtype/index.ts":4,"./index.ts":2,"./iterator.ts":26,"./layout.ts":102,"./layout_view.ts":103,"./math.ts":11,"./matrix/index.ts":104,"./multiform/index.ts":114,"./phovea.ts":55,"./plugin.ts":7,"./provenance/index.ts":117,"./range/index.ts":1,"./security.ts":22,"./session.ts":63,"./stratification/index.ts":121,"./sync/index.ts":126,"./table/index.ts":128,"./vector/index.ts":135,"./vis.ts":28,"./wrapper.ts":140};r.keys=function(){return Object.keys(o)},r.resolve=i,t.exports=r,r.id=143},function(t,e,n){n(74),n(72),n(73),t.exports=n(71)}])});